<!DOCTYPE html>
<!-- saved from url=(0054)https://www.redblobgames.com/grids/hexagons/#distances -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<title>Hexagonal Grids</title>
<link rel="canonical" href="https://www.redblobgames.com/grids/hexagons/">
<!--DO NOT EDIT: generated from redblobgames/grids/hexagons/index.bxml-->
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="preload" as="image" href="https://www.redblobgames.com/img/transparent-blob.png">
<link rel="alternate" type="application/atom+xml" title="Blog posts" href="https://www.redblobgames.com/blog/posts.xml">
<meta name="theme-color" content="hsl(0,50%,45%)">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@redblobgames">
<meta property="og:url" content="https://www.redblobgames.com/grids/hexagons/">
<meta property="og:title" content="Red Blob Games: Hexagonal Grids">
<meta name="description" content="Amit&#39;s guide to math, algorithms, and code for hexagonal grids">
<meta property="og:description" content="Amit&#39;s guide to math, algorithms, and code for hexagonal grids">
<meta property="og:image" content="https://www.redblobgames.com/thumbnail/hexagons.jpg">
<meta name="citation_title" content="Hexagonal Grids">
<meta name="citation_author" content="Patel, Amit J.">
<meta name="citation_publication_date" content="2013">
<meta name="citation_fulltext_html_url" content="https://www.redblobgames.com/grids/hexagons/">
<meta name="citation_technical_report_institution" content="Red Blob Games">
<script defer="" src="./Hexagonal Grids_files/vue.v2.min.js"></script><script defer="" src="./Hexagonal Grids_files/lib.js"></script><script defer="" src="./Hexagonal Grids_files/hex-algorithms.js"></script><script defer="" src="./Hexagonal Grids_files/diagrams.js"></script><script defer="" src="./Hexagonal Grids_files/index.js"></script><style>:root{--hue: 0;--bgurl: url("/img/transparent-blob.png")}/*! CSS Copyright 2007-2023 by amitp@cs.stanford.edu (Amit J. Patel)  *//*! I don't mind if you copy my stylesheet.  However, I'd appreciate it if you gave me credit. */body{--serif: "Iowan Old Style",Cambria,Georgia,serif;--sans-serif: "Avenir Next",Candara,Ubuntu,"Fira Sans",system-ui,"Segoe UI",sans-serif;--monospace: "Roboto Mono","Cascadia Code",Consolas,monospace,"Segoe UI Symbol",Symbol;--body-width: calc(100vw - 2.25rem);--font-size: calc(0.625rem + 1vw);--line-height: calc(1.5 * var(--font-size));font-family:var(--sans-serif);font-size:var(--font-size);line-height:1.5em;min-height:95%}@media (min-width: 34.375em){body{--body-width: min(20.6rem + 33vw, 41.25rem);--font-size: calc(var(--body-width) / 33)}}main{font-family:var(--serif)}h1,h2,h3,h4,h5,h6,figcaption,.sans-serif{font-family:var(--sans-serif);text-wrap:balance}tt,code,kbd,samp,pre{font-family:var(--monospace);font-size:0.8em}pre :is(tt, code, kbd, samp){font-size:unset}#table-of-contents{background-color:#fff;padding-left:1em;width:18em;float:right}#table-of-contents:after{clear:right}nav,#table-of-contents{font-family:var(--sans-serif);font-size:calc(var(--font-size) / 1.25)}nav a,#table-of-contents a{text-decoration-color:hsl(var(--hue), 20%, 90%)}@media screen{header,section>h2{text-shadow:0px 2px 5px rgba(0,0,0,0.8);text-rendering:optimizeLegibility}}h1{font-size:2.0em;margin:0;line-height:calc(1.5 * var(--line-height))}h1 .subheading{font-size:0.5em;line-height:var(--line-height)}sup,sub{position:relative;vertical-align:baseline;font-size:0.75em;line-height:0;padding-left:0.125em}sup{top:-0.5em}sub{bottom:-0.25em}details summary{cursor:pointer}*{box-sizing:border-box}html,body{margin:0;padding:0}html{background-color:#e4e4e0;color:#000}body{background-color:#fff;color:#333}header{display:block;text-align:center}header>h1{padding-top:var(--line-height)}@media screen{header,footer,.divider,section>h2{color:#fff;background-color:hsl(var(--hue), 50%, 45%);background-image:var(--bgurl), var(--bgurl), linear-gradient(180deg, hsl(var(--hue), 50%, 45%) 0%, hsl(var(--hue), 75%, 30%) 100%);background-position:0 0, 16px 16px;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}header a,footer a,.divider a,section>h2 a{color:hsl(var(--hue), 40%, 90%);background:unset;text-decoration:none}header a:hover,footer a:hover,.divider a:hover,section>h2 a:hover{background-color:rgba(0,0,0,0.5);text-decoration:underline}}footer a,.divider a{text-decoration:underline}main{margin-inline:0;padding-inline:0}section{margin:var(--line-height) 0}section>*{width:var(--body-width);max-width:100%}.comments{width:calc(1.5 * var(--body-width));max-width:100%}@media screen{.comments,.below-divider{background-color:#e6e6e5}}.comments{padding-bottom:1.25em;font-size:1.0em}.comments .comment-author{text-shadow:1px 1px 3px #fff}section>h2{--h2-margin: 3em;margin:var(--line-height) auto;padding:calc(var(--line-height) / 2 - 1px) 0;font-size:1.25em;width:calc(2 * var(--h2-margin) + var(--body-width));max-width:100%}section>h2>span{display:inline-block;margin-left:var(--h2-margin)}section>h2 a.anchor{float:right;width:calc(var(--h2-margin));text-align:center;color:hsl(var(--hue), 50%, 45%)}section>h2:hover a.anchor{color:hsl(var(--hue), 20%, 80%)}h3{--h2-margin: 3em;margin:var(--line-height) auto;font-size:1.125em}h3 a.anchor{float:right;width:calc(var(--h2-margin));text-align:center;color:hsl(var(--hue), 20%, 80%)}@media (min-width: 34.375em){h3 a.anchor{margin-right:calc(0em - var(--h2-margin))}}h4 a.anchor,h5 a.anchor,h6 a.anchor{padding-left:1em;color:hsl(var(--hue), 20%, 80%)}h3:hover a.anchor,h4:hover a.anchor,h5:hover a.anchor,h6:hover a.anchor{color:hsl(var(--hue), 50%, 40%)}header nav{display:block}header nav ul{display:flex;flex-flow:row wrap;justify-content:center;line-height:1.0;margin:0}header nav ul li{display:inline-block;padding:0.1em 0.3em;text-align:center;flex:0 0 4em;align-self:center;white-space:nowrap}header nav ul li a{display:block;font-weight:bold;text-decoration:none}header,.divider,section>h2{border-bottom:1px solid #000}.divider,section>h2{border-top:1px solid #000}.divider{min-height:calc(2 * var(--line-height));text-align:center}.below-divider{padding-top:var(--line-height);border-bottom:1px solid black}.below-divider>p:first-child{font-size:1.25em;text-align:center;margin-top:0}footer{--footer-padding-y: calc(var(--line-height) / 2);--footer-padding-x: var(--font-size);padding:var(--footer-padding-y) var(--footer-padding-x);border-top:1px solid #000}footer>div>address{display:block}footer>div>*{text-align:center}@media (min-width: 50em){footer>div{margin:0 auto;display:flex;flex-flow:row wrap;justify-content:center;max-width:calc(2 * var(--body-width));width:calc(100vw - 2 * var(--footer-padding-x))}footer>div>address{flex:0 1 20em;align-self:center;text-align:left}footer>div>div{flex:1 1 20em;align-self:center;text-align:right}footer>div>div>p,footer>div>div>div{margin-top:0}}h2:target{animation:target-attention 0.4s 1;font-size:2.0em}@keyframes target-attention{0%{transform:scale(1.1)}100%{transform:scale(1.1)}}div:target{border:1px dashed #888}kbd kbd{padding:0.1em 0.4em;margin:0 0.1em 0.2em 0.1em;font-size:0.75em;white-space:nowrap;background-color:#ddd;color:#242;border:1px solid rgba(0,0,0,0.2);border-radius:0.2em;box-shadow:inset 0 0 1px 1px #fff,0 2px 0 rgba(0,0,0,0.3)}samp,kbd{background-color:#f3f3f2}code,samp{color:#442}kbd{margin:0 0.4em;color:#252}section li::marker{font-family:var(--sans-serif);color:hsl(var(--hue), 50%, 40%)}img{max-width:100%;height:auto;-ms-interpolation-mode:bicubic}section figcaption{font-size:0.75em;line-height:1.1;text-align:center}a{color:hsl(var(--hue), 50%, 45%);text-decoration-color:hsl(var(--hue), 20%, 80%);text-underline-offset:0.25em}a:hover{text-decoration:underline;text-decoration-color:hsl(var(--hue), 50%, 45%);background:hsla(var(--hue), 50%, 50%, 0.1)}:focus-visible{outline-color:hsl(var(--hue), 50%, 45%)}.draft{font-family:var(--serif);font-size:calc(4 * var(--font-size));letter-spacing:-0.1em;color:#eee;opacity:0.5;text-align:center;transform:rotate(-5deg);line-height:1.0;position:absolute;top:0;height:0;left:25%;width:50%;pointer-events:none}@media (min-width: 34.375em){section p,section li{hanging-punctuation:first last;text-wrap:pretty;hyphens:auto;hyphenate-limit-chars:7}}nav,.section-number,address,time{font-variant-numeric:oldstyle-nums}.w-auto,section>.w-auto{width:auto}.w-full,section>.w-full{width:100%}.w-150b,section>.w-150b{width:calc(1.5 * var(--body-width))}.select-none{user-select:none;-webkit-user-select:none}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.text-sm{font-size:0.875em}.font-sans{font-family:var(--sans-serif)}.font-serif{font-family:var(--serif)}.font-mono{font-family:var(--monospace)}.normal-nums{font-variant-numeric:normal}.oldstyle-nums{font-variant-numeric:oldstyle-nums}p,figure,ul,ol{margin:var(--line-height) 0}header>*,section>*,footer>*,main>address,.comments{margin-inline:auto}figure{text-align:center}figure pre{text-align:left}li>ul,li>ol{margin-top:0;margin-bottom:0}figure img,figure svg,figure canvas{max-width:100%}dt{font-weight:bold}pre{width:var(--body-width);max-width:100%;line-height:1.4;overflow:auto;border-block:1px solid #ccc;border-inline-width:0}pre.simple,.comments pre{overflow:auto;width:calc(var(--body-width) * 1.2);border:none;background:transparent;background-color:transparent;box-shadow:none}pre.snippet,pre.src{border-top-style:dashed;border-bottom-style:dashed}section>pre:only-child{padding-bottom:var(--font-size);border-bottom:1px solid rgba(0,0,0,0.5)}blockquote{font-style:italic;text-wrap:balance}table.standard2024{font-family:var(--sans-serif);font-size:0.875em;border:2px solid white;border-collapse:collapse;overflow-x:auto}table.standard2024 th{background-color:#e8e8e3;border:2px solid white;padding:0 0.5em}table.standard2024 td{background-color:#fff;border:1px solid #f3f3f2;border-right-color:#babaab;padding:0 0.5em}table.standard2024 thead{border-bottom:2px solid #babaab}table.standard2024 thead th{background:linear-gradient(to top, #e8e8e3, #f4f4f1, #fafaf9)}table.standard{font-family:var(--sans-serif);font-size:0.875em;border-block:2px solid hsl(var(--hue), 10%, 50%);border-collapse:collapse;overflow-x:auto;text-align:left}table.standard td,table.standard th{border-bottom:1px solid #f3f3f2;padding:0 0.5em}table.standard :is(td, th):not(:last-child){border-right:1px solid #babaab}table.standard td{background-color:hsl(var(--hue), 10%, 97%);border-bottom-color:white}table.standard thead{border-bottom:2px solid hsl(var(--hue), 10%, 50%);vertical-align:bottom}table.standard tfoot{border-top:2px solid hsl(var(--hue), 10%, 50%);vertical-align:bottom}table.standard thead th{background:linear-gradient(to top, hsl(var(--hue), 10%, 85%), hsl(var(--hue), 15%, 87%), hsl(var(--hue), 15%, 90%));border-bottom:unset}table.standard tbody th{background-color:hsl(var(--hue), 10%, 95%);border-bottom:1px solid white}table.standard tr:hover :is(td, th){background-color:hsl(var(--hue), 25%, 93%)}aside,p.note,div.note>p{width:calc(--body-width - 2em);padding:1em;background:#eee;border:1px solid #ddd;box-shadow:0 8px 6px -6px rgba(0,0,0,0.4)}tt,code{padding:0 2px}pre :is(tt, code){padding:unset}main>address,section>address,section>time{display:block;width:var(--body-width);max-width:100%;font-family:var(--sans-serif);text-align:right}form{margin:0}input{accent-color:hsl(var(--hue), 50%, 50%)}input[type="text"]{max-width:100%;border:1px solid rgba(0,0,0,0.7);background-color:#f8f8f4;color:#000;text-align:center;font-weight:bold}input[type="text"]:focus{background-color:#fffff4}input::placeholder{color:#aaa}input[type="search"][name="q"]{box-shadow:inset 0 0.1em 0.3em 0 rgba(0,0,0,0.5);border-radius:0.6em;padding:0.3em 0.6em;border-width:0}button{touch-action:manipulation;cursor:pointer;user-select:none}.TODO{color:#bf4040;background:#e8e3e3;border:1px solid #bf4040;margin-left:0.5ex}.DONE{color:#4040bf;background:#e3e3e8;border:1px solid #4040bf}.src .constant{font-style:oblique}.src .comment-delimiter,.src .nxml-comment-delimiter{color:#4488ff}.src .comment,.src .nxml-comment-content{color:#006699}.src .builtin{color:#508b20}.src .warning{color:#cc0000}.src .function-name{color:#268bd2;font-weight:bold}.src .variable-name{font-weight:bold;color:#5c3d5c}.src .type{color:#6c71c4}.src .constant-face{color:#d33682}.src .doc{color:#666666;background-color:#e2e6e8}.src .string{color:#888888}.src .preprocessor{color:#859900}.src .negation-char,.src .sh-escaped-newline{color:#ff0000}.src .todo{color:#ffffff;background:#dc322f}.src .note{color:#ffffff;background:#2aa198}.src .hack{color:#ffffff;background:#859900}.src .operator{color:black;font-weight:bold}.src .paren{color:#a0a090;font-weight:bold}.src .keyword{color:#679;font-weight:bold}.src .minor-control-construct{color:#406abf;font-weight:bold}.src .major-control-construct{color:#bf4040}.src-cpp .constant{color:#999999}.src-emacs-lisp .paren{color:#c9c9c4}.src-sh .string,.src-sh .comment{color:inherit}.src-python .highlight-indentation{border-right:2px solid #eeeeee}.src-css .css-selector{color:#478547}.src-css .css-property{color:#406abf}.src-xml .nxml-element-prefix{color:#bf40bf}.src-xml .nxml-element-local-name{color:#406abf;font-weight:normal}.src-xml .nxml-attribute-local-name{color:#478547}.src-xml .nxml-element-colon{color:#a3adc2}.src-xml .nxml-tag-delimiter,.src-xml .nxml-tag-slash{color:#9cabc9;font-weight:bold}table.standard td.left,table.standard th.left{text-align:left}table.standard td.center,table.standard th.center{text-align:center}table.standard td.right,table.standard th.right{text-align:right}@media screen{*[class^="section-number"]{color:hsl(var(--hue), 20%, 50%)}h2 .section-number{display:inline-block;margin-left:0;padding-left:0.5em;text-align:center;width:var(--h2-margin);color:hsl(var(--hue), 50%, 80%)}h2 .section-number+span{margin-left:0}h3>.section-number{float:left;text-align:center;width:2.7em;margin-right:0.3em;color:hsl(var(--hue), 25%, 90%);background:hsl(var(--hue), 50%, 50%);background-image:var(--bgurl), var(--bgurl);background-position:0 0, 16px 16px;border-radius:0.25em;text-shadow:0px 2px 5px rgba(0,0,0,0.8)}}@media screen and (min-width: 34.375em){h3>.section-number{height:2em;margin-left:-3em;margin-top:-0.3em;padding-top:0.3em;border-block:1px solid black}h3>a.anchor{background:url(https://www.redblobgames.com/img/svg-blob-mini.svg) no-repeat center center;background-size:2cap 2cap}h3:hover>a.anchor{background:none}}.print-endnote{display:none}@media print{@page{margin:0.5in}body{--font-size: 14pt;--serif: "Book Antiqua", "Times New Roman", serif;--sans-serif: "Helvetica", sans-serif;--monospace: "Courier", "Courier New", monospace}h2,h3{page-break-after:avoid}figure{page-break-inside:avoid}p,li{orphans:5;widows:5}section p a,section li a{text-decoration:underline;text-decoration-color:#ddd}header nav,.comments{display:none}.print-endnote{display:unset}.print-endnote li{list-style-type:none;word-break:break-all}.print-endnote img{width:2.5em;vertical-align:bottom}}

@media print{header::before{position:absolute;right:0;top:0;content:url(https://chart.apis.google.com/chart?chs=120x120&cht=qr&chl=https%3A%2F%2Fwww.redblobgames.com%2Fgrids%2Fhexagons%2F);}}
	  
      @media screen {
          .colored-background, header, .footer, .divider, section > h2 {
              /* Override the blob image */
              /* This background from http://philbit.com/svgpatterns/#honeycomb */
              background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyOCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDU2IDEwMCI+CjxyZWN0IHdpZHRoPSI1NiIgaGVpZ2h0PSIxMDAiIGZpbGw9ImhzbCgwLDUwJSw1MCUpIj48L3JlY3Q+CjxwYXRoIGQ9Ik0yOCA2NkwwIDUwTDAgMTZMMjggMEw1NiAxNkw1NiA1MEwyOCA2NkwyOCAxMDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iaHNsKDAsNTAlLDQwJSkiIHN0cm9rZS13aWR0aD0iMiI+PC9wYXRoPgo8cGF0aCBkPSJNMjggMEwyOCAzNEwwIDUwTDAgODRMMjggMTAwTDU2IDg0TDU2IDUwTDI4IDM0IiBmaWxsPSJub25lIiBzdHJva2U9ImhzbCgwLDUwJSw0NSUpIiBzdHJva2Utd2lkdGg9IjEuNSI+PC9wYXRoPgo8L3N2Zz4=");
          }
      }
  
/* switch to two column when width > 40px marginleft + 660px body + 18px gutter + 400px diagrams + 40px marginright = 1158px */
@media (min-width: 72.375em) {
      body {
          --gutter: 1.125rem;
          --diagram-width: calc(100vw - 47.375rem);
          --margin-left: calc((100vw - var(--body-width) - var(--gutter) - var(--diagram-width)) / 2);
      }

      section > * {
          margin-left: var(--margin-left);
          max-width: var(--body-width);
      }
      section > h2 {
          margin-left: calc(var(--margin-left) - var(--h2-margin));
      }
      body section > .float-container {
          width: calc(var(--body-width) + var(--gutter) + var(--diagram-width));
          max-width: inherit;
      }
      body section > .float-container > .float-right {
          width: var(--diagram-width);
      }
      body #table-of-contents {
          width: 18.75rem;
          float: right;
          margin-left: 6.25rem;
      }
}
/* but when the diagrams reach 600px, stop them from growing further */
@media (min-width: 84.875em) { 
      body {
          --diagram-width: 37.5rem;
      }
}
      
h2, h3, .float-container {
      clear: both;
}
.float-container:after {
      content: "";
      display: table;
      clear: both;
}      

.float-container > * {
    float: left;
    clear: left;
    margin-top: 0; /* TODO: figure out a better way to deal with this */
    width: var(--body-width);
}
.float-container > .float-right {
    float: right;
    clear: right;
}
.float-container > p:first-child, .float-container > div:first-child > p:first-child, .float-right > figure:first-child {
    /* Hack to deal with margin outside float not overlapping with margin inside float */
    margin-top: 0;
}

#table-of-contents {
    float: none;
    width: var(--body-width);
    columns: 10em;
    list-style-type: square;
    list-style-position: inside;
    list-style-image: url("hexagon-bullet.svg");
}
    
/* From http://www.redblobgames.com/grids/hexagons/
 * Copyright 2018 Red Blob Games <redblobgames@gmail.com>
 */

svg {
    contain: content;
    content-visibility: auto;
    overflow: hidden;
    pointer-events: visiblePainted;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
    touch-action: manipulation;
}

svg > * {
    pointer-events: none;
}

figure {
    width: var(--body-width);
    text-align: center;
}

label {
    /* assume this is only used for checkbox and radio */
    cursor: pointer;
}
    
button {
    font-weight: bold;
    font-size: inherit;
    font-family: inherit;
    border: 2px outset hsl(0, 0%, 90%);
    border-radius: 0.25em;
    background: hsl(0, 0%, 90%);
    color: black;
    box-shadow: 0px 0px 3px 1px hsla(0, 0%, 0%, 0.2);
    margin: 0 0.25em;
    padding: 0 0.125em;
    -webkit-appearance:none;
    cursor: pointer;
}
    
button.highlight {
    border: 2px inset hsl(0, 50%, 90%);
    background: hsl(0, 50%, 95%);
    box-shadow: 0px 0px 3px 1px hsla(60, 100%, 50%, 0.5);
}
    
button:hover {
    outline: 1px solid white;
    box-shadow: 0px 0px 3px 1px hsla(0, 50%, 50%, 0.5);
}

pre.matrix {
    line-height: 1.0;
    padding: 0.5em 1em;
    background: transparent;
    border: none;
    resize: none;
}
    
polygon { pointer-events: visiblePainted; fill: hsl(60, 10%, 95%); stroke: hsl(0, 0%, 70%); stroke-width: 2px; }

text { font-size: 40px; font-family: var(--sans-serif); text-anchor: middle; fill: black; stroke: none; }
.shadow text, .faded text { fill: hsl(60, 10%, 70%); }
path.path { fill: none; stroke: hsl(60, 20%, 70%); stroke-width: 100px; stroke-opacity: 0.3; stroke-linecap: round; stroke-linejoin: round; }

#diagram-spacing .measurement path { fill: hsl(0, 50%, 50%); stroke: hsl(0, 50%, 50%); fill-opacity: 0.5; transition: fill-opacity 0.5s, stroke-opacity 0.75s; }
:is(#diagram-spacing, #diagram-sizes) .measurement text { font-size: 14px; transition: fill-opacity 0.25s; }
:is(#diagram-spacing, #diagram-sizes) .hide * { fill-opacity: 0.0; }

circle.marker { fill: hsl(0, 50%, 50%); }
line.marker { stroke: hsl(0, 50%, 50%); stroke-width: 5px; }
.corners circle.marker { fill: hsl(0, 25%, 25%); }

.offset-diagram polygon { stroke-width: 3px; }
.offset-diagram .grid text { font-size: 70px; }
.doubled-diagram .grid text { font-size: 60px; }

.q-axis-same .q-coord, .origin .q-coord { fill: hsl( 90, 100%, 35%); font-weight: bold; }
.r-axis-same .r-coord, .origin .r-coord { fill: hsl(200, 100%, 45%); font-weight: bold; }
.s-axis-same .s-coord, .origin .s-coord { fill: hsl(300,  80%, 50%); font-weight: bold; }
.q-axis-same polygon, #diagram-grid-cube .q-axis-same polygon { fill: hsl( 90, 20%, 87%); }
.r-axis-same polygon, #diagram-grid-cube .r-axis-same polygon { fill: hsl(200, 15%, 90%); }
.hide-s-coordinate .s-coord { fill: hsl(300, 10%, 85%); }
.hide-s-coordinate .s-axis-same polygon { fill: hsl(300, 10%, 95%); }
#diagram-grid-cube .s-axis-same polygon { fill: hsl(300, 10%, 90%); }
#diagram-grid-axial .highlight polygon, #diagram-grid-cube .highlight polygon { fill: hsl(60, 100%, 85%); }


.origin    polygon { fill: hsl(60, 10%, 100%); }
.samerow   polygon { fill: hsl(120, 20%, 90%); }
.shadow    polygon { fill: hsl(60, 10%, 90%); }
.highlight polygon { fill: hsl(60, 100%, 85%); }
.wall      polygon { fill: hsl(0, 20%, 70%); }

#diagram-parts .root text { font-size: 15px; }

#diagram-cube-to-hex polygon.top { fill: hsl(60, 5%, 95%); }
#diagram-cube-to-hex polygon.left { fill: hsl(60, 0%, 90%); }
#diagram-cube-to-hex polygon.right { fill: hsl(280, 5%, 85%); }

.x line { fill: none; stroke: hsl( 90, 100%, 35%); }
.y line { fill: none; stroke: hsl(300,  80%, 50%); }
.z line { fill: none; stroke: hsl(200, 100%, 45%); }

/* NOTE: have to keep stroke out of non-svg elements because safari uses it */
.q { color: hsl(90, 100%, 25%); }
svg .q { stroke: hsl( 90, 100%, 35%); stroke-width: 4px; }
.r { color: hsl(200, 100%, 35%); }
svg .r { stroke: hsl(200, 100%, 45%); stroke-width: 4px; }
.s { color: hsl(300, 80%, 40%); }
svg .s { stroke: hsl(300,  80%, 50%); stroke-width: 4px; }

.axes path.q { fill: hsl( 90, 50%, 35%); }
.axes path.r { fill: hsl(200, 50%, 45%); }
.axes path.s { fill: hsl(300, 40%, 50%); }
.axes path { fill-opacity: 0.5; stroke-opacity: 0.5; }
#diagram-grid-comparison text { font-size: 30px; }
#diagram-grid-axial .axes path.s { stroke: white; fill: hsl(300, 10%, 80%); }

/* #diagram-distances .grid polygon { fill: hsl(60, 10%, 85%); } */
.d0 polygon { fill: hsl(60, 10%, 80%); }
.d1 polygon { fill: hsl(60, 10%, 83%); }
.d2 polygon { fill: hsl(60, 10%, 87%); }
.d3 polygon { fill: hsl(60, 10%, 91%); }
.d4 polygon { fill: hsl(60, 10%, 95%); }
.d0.highlight polygon { fill: hsl(60, 50%, 85%); }
.d1.highlight polygon { fill: hsl(60, 50%, 88%); }
.d2.highlight polygon { fill: hsl(60, 50%, 92%); }
.d3.highlight polygon { fill: hsl(60, 50%, 96%); }
.d4.highlight polygon { fill: hsl(60, 50%, 100%); }
#diagram-distances .q-axis-max .q-coord,
#diagram-distances .r-axis-max .r-coord,
#diagram-distances .s-axis-max .s-coord
{ font-weight: bold; fill: black; }
#diagram-distances .highlight.q-axis-max .q-coord { fill: hsl(90, 100%, 35%); }
#diagram-distances .highlight.r-axis-max .r-coord { fill: hsl(200, 100%, 45%); }
#diagram-distances .highlight.s-axis-max .s-coord { fill: hsl(300, 80%, 50%); }

.neighbors-code span.highlight { background: hsl(60, 100%, 85%); }

#diagram-line-drawing path.path { stroke: black; stroke-opacity: 0.15; stroke-width: 24px; }

#diagram-line-drawing .highlight polygon { fill: hsl(200, 50%, 80%); }

#diagram-range-coordinate .grid text { fill: hsl(0, 0%, 80%); }
#diagram-range-coordinate .grid .highlight text { fill: hsl(0, 0%, 70%); }
#diagram-range-coordinate text.inequality { font-size: 60px; }

#diagram-range-intersection .regionA polygon { fill: hsl(200, 40%, 80%); }
#diagram-range-intersection .regionB polygon { fill: hsl(300, 20%, 80%); }
#diagram-range-intersection .regionA.regionB polygon { fill: hsl(150, 20%, 80%); }
#diagram-range-intersection .highlight polygon { fill: hsl(200, 50%, 70%); }
#diagram-range-intersection .center polygon { fill: hsl(300, 30%, 70%); }
#diagram-range-intersection .regionA.regionB.center polygon { fill: hsl(150, 30%, 70%); }
#diagram-range-intersection .regionA.regionB.highlight polygon { fill: hsl(150, 30%, 70%); }

#diagram-movement-range .origin polygon { fill: hsl(60, 100%, 50%); }
#diagram-movement-range text { font-size: 60px; }
#diagram-movement-range .path text { font-weight: bold; fill: black; }

#diagram-rotation .right2 polygon { fill: hsl(300, 20%, 80%); }
#diagram-rotation .left2  polygon { fill: hsl(120, 20%, 80%); }
#diagram-rotation .right1 polygon { fill: hsl(300, 40%, 80%); }
#diagram-rotation .left1  polygon { fill: hsl(120, 40%, 80%); }
#diagram-rotation .opposite polygon { fill: hsl(200, 20%, 80%); }
#diagram-rotation .highlight polygon { fill: hsl(200, 50%, 80%); }
#diagram-rotation .arrow { fill-opacity: 0.5; stroke-width: 3; stroke-opacity: 0.5; }
#diagram-rotation .arrow.right     { fill: hsl(300, 50%, 70%); stroke: hsl(300, 50%, 30%); }
#diagram-rotation .arrow.left      { fill: hsl(120, 50%, 70%); stroke: hsl(120, 50%, 30%); }
#diagram-rotation .arrow.highlight { fill: hsl(200, 50%, 70%); stroke: hsl(200, 50%, 30%); }
#diagram-rotation .grid text { fill: hsl(0, 0%, 80%); }
#diagram-rotation .left1 text,
#diagram-rotation .left2 text,
#diagram-rotation .right1 text,
#diagram-rotation .right2 text,
#diagram-rotation .opposite text,
#diagram-rotation .highlight text,
#diagram-rotation .center text { fill: hsl(0, 0%, 0%); }

#diagram-reflection .grid text { fill: hsl(0, 0%, 80%); }
#diagram-reflection .highlight text,
#diagram-reflection .q-primary text,
#diagram-reflection .r-primary text,
#diagram-reflection .s-primary text,
#diagram-reflection .q-secondary text,
#diagram-reflection .r-secondary text,
#diagram-reflection .s-secondary text { fill: hsl(0, 0%, 0%); }
#diagram-reflection .q-axis-same polygon,
#diagram-reflection .r-axis-same polygon,
#diagram-reflection .s-axis-same polygon { fill: hsl(0, 0%, 100%); }
#diagram-reflection line.primary.axis.q { stroke: hsl(120, 40%, 50%); }
#diagram-reflection line.primary.axis.r { stroke: hsl(200, 40%, 50%); }
#diagram-reflection line.primary.axis.s { stroke: hsl(300, 40%, 50%); }
#diagram-reflection line.axis { stroke-width: 10px; stroke-opacity: 0.5; }
#diagram-reflection .q-primary polygon { fill: hsl(120, 40%, 80%); }
#diagram-reflection .q-secondary polygon { fill: hsl(120, 10%, 80%); }
#diagram-reflection .r-primary polygon { fill: hsl(200, 40%, 80%); }
#diagram-reflection .r-secondary polygon { fill: hsl(200, 10%, 80%); }
#diagram-reflection .s-primary polygon { fill: hsl(300, 40%, 80%); }
#diagram-reflection .s-secondary polygon { fill: hsl(300, 10%, 80%); }
#diagram-reflection .arrow { fill-opacity: 0.5; stroke-width: 3; stroke-opacity: 0.5; }
#diagram-reflection .q.primary.arrow { fill: hsl(120, 50%, 70%); }
#diagram-reflection .r.primary.arrow { fill: hsl(200, 50%, 70%); }
#diagram-reflection .s.primary.arrow { fill: hsl(300, 50%, 70%); }

#diagram-rings .highlight polygon,
#diagram-spiral .highlight polygon { fill: hsl(200, 50%, 80%); }
#diagram-rings .arrow,
#diagram-spiral .arrow
{ fill: hsl(200, 50%, 50%); fill-opacity: 0.5; stroke: hsl(200, 50%, 30%); stroke-width: 1.0; stroke-opacity: 0.3; }

#diagram-spiral-coordinates .path { stroke: hsl(200 50% 80%); stroke-width: 70px; stroke-opacity: 0.0; transition: stroke-opacity 0.75s; }
#diagram-spiral-coordinates .path.visible { stroke-opacity: 0.5; transition: stroke-opacity 0.25s; }

#diagram-field-of-view .origin polygon { fill: hsl(60, 100%, 70%); }
#diagram-field-of-view circle { stroke: black; stroke-width: 2px; fill: hsl(60, 10%, 70%); }
#diagram-field-of-view circle.blocked { fill: hsl(0, 100%, 50%); }
#diagram-field-of-view circle.visible { fill: hsl(60, 100%, 75%); }

#diagram-hex-to-pixel-axial path { fill-opacity: 0.5; stroke-width: 1.0; stroke-opacity: 0.3; }
#diagram-hex-to-pixel-axial path.q { fill: hsl(200, 50%, 70%); stroke: hsl(200, 50%, 30%); }
#diagram-hex-to-pixel-axial path.r { fill: hsl(120, 35%, 70%); stroke: hsl(120, 35%, 30%); }
    
#diagram-wraparound .wrapped polygon { fill: hsl(300, 5%, 80%); }
#diagram-wraparound .wrapped.parity polygon { fill: hsl(120, 5%, 85%); }
#diagram-wraparound .wrapped.origin polygon { fill: hsl(200, 10%, 70%); }
#diagram-wraparound .highlight polygon { fill: hsl(200, 50%, 80%); }
#diagram-wraparound .wrapped.highlight polygon { fill: hsl(200, 40%, 90%); }

#diagram-pathfinding .path      polygon { fill: hsl(200,  10%, 90%); }
#diagram-pathfinding .origin    polygon { fill: hsl(60,  100%, 50%); }
#diagram-pathfinding .wall      polygon { fill: hsl(0,  20%, 70%); }
#diagram-pathfinding path.path { fill: none; stroke: hsl(60, 20%, 50%); stroke-width: 15px; stroke-opacity: 0.5; stroke-linecap: round; stroke-linejoin: round; }

#diagram-map-storage .firstcol .q-coord { fill: hsl( 90, 100%, 35%); font-weight: bold; }

.toggle-orientation { cursor: pointer; }
.toggle-orientation polygon { fill: hsl(0, 0%, 90%); }
.toggle-orientation.selected polygon { fill: hsl(0, 50%, 75%); }
.toggle-orientation text { fill: black; }

.axis {
    fill: none;
    stroke: hsl(0, 0%, 75%);
    stroke-dasharray: 4, 3;
}

section > .wide-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    max-width: calc(100vw - 4.5rem);
    width: calc(2 * var(--body-width));
}
.wide-container > figure {
    flex: 1 1 9.375rem;
    padding: 0.3125rem;
    margin-top: 0;
    margin-bottom: 0;
}


dfn {
    /* I'm not quite using this right because I show the definition with interaction instead of the browser's text definition */
    border-bottom: 2px dashed hsl(0, 50%, 50%);
    cursor: help;
    color: unset;
    font-style: unset;
}
dfn::after {
    content: " ?";
    vertical-align: super;
    font-size: 50%;
    font-weight: bold;
    color: hsl(0, 50%, 50%);
}

pre {
    /* This style matches the diagrams */
    background-color: hsl(60, 10%, 95%);
    border-color: hsla(0, 0%, 70%, 0.5);
    box-shadow: none;
}

@media (hover: none), (-moz-touch-enabled: 1) {
    .show-for-mouse {
        display: none;       
    }
}
@media (hover: hover), (-moz-touch-enabled: 0) {
    .show-for-touch {
        display: none;
    }
}

table.grid-comparison {
    font-family: var(--sans-serif);
    font-size: 80%;
}
table.grid-comparison thead th:not(:first-child) {
    border-bottom: 2px solid black;
}
table.grid-comparison tbody th {
    text-align: right;
}
table.grid-comparison td {
    text-align: center;
    padding: 0 0.5em;
    background-color: hsl(60, 5%, 99%);
    box-shadow: 0 1px 2px hsla(60,5%,50%,0.1);
}

.diagram-visible:is(.rotate-flat, .rotate-pointy), .diagram-visible .unrotate {
    /* In Safari, these transitions don't trigger until a diagram is
       scrolling into view, but in Chrome and Firefox they happen
       immediately (the desired behavior). To work around that, I'm
       disabling them using IntersectionObserver. */
    transition: transform 0.5s;
    transition-timing-function: cubic-bezier(0.5, -0.2, 0.5, 1.2);
}
.rotate-flat, .rotate-flat .unrotate {
    transform: rotate(0deg);
}
.rotate-pointy {
    transform: rotate(-30deg);
}
.rotate-pointy .unrotate {
    transform: rotate(30deg);
}


  </style>
<script>function $l(s,e,d){d=document;if(d.location.hostname!='localhost'){e=d.createElement('script');e.async=true;e.src=s;e.dataset.timestamp=+new Date();d.body.appendChild(e)}}</script>
</head>
<body class="gameprog">
<header><h1>Hexagonal Grids</h1>
<div class="subheading">
                &nbsp;from <a href="https://www.redblobgames.com/">Red Blob Games</a>
</div>
<nav><search><form action="https://www.google.com/search">
<ul> <li><a href="https://www.redblobgames.com/">Home</a></li> <li><a href="https://www.redblobgames.com/blog/">Blog</a></li> <li><a href="https://pinboard.in/u:amitp/t:gamedev/">Links</a></li> <li><a href="https://bsky.app/profile/redblobgames.com">Bluesky</a></li> <li><a rel="me" href="http://www-cs-students.stanford.edu/~amitp/">About</a></li> <li>&nbsp;</li> <li><input type="search" name="q" placeholder="Search" size="8"></li>
</ul>
<input type="hidden" name="hq" value="site:www.redblobgames.com OR site:theory.stanford.edu/~amitp/ OR site:www-cs-students.stanford.edu/~amitp/ OR site:amitp.blogspot.com OR site:simblob.blogspot.com">
</form></search></nav></header><main><!-- Adapting the layout to wide vs narrow:

     Make a div.float-container to surround areas that should be wider.
     a. Any children inside this will be in the left column.
     b. Except if it's .float-right then it will be in the right column.
     
     For example layout A {diagram} B, the narrow version will be

         AAAAAAA
         diagram
         diagram
         BBBBBBB

     and the wide version will be

         AAAAAAA  diagram
         BBBBBBB  diagram
                  
  --><address>Mar 2013, <small>updated in Mar 2015, Apr 2018, Feb 2019, May 2020, Oct 2021, Dec 2022, Feb 2023, Oct 2024, Mar 2025</small>
</address>
<section><div class="float-container">
<p>This guide will cover various ways to make hexagonal grids, the relationships between different approaches, and common formulas and algorithms. I've been <a href="http://www-cs-students.stanford.edu/~amitp/gameprog.html#hex">collecting hex grid resources</a><sup class="print-endnote">[1]</sup> for over 25 years. I wrote this guide to the most elegant approaches that lead to the simplest code, starting from the guides by <a href="http://www-cs-students.stanford.edu/~amitp/Articles/Hexagon2.html">Charles Fu</a><sup class="print-endnote">[2]</sup> and <a href="http://www-cs-students.stanford.edu/~amitp/Articles/HexLOS.html">Clark Verbrugge</a><sup class="print-endnote">[3]</sup>. Most parts of this page are interactive. To get an offline copy of this page, use your browser's File → Save As (preserves interactivity) or File → Print (loses interactivity).</p>
<ol id="table-of-contents" class="float-right">
<li><a href="https://www.redblobgames.com/grids/hexagons/#basics">Geometry</a></li>
<li><a href="https://www.redblobgames.com/grids/hexagons/#coordinates">Coordinate systems</a></li>
<li><a href="https://www.redblobgames.com/grids/hexagons/#conversions">Conversions</a></li>
<li><a href="https://www.redblobgames.com/grids/hexagons/#neighbors">Neighbors</a></li>
<li><a href="https://www.redblobgames.com/grids/hexagons/#distances">Distances</a></li>
<li><a href="https://www.redblobgames.com/grids/hexagons/#line-drawing">Line drawing</a></li>
<li><a href="https://www.redblobgames.com/grids/hexagons/#range">Range</a></li>
<li><a href="https://www.redblobgames.com/grids/hexagons/#rotation">Rotation</a></li>
<li><a href="https://www.redblobgames.com/grids/hexagons/#reflection">Reflection</a></li>
<li><a href="https://www.redblobgames.com/grids/hexagons/#rings">Rings and Spirals</a></li>
<li><a href="https://www.redblobgames.com/grids/hexagons/#field-of-view">Field of view</a></li>
<li><a href="https://www.redblobgames.com/grids/hexagons/#hex-to-pixel">Hex to pixel</a></li>
<li><a href="https://www.redblobgames.com/grids/hexagons/#pixel-to-hex">Pixel to hex</a></li>
<li><a href="https://www.redblobgames.com/grids/hexagons/#rounding">Rounding</a></li>
<li><a href="https://www.redblobgames.com/grids/hexagons/#map-storage">Map storage</a></li>
<li><a href="https://www.redblobgames.com/grids/hexagons/#wraparound">Wraparound maps</a></li>
<li><a href="https://www.redblobgames.com/grids/hexagons/#pathfinding">Pathfinding</a></li>
<li><a href="https://www.redblobgames.com/grids/hexagons/#references">More reading</a></li>
</ol>
<p>The code samples on this page are written in pseudo-code; they're meant to be easy to read and understand. <a href="https://www.redblobgames.com/grids/hexagons/implementation.html">The implementation guide</a> has code in C++, Javascript, C#, Python, Java, Typescript, and more.</p>
</div>
<br style="clear:both"><noscript>This page includes interactive diagrams that require your browser to have SVG and Javascript enabled.</noscript></section><section><h2 id="basics">
<span><a href="https://www.redblobgames.com/grids/hexagons/#basics">Geometry</a></span><a class="anchor" href="https://www.redblobgames.com/grids/hexagons/#basics">#</a>
</h2>
<div id="diagram-sizes" class="float-container"><p>Hexagons are any 6-sided polygons. <em>Regular</em> hexagons have all the sides the same length. I'll assume all the hexagons we're working with here are regular.</p> <div class="float-right"><figure style="display: inline-block; margin: 0px; width: 20em; max-width: 48%; --heightColor: hsl(0, 0%, 70%); --widthColor: hsl(0, 0%, 70%); --circumradiusColor: hsl(0, 40%, 60%); --inradiusColor: hsl(0, 0%, 85%);"><svg viewBox="-140 -125 250 255"><defs><radialgradient id="gradient-radial-gray"><stop offset="0%" stop-color="hsl(0,10%,95%)"></stop><stop offset="98%" stop-color="hsl(0,10%,97%)"></stop><stop offset="100%" stop-color="hsl(0,30%,93%)"></stop></radialgradient></defs><text y="-110" style="font-size: 14px;">Flat-top orientation</text><path transform="translate(-85,-120)" stroke="hsl(0,50%,50%)" stroke-width="2" stroke-endcap="round" fill="none" d="M -7.5,5.7 L -5,1.4 L 5,1.4 L 7.5,5.7"></path><g transform="rotate(0)"><circle r="100" fill="url(#gradient-radial-gray)" stroke="none"></circle><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87" style="stroke: rgb(140, 115, 115); fill: white;"></polygon><circle r="86" fill="url(#gradient-radial-gray)" stroke="none"></circle><!----><!----><!----><!----></g><g class="measurement"><path d="M 0,-86.60254037844386 l -125,0 M 0,86.60254037844386 l -125,0" class="axis" style="stroke: var(--heightColor);"></path><path transform="translate(-110.0,-86.6) rotate(90)" d="M 0 0 l 3 3 l 0 -1.5 l 83.60254037844386 0 l -0.44999999999999996 -1.5 l 0.44999999999999996 -1.5 l -83.60254037844386 0 l 0 -1.5 Z M 0 -15 l 0 30" style="stroke: var(--heightColor); fill: var(--heightColor);"></path><path transform="translate(-110.0,86.6) rotate(-90)" d="M 0 0 l 3 3 l 0 -1.5 l 83.60254037844386 0 l -0.44999999999999996 -1.5 l 0.44999999999999996 -1.5 l -83.60254037844386 0 l 0 -1.5 Z M 0 -15 l 0 30" style="stroke: var(--heightColor); fill: var(--heightColor);"></path><text y="-118" text-anchor="middle" transform="rotate(-90)" style="font-size: 12px;">height = √3 ✕ size</text></g><g class="measurement"><path d="M -100,0 l 0,125 M 100,0 l 0,125" class="axis" style="stroke: var(--widthColor);"></path><path transform="translate(-100.0,110.0) rotate(0)" d="M 0 0 l 3 3 l 0 -1.5 l 97 0 l -0.44999999999999996 -1.5 l 0.44999999999999996 -1.5 l -97 0 l 0 -1.5 Z M 0 -15 l 0 30" style="stroke: var(--widthColor); fill: var(--widthColor);"></path><path transform="translate(100.0,110.0) rotate(180)" d="M 0 0 l 3 3 l 0 -1.5 l 97 0 l -0.44999999999999996 -1.5 l 0.44999999999999996 -1.5 l -97 0 l 0 -1.5 Z M 0 -15 l 0 30" style="stroke: var(--widthColor); fill: var(--widthColor);"></path><text y="126" text-anchor="middle" transform="rotate(0)" style="font-size: 12px;">width = 2 ✕ size</text></g><g transform="rotate(0)"><g fill="white" stroke-width="1.5" style="stroke: var(--circumradiusColor);"><path d="M 0,0 l 100,0" stroke-width="2.5"></path><circle cx="100" r="2"></circle></g><g fill="black" text-anchor="middle"><text x="42" y="12" style="font-size: 12px;">size</text></g></g><g transform="rotate(270)"><g fill="white" stroke-width="1.5" style="stroke: var(--inradiusColor);"><path d="M 0,0 l 87,0" stroke-width="2.5"></path><circle cx="87" r="2"></circle></g><g fill="black" text-anchor="middle"><text x="45" y="-3" style="font-size: 12px;"></text></g></g><circle r="5" class="marker" transform="scale(0.5)" style="fill: black;"></circle></svg></figure><figure style="display: inline-block; margin: 0px; width: 20em; max-width: 48%; --heightColor: hsl(0, 0%, 70%); --widthColor: hsl(0, 0%, 70%); --circumradiusColor: hsl(0, 40%, 60%); --inradiusColor: hsl(0, 0%, 85%);"><svg viewBox="-140 -125 250 255"><defs><radialgradient id="gradient-radial-gray"><stop offset="0%" stop-color="hsl(0,10%,95%)"></stop><stop offset="98%" stop-color="hsl(0,10%,97%)"></stop><stop offset="100%" stop-color="hsl(0,30%,93%)"></stop></radialgradient></defs><text y="-110" style="font-size: 14px;">Pointy-top orientation</text><path transform="translate(-85,-120)" stroke="hsl(0,50%,50%)" stroke-width="2" stroke-endcap="round" fill="none" d="M -8.6,5 L 0,0 L 8.6,5"></path><g transform="rotate(-30)"><circle r="100" fill="url(#gradient-radial-gray)" stroke="none"></circle><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87" style="stroke: rgb(140, 115, 115); fill: white;"></polygon><circle r="86" fill="url(#gradient-radial-gray)" stroke="none"></circle><!----><!----><!----><!----></g><g class="measurement"><path d="M 0,-100 l -125,0 M 0,100 l -125,0" class="axis" style="stroke: var(--heightColor);"></path><path transform="translate(-110.0,-100.0) rotate(90)" d="M 0 0 l 3 3 l 0 -1.5 l 97 0 l -0.44999999999999996 -1.5 l 0.44999999999999996 -1.5 l -97 0 l 0 -1.5 Z M 0 -15 l 0 30" style="stroke: var(--heightColor); fill: var(--heightColor);"></path><path transform="translate(-110.0,100.0) rotate(-90)" d="M 0 0 l 3 3 l 0 -1.5 l 97 0 l -0.44999999999999996 -1.5 l 0.44999999999999996 -1.5 l -97 0 l 0 -1.5 Z M 0 -15 l 0 30" style="stroke: var(--heightColor); fill: var(--heightColor);"></path><text y="-118" text-anchor="middle" transform="rotate(-90)" style="font-size: 12px;">height = 2 ✕ size</text></g><g class="measurement"><path d="M -86.60254037844386,0 l 0,125 M 86.60254037844386,0 l 0,125" class="axis" style="stroke: var(--widthColor);"></path><path transform="translate(-86.6,110.0) rotate(0)" d="M 0 0 l 3 3 l 0 -1.5 l 83.60254037844386 0 l -0.44999999999999996 -1.5 l 0.44999999999999996 -1.5 l -83.60254037844386 0 l 0 -1.5 Z M 0 -15 l 0 30" style="stroke: var(--widthColor); fill: var(--widthColor);"></path><path transform="translate(86.6,110.0) rotate(180)" d="M 0 0 l 3 3 l 0 -1.5 l 83.60254037844386 0 l -0.44999999999999996 -1.5 l 0.44999999999999996 -1.5 l -83.60254037844386 0 l 0 -1.5 Z M 0 -15 l 0 30" style="stroke: var(--widthColor); fill: var(--widthColor);"></path><text y="126" text-anchor="middle" transform="rotate(0)" style="font-size: 12px;">width = √3 ✕ size</text></g><g transform="rotate(-90)"><g fill="white" stroke-width="1.5" style="stroke: var(--circumradiusColor);"><path d="M 0,0 l 100,0" stroke-width="2.5"></path><circle cx="100" r="2"></circle></g><g fill="black" text-anchor="middle"><text x="42" y="-3" style="font-size: 12px;">size</text></g></g><g transform="rotate(360)"><g fill="white" stroke-width="1.5" style="stroke: var(--inradiusColor);"><path d="M 0,0 l 87,0" stroke-width="2.5"></path><circle cx="87" r="2"></circle></g><g fill="black" text-anchor="middle"><text x="45" y="12" style="font-size: 12px;"></text></g></g><circle r="5" class="marker" transform="scale(0.5)" style="fill: black;"></circle></svg></figure></div> <p>The size of a regular hexagon can be described by either the <dfn>inner circle</dfn>, touching the edges, or the <dfn>outer circle</dfn>, touching the corners. On this page, I call the outer radius "<b><code>size</code>"</b>. The <dfn>width</dfn> and <dfn>height</dfn> are defined in terms of the diameters of the two circles.</p></div><script type="x-template" id="template-diagram-sizes"><div id="diagram-sizes" class="float-container">
<p>Hexagons are any 6-sided polygons. <em>Regular</em> hexagons have all the sides the same length. I'll assume all the hexagons we're working with here are regular.</p>
<div class="float-right"><figure v-for="layout in layouts" style="display:inline-block;margin:0;width:20em;max-width:48%" v-bind:style="styleColors(layout)"><svg viewBox="-140 -125 250 255"><defs><radialGradient id="gradient-radial-gray"><stop offset="0%" stop-color="hsl(0,10%,95%)"></stop><stop offset="98%" stop-color="hsl(0,10%,97%)"></stop><stop offset="100%" stop-color="hsl(0,30%,93%)"></stop></radialGradient></defs><!-- title --><text y="-110" style="font-size:14px">{{layout.title}}</text><path transform="translate(-85,-120)" stroke="hsl(0,50%,50%)" stroke-width="2" stroke-endcap="round" fill="none" v-bind:d="layout.name === 'pointy'? 'M -8.6,5 L 0,0 L 8.6,5' : 'M -7.5,5.7 L -5,1.4 L 5,1.4 L 7.5,5.7'"></path><!-- hexagon with inner/outer circles --><g v-bind:transform="`rotate(${layout.rotation})`"><circle r="100" fill="url(#gradient-radial-gray)" stroke="none"></circle><a-hex style="stroke:hsl(0,10%,50%);fill:white"></a-hex><circle r="86" fill="url(#gradient-radial-gray)" stroke="none"></circle><circle v-if="show === 'circumradius'" r="100" fill="none" v-bind:stroke="colors.red" stroke-width="2"></circle><circle v-if="(show === 'height' &amp;&amp; layout.name === 'pointy') || (show === 'width' &amp;&amp; layout.name === 'flat')" r="100" fill="none" v-bind:stroke="colors.dark"></circle><circle v-if="show === 'inradius'" r="87" fill="none" v-bind:stroke="colors.red" stroke-width="2"></circle><circle v-if="(show === 'height' &amp;&amp; layout.name === 'flat') || (show === 'width' &amp;&amp; layout.name === 'pointy')" r="87" fill="none" v-bind:stroke="colors.dark"></circle></g><!-- height --><g class="measurement"><path class="axis" v-bind:d="`M 0,${-layout.height} l -125,0 M 0,${layout.height} l -125,0`" style="stroke:var(--heightColor)"></path><a-arrow v-bind:w="1.5" v-bind:skip="0" v-bind:A="{x:-110,y:0}" v-bind:b="{x:-110,y:-layout.height}" v-bind:withHead="true" style="stroke:var(--heightColor);fill:var(--heightColor)"></a-arrow><a-arrow v-bind:w="1.5" v-bind:skip="0" v-bind:A="{x:-110,y:0}" v-bind:b="{x:-110,y:layout.height}" v-bind:withHead="true" style="stroke:var(--heightColor);fill:var(--heightColor)"></a-arrow><text y="-118" text-anchor="middle" transform="rotate(-90)" style="font-size: 12px">{{heightLabel(layout)}}</text></g><!-- width --><g class="measurement"><path class="axis" v-bind:d="`M ${-layout.width},0 l 0,125 M ${layout.width},0 l 0,125`" style="stroke:var(--widthColor)"></path><a-arrow v-bind:w="1.5" v-bind:skip="0" v-bind:A="{x:0,y:110}" v-bind:b="{x:-layout.width,y:110}" v-bind:withHead="true" style="stroke:var(--widthColor);fill:var(--widthColor)"></a-arrow><a-arrow v-bind:w="1.5" v-bind:skip="0" v-bind:A="{x:0,y:110}" v-bind:b="{x:layout.width,y:110}" v-bind:withHead="true" style="stroke:var(--widthColor);fill:var(--widthColor)"></a-arrow><text y="126" text-anchor="middle" transform="rotate(0)" style="font-size: 12px">{{widthLabel(layout)}}</text></g><!-- circumradius --><g v-bind:transform="`rotate(${3*layout.rotation})`"><g fill="white" style="stroke:var(--circumradiusColor)" v-bind:stroke-width="1.5"><path d="M 0,0 l 100,0" v-bind:stroke-width="2.5"></path><circle cx="100" r="2"></circle></g><g fill="black" text-anchor="middle"><text x="42" v-bind:y="layout.name === 'flat'? 12 : -3" style="font-size:12px">{{show === 'circumradius'? show : "size"}}</text></g></g><!-- inradius --><g v-bind:transform="`rotate(${270-3*layout.rotation})`"><g fill="white" style="stroke:var(--inradiusColor)" v-bind:stroke-width="1.5"><path d="M 0,0 l 87,0" v-bind:stroke-width="2.5"></path><circle cx="87" r="2"></circle></g><g fill="black" text-anchor="middle"><text x="45" v-bind:y="layout.name === 'pointy'? 12 : -3" style="font-size:12px">{{show === 'inradius'? show : ""}}</text></g></g><!-- center --><a-circle-marker transform="scale(0.5)" style="fill:black"></a-circle-marker></svg></figure></div>
<p>The size of a regular hexagon can be described by either the <hover-show show="inradius">inner circle</hover-show>, touching the edges, or the <hover-show show="circumradius">outer circle</hover-show>, touching the corners. On this page, I call the outer radius "<b><code>size</code>"</b>. The <hover-show show="width">width</hover-show> and <hover-show show="height">height</hover-show> are defined in terms of the diameters of the two circles.</p>
</div></script><h3 id="spacing">
<span>Spacing</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#spacing">#</a>
</h3>
<div id="diagram-spacing" class="float-container"><div id="size-and-spacing"><p>Next we want to put several hexagons together. The spacing will depend on both the outer circle's radius (<code>size</code>) and the inner circle's radius (<code>inradius</code>).</p></div> <figure class="float-right"><svg viewBox="-300 -300 575 425"><g fill="white" stroke="black" class=" rotate-pointy"><g transform="translate(-150,-87)"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g><g transform="translate(0,-173)"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g><g transform="translate(150,-87)"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g><g transform="translate(0,0)"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g><line x1="-259.8076211353316" y1="-275" x2="-259.8076211353316" y2="100" stroke-opacity="1" class="axis"></line><line x1="-216.50635094610965" y1="-275" x2="-216.50635094610965" y2="100" stroke-opacity="0" class="axis"></line><line x1="-173.20508075688772" y1="-275" x2="-173.20508075688772" y2="100" stroke-opacity="1" class="axis"></line><line x1="-129.9038105676658" y1="-275" x2="-129.9038105676658" y2="100" stroke-opacity="0" class="axis"></line><line x1="-86.60254037844386" y1="-275" x2="-86.60254037844386" y2="100" stroke-opacity="1" class="axis"></line><line x1="-43.30127018922193" y1="-275" x2="-43.30127018922193" y2="100" stroke-opacity="0" class="axis"></line><line x1="0" y1="-275" x2="0" y2="100" stroke-opacity="1" class="axis"></line><line x1="43.30127018922193" y1="-275" x2="43.30127018922193" y2="100" stroke-opacity="0" class="axis"></line><line x1="86.60254037844386" y1="-275" x2="86.60254037844386" y2="100" stroke-opacity="1" class="axis"></line><line x1="129.9038105676658" y1="-275" x2="129.9038105676658" y2="100" stroke-opacity="0" class="axis"></line><line x1="173.20508075688772" y1="-275" x2="173.20508075688772" y2="100" stroke-opacity="1" class="axis"></line><line x1="-281.45825622994255" y1="-250" x2="173.20508075688772" y2="-250" stroke-opacity="1" class="axis"></line><line x1="-281.45825622994255" y1="-200" x2="173.20508075688772" y2="-200" stroke-opacity="1" class="axis"></line><line x1="-281.45825622994255" y1="-150" x2="173.20508075688772" y2="-150" stroke-opacity="1" class="axis"></line><line x1="-281.45825622994255" y1="-100" x2="173.20508075688772" y2="-100" stroke-opacity="1" class="axis"></line><line x1="-281.45825622994255" y1="-50" x2="173.20508075688772" y2="-50" stroke-opacity="1" class="axis"></line><line x1="-281.45825622994255" y1="0" x2="173.20508075688772" y2="0" stroke-opacity="1" class="axis"></line><line x1="-281.45825622994255" y1="50" x2="173.20508075688772" y2="50" stroke-opacity="1" class="axis"></line><line x1="-281.45825622994255" y1="100" x2="173.20508075688772" y2="100" stroke-opacity="1" class="axis"></line><line x1="-281.45825622994255" y1="150" x2="173.20508075688772" y2="150" stroke-opacity="0" class="axis"></line></g><g><text dy="0.4em" fill-opacity="1" x="-259.8076211353316" y="-275" style="font-size: 15px;">0w</text><text dy="0.4em" fill-opacity="0" x="-216.50635094610965" y="-275" style="font-size: 15px;">¼w</text><text dy="0.4em" fill-opacity="1" x="-173.20508075688772" y="-275" style="font-size: 15px;">½w</text><text dy="0.4em" fill-opacity="0" x="-129.9038105676658" y="-275" style="font-size: 15px;">¾w</text><text dy="0.4em" fill-opacity="1" x="-86.60254037844386" y="-275" style="font-size: 15px;">1w</text><text dy="0.4em" fill-opacity="0" x="-43.30127018922193" y="-275" style="font-size: 15px;">1¼w</text><text dy="0.4em" fill-opacity="1" x="0" y="-275" style="font-size: 15px;">1½w</text><text dy="0.4em" fill-opacity="0" x="43.30127018922193" y="-275" style="font-size: 15px;">1¾w</text><text dy="0.4em" fill-opacity="1" x="86.60254037844386" y="-275" style="font-size: 15px;">2w</text><text dy="0.4em" fill-opacity="0" x="129.9038105676658" y="-275" style="font-size: 15px;">2¼w</text><text dy="0.4em" fill-opacity="1" x="173.20508075688772" y="-275" style="font-size: 15px;">2½w</text><text dy="0.4em" fill-opacity="1" x="-281.45825622994255" y="-250" style="font-size: 15px;">0h</text><text dy="0.4em" fill-opacity="1" x="-281.45825622994255" y="-200" style="font-size: 15px;">¼h</text><text dy="0.4em" fill-opacity="1" x="-281.45825622994255" y="-150" style="font-size: 15px;">½h</text><text dy="0.4em" fill-opacity="1" x="-281.45825622994255" y="-100" style="font-size: 15px;">¾h</text><text dy="0.4em" fill-opacity="1" x="-281.45825622994255" y="-50" style="font-size: 15px;">1h</text><text dy="0.4em" fill-opacity="1" x="-281.45825622994255" y="0" style="font-size: 15px;">1¼h</text><text dy="0.4em" fill-opacity="1" x="-281.45825622994255" y="50" style="font-size: 15px;">1½h</text><text dy="0.4em" fill-opacity="1" x="-281.45825622994255" y="100" style="font-size: 15px;">1¾h</text><text dy="0.4em" fill-opacity="0" x="-281.45825622994255" y="150" style="font-size: 15px;">2h</text></g><g class=" rotate-pointy"><g class="centers"><circle r="5" class="marker" transform="translate(-150,-87)"></circle><circle r="5" class="marker" transform="translate(0,-173)"></circle><circle r="5" class="marker" transform="translate(150,-87)"></circle><circle r="5" class="marker" transform="translate(0,0)"></circle></g><g class="corners"><circle r="5" class="marker" transform="translate(-50,-87)scale(0.5)"></circle><circle r="5" class="marker" transform="translate(50,-87)scale(0.5)"></circle><circle r="5" class="marker" transform="translate(-250,-87)scale(0.5)"></circle><circle r="5" class="marker" transform="translate(250,-87)scale(0.5)"></circle><circle r="5" class="marker" transform="translate(-100,-173)scale(0.5)"></circle><circle r="5" class="marker" transform="translate(100,-173)scale(0.5)"></circle><circle r="5" class="marker" transform="translate(-200,-173)scale(0.5)"></circle><circle r="5" class="marker" transform="translate(200,-173)scale(0.5)"></circle><circle r="5" class="marker" transform="translate(-50,-260)scale(0.5)"></circle><circle r="5" class="marker" transform="translate(50,-260)scale(0.5)"></circle><circle r="5" class="marker" transform="translate(-50,87)scale(0.5)"></circle><circle r="5" class="marker" transform="translate(50,87)scale(0.5)"></circle><circle r="5" class="marker" transform="translate(-200,0)scale(0.5)"></circle><circle r="5" class="marker" transform="translate(200,0)scale(0.5)"></circle><circle r="5" class="marker" transform="translate(-100,0)scale(0.5)"></circle><circle r="5" class="marker" transform="translate(100,0)scale(0.5)"></circle></g></g><g class="spacing"><g class="measurement"><path transform="translate(-173.2,25.0) rotate(0)" d="M 0 0 l 6 6 l 0 -3 l 80.60254037844386 0 l -0.8999999999999999 -3 l 0.8999999999999999 -3 l -80.60254037844386 0 l 0 -3 Z M 0 -30 l 0 60"></path> <path transform="translate(0.0,25.0) rotate(180)" d="M 0 0 l 6 6 l 0 -3 l 80.60254037844386 0 l -0.8999999999999999 -3 l 0.8999999999999999 -3 l -80.60254037844386 0 l 0 -3 Z M 0 -30 l 0 60"></path> <text dy="0.5em" transform="translate(-87,25) rotate(0) translate(0,8)">horizontal spacing</text></g><g class="measurement"><path transform="translate(129.9,0.0) rotate(-90)" d="M 0 0 l 6 6 l 0 -3 l 69 0 l -0.8999999999999999 -3 l 0.8999999999999999 -3 l -69 0 l 0 -3 Z M 0 -30 l 0 60"></path> <path transform="translate(129.9,-150.0) rotate(90)" d="M 0 0 l 6 6 l 0 -3 l 69 0 l -0.8999999999999999 -3 l 0.8999999999999999 -3 l -69 0 l 0 -3 Z M 0 -30 l 0 60"></path> <text dy="0.5em" transform="translate(130,-75) rotate(-90) translate(0,8)">vertical spacing</text></g></g><g transform="translate(275,125) scale(0.4)"><g transform="translate(-175,-50) scale(0.5)" class="toggle-orientation"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em">flat</text></g> <g transform="translate(-75,-50) rotate(-30) scale(0.5)" class="toggle-orientation selected"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em" transform="rotate(30)">pointy</text></g></g></svg></figure><div><p>In the <button class="">flat top</button> orientation, the horizontal distance between adjacent hexagons centers is <code><b>horiz</b> = 3/4 * width = 3/2 * size</code>. The vertical distance is <code><b>vert</b> = height = sqrt(3) * size = 2 * inradius</code>.</p> <p>In the <button class="highlight">pointy top</button> orientation, the horizontal distance between adjacent hexagon centers is <code><b>horiz</b> = width == sqrt(3) * size == 2 * inradius</code>. The vertical distance is <code><b>vert</b> = 3/4 * height == 3/2 * size</code>.</p> <p>Some games use pixel art for hexagons that does not match an exactly regular polygon, and these formulas will have to be adjusted slightly. We'll do that in the <a href="https://www.redblobgames.com/grids/hexagons/#hex-to-pixel">hex to pixel</a> and <a href="https://www.redblobgames.com/grids/hexagons/#pixel-to-hex">pixel to hex</a> functions.</p></div></div><script type="x-template" id="template-diagram-spacing"><div id="diagram-spacing" class="float-container">
<!-- legacy id: size-and-spacing --><div id="size-and-spacing"><p>Next we want to put several hexagons together. The spacing will depend on both the outer circle's radius (<code>size</code>) and the inner circle's radius (<code>inradius</code>).</p></div>
<figure class="float-right"><svg viewBox="-300 -300 575 425"><g v-bind:class="$root.rotateClass" fill="white" stroke="black"><g v-for="hex in hexes" v-bind:transform="center(hex).transform"><a-hex></a-hex></g></g><g><line v-for="(line,index) in lines" v-bind:key="index" class="axis" v-bind:x1="line.x1" v-bind:y1="line.y1" v-bind:x2="line.x2" v-bind:y2="line.y2" v-bind:stroke-opacity="line.opacity"></line></g><g><text v-for="(line,index) in lines" v-bind:key="index" style="font-size:15px" dy="0.4em" v-bind:fill-opacity="line.opacity*line.opacity" v-bind:x="line.x1" v-bind:y="line.y1">{{line.label}}</text></g><g v-bind:class="$root.rotateClass"><g class="centers"><a-circle-marker v-for="(hex, index) in hexes" v-bind:key="index" v-bind:transform="center(hex).transform"></a-circle-marker></g><g class="corners"><a-circle-marker v-for="(hex, index) in corners" v-bind:key="index" v-bind:transform="center(hex).transform + 'scale(0.5)'"></a-circle-marker></g></g><g class="spacing"><a-measurement label="horizontal spacing" v-bind:awf="-3" v-bind:ahf="1" v-bind:bwf="0" v-bind:bhf="1" v-bind:awp="-4" v-bind:ahp="0.5" v-bind:bwp="0" v-bind:bhp="0.5"></a-measurement><a-measurement label="vertical spacing" v-bind:awf="3.5" v-bind:ahf="0" v-bind:bwf="3.5" v-bind:bhf="-4" v-bind:awp="3" v-bind:ahp="0" v-bind:bwp="3" v-bind:bhp="-3"></a-measurement></g><a-toggle-orientation transform="translate(275,125) scale(0.4)"></a-toggle-orientation></svg></figure><div>
<p>In the <button v-bind:class="{highlight: orientation.layout === 'flat'}" v-on:click="orientation.layout = 'flat'">flat top</button> orientation, the horizontal distance between adjacent hexagons centers is <code><b>horiz</b> = 3/4 * width = 3/2 * size</code>. The vertical distance is <code><b>vert</b> = height = sqrt(3) * size = 2 * inradius</code>.</p>
<p>In the <button v-bind:class="{highlight: orientation.layout === 'pointy'}" v-on:click="orientation.layout = 'pointy'">pointy top</button> orientation, the horizontal distance between adjacent hexagon centers is <code><b>horiz</b> = width == sqrt(3) * size == 2 * inradius</code>. The vertical distance is <code><b>vert</b> = 3/4 * height == 3/2 * size</code>.</p>
<p>Some games use pixel art for hexagons that does not match an exactly regular polygon, and these formulas will have to be adjusted slightly. We'll do that in the <a href="#hex-to-pixel">hex to pixel</a> and <a href="#pixel-to-hex">pixel to hex</a> functions.</p>
</div>
</div></script><h3 id="angles">
<span>Angles</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#angles">#</a>
</h3>
<div id="diagram-angles" class="float-container"><div><p>In a regular hexagon the interior angles are 120°. There are six “wedges”, each an equilateral triangle with 60° angles inside. Each corner is <code>size</code> units away from the <code>center</code>. In code:</p> <pre class="code">function pointy_hex_corner(center, size, i):
    var angle_deg = 60 * i - 30°
    var angle_rad = PI / 180 * angle_deg
    return Point(center.x + size * cos(angle_rad),
                 center.y + size * sin(angle_rad))</pre></div> <figure class="float-right"><svg viewBox="-130 -120 255 245" style="max-width: 19.1rem;"><circle r="100" class="axis"></circle><g style="transform: rotate(0deg) translate(112px, 0px) rotate(0deg);"><text dy="0.4em" style="font-size: 10px;">0°</text></g><g style="transform: rotate(30deg) translate(112px, 0px) rotate(-30deg);"><text dy="0.4em" style="font-size: 10px;">30°</text></g><g style="transform: rotate(60deg) translate(112px, 0px) rotate(-60deg);"><text dy="0.4em" style="font-size: 10px;">60°</text></g><g style="transform: rotate(90deg) translate(112px, 0px) rotate(-90deg);"><text dy="0.4em" style="font-size: 10px;">90°</text></g><g style="transform: rotate(120deg) translate(112px, 0px) rotate(-120deg);"><text dy="0.4em" style="font-size: 10px;">120°</text></g><g style="transform: rotate(150deg) translate(112px, 0px) rotate(-150deg);"><text dy="0.4em" style="font-size: 10px;">150°</text></g><g style="transform: rotate(180deg) translate(112px, 0px) rotate(-180deg);"><text dy="0.4em" style="font-size: 10px;">180°</text></g><g style="transform: rotate(210deg) translate(112px, 0px) rotate(-210deg);"><text dy="0.4em" style="font-size: 10px;">210°</text></g><g style="transform: rotate(240deg) translate(112px, 0px) rotate(-240deg);"><text dy="0.4em" style="font-size: 10px;">240°</text></g><g style="transform: rotate(270deg) translate(112px, 0px) rotate(-270deg);"><text dy="0.4em" style="font-size: 10px;">270°</text></g><g style="transform: rotate(300deg) translate(112px, 0px) rotate(-300deg);"><text dy="0.4em" style="font-size: 10px;">300°</text></g><g style="transform: rotate(330deg) translate(112px, 0px) rotate(-330deg);"><text dy="0.4em" style="font-size: 10px;">330°</text></g><g fill="white" stroke="black" class=" rotate-pointy"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><path d="M -20 -87 A 30 30 0 0 1 -65 -61" class="axis"></path><path d="M 50 87 L 0 0 L 100 0" class="axis" style="fill: rgb(236, 236, 223);"></path><g transform="translate(85,8)"><text dy="0.4em" class="unrotate" style="font-size: 10px;">60°</text></g><g transform="translate(52,65)"><text dy="0.4em" class="unrotate" style="font-size: 10px;">60°</text></g><g transform="translate(18,8)"><text dy="0.4em" class="unrotate" style="font-size: 10px;">60°</text></g><g transform="translate(-42,-75)"><text dy="0.4em" class="unrotate" style="font-size: 10px;">120°</text></g><g class="corners" style="transform: rotate(0deg) translate(100px, 0px) rotate(0deg);"><circle r="5" class="marker" transform="scale(0.5)"></circle></g><g class="corners" style="transform: rotate(60deg) translate(100px, 0px) rotate(-60deg);"><circle r="5" class="marker" transform="scale(0.5)"></circle></g><g class="corners" style="transform: rotate(120deg) translate(100px, 0px) rotate(-120deg);"><circle r="5" class="marker" transform="scale(0.5)"></circle></g><g class="corners" style="transform: rotate(180deg) translate(100px, 0px) rotate(-180deg);"><circle r="5" class="marker" transform="scale(0.5)"></circle></g><g class="corners" style="transform: rotate(240deg) translate(100px, 0px) rotate(-240deg);"><circle r="5" class="marker" transform="scale(0.5)"></circle></g><g class="corners" style="transform: rotate(300deg) translate(100px, 0px) rotate(-300deg);"><circle r="5" class="marker" transform="scale(0.5)"></circle></g></g><g transform="translate(105,115) scale(0.2)"><g transform="translate(-175,-50) scale(0.5)" class="toggle-orientation"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em">flat</text></g> <g transform="translate(-75,-50) rotate(-30) scale(0.5)" class="toggle-orientation selected"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em" transform="rotate(30)">pointy</text></g></g></svg></figure><div><p>To fill a hexagon, gather the polygon vertices at <code>hex_corner(…, 0)</code> through <code>hex_corner(…, 5)</code>. To draw a hexagon outline, use those vertices, and then draw a line back to <code>hex_corner(…, 0)</code>.</p> <p>The difference between the two orientations is a rotation, and that causes the angles to change: <button class="">flat top</button> angles are 0°, 60°, 120°, 180°, 240°, 300° and <button class="highlight">pointy top</button> angles are 30°, 90°, 150°, 210°, 270°, 330°. Note that the diagrams on this page use the y axis pointing <em>down</em> (angles increase clockwise); you may have to make some adjustments if your y axis points up (angles increase counterclockwise).</p></div></div><script type="x-template" id="template-diagram-angles"><div id="diagram-angles" class="float-container">
<div>
<p>In a regular hexagon the interior angles are 120°. There are six “wedges”, each an equilateral triangle with 60° angles inside. Each corner is <code>size</code> units away from the <code>center</code>. In code:</p>
<pre class="code">function {{orientation.layout}}_hex_corner(center, size, i):
    var angle_deg = 60 * i{{angleAdjust}}
    var angle_rad = PI / 180 * angle_deg
    return Point(center.x + size * cos(angle_rad),
                 center.y + size * sin(angle_rad))</pre>
</div>
<figure class="float-right"><svg viewBox="-130 -120 255 245" style="max-width:19.1rem"><circle class="axis" r="100"></circle><g v-for="(corner, index) in cornerLabels" v-bind:key="'label'+index" v-bind:style="corner.style"><text dy="0.4em" style="font-size:10px">{{ corner.angle }}°</text></g><g v-bind:class="$root.rotateClass" fill="white" stroke="black"><a-hex></a-hex><path class="axis" v-bind:d="arcPath"></path><path class="axis" v-bind:d="dashedPath" style="fill: hsl(60,25%,90%)"></path><g transform="translate(85,8)"><a-text style="font-size:10px">60°</a-text></g><g transform="translate(52,65)"><a-text style="font-size:10px">60°</a-text></g><g transform="translate(18,8)"><a-text style="font-size:10px">60°</a-text></g><g transform="translate(-42,-75)"><a-text style="font-size:10px">120°</a-text></g><g v-for="(corner, index) in cornerMarkers" v-bind:key="'marker'+index" class="corners" v-bind:style="corner.style"><a-circle-marker transform="scale(0.5)"></a-circle-marker></g></g><a-toggle-orientation transform="translate(105,115) scale(0.2)"></a-toggle-orientation></svg></figure><div>
<p>To fill a hexagon, gather the polygon vertices at <code>hex_corner(…, 0)</code> through <code>hex_corner(…, 5)</code>. To draw a hexagon outline, use those vertices, and then draw a line back to <code>hex_corner(…, 0)</code>.</p>
<p>The difference between the two orientations is a rotation, and that causes the angles to change: <button v-bind:class="{highlight: orientation.layout === 'flat'}" v-on:click="orientation.layout = 'flat'">flat top</button> angles are 0°, 60°, 120°, 180°, 240°, 300° and <button v-bind:class="{highlight: orientation.layout === 'pointy'}" v-on:click="orientation.layout = 'pointy'">pointy top</button> angles are 30°, 90°, 150°, 210°, 270°, 330°. Note that the diagrams on this page use the y axis pointing <em>down</em> (angles increase clockwise); you may have to make some adjustments if your y axis points up (angles increase counterclockwise).</p>
</div>
</div></script></section><section><h2 id="coordinates">
<span><a href="https://www.redblobgames.com/grids/hexagons/#coordinates">Coordinate Systems</a></span><a class="anchor" href="https://www.redblobgames.com/grids/hexagons/#coordinates">#</a>
</h2>
<p>Now let's assemble hexagons into a grid. With square grids, there's one obvious way to do it. With hexagons, there are multiple approaches. I like cube coordinates for algorithms and axial or doubled for storage.</p>
<h3 id="coordinates-offset">
<span>Offset coordinates</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#coordinates-offset">#</a>
</h3>
<p>The most common approach is to offset every other column or row. Columns are named <code>col</code> (<code class="q">q</code>). Rows are named <code>row</code> (<code class="r">r</code>). You can either offset the odd or the even column/rows, so the horizontal and vertical hexagons each have two variants.</p>
<div class="wide-container">
<figure id="diagram-grid-offset-odd-r" class="offset-diagram"><svg viewBox="-106.60254037844388 -120 1339.038105676658 1140"><g fill="white" stroke="black" class=" rotate-pointy"><g class="grid"><g transform="translate(0,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(0,173)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(-150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(-150,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(-300,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(-300,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(-450,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">6</tspan></text></g></g><g transform="translate(150,87)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(150,260)"><g class="highlight q-axis-same r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(0,346)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(0,520)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(-150,606)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(-150,779)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(-300,866)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">6</tspan></text></g></g><g transform="translate(300,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(300,346)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(150,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(150,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(0,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(0,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(-150,953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">6</tspan></text></g></g><g transform="translate(450,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(450,433)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(300,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(300,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(150,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(150,953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(0,1039)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">6</tspan></text></g></g><g transform="translate(600,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(600,520)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(450,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(450,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(300,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(300,1039)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(150,1126)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">6</tspan></text></g></g><g transform="translate(750,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(750,606)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(600,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(600,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(450,953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(450,1126)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(300,1212)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">6</tspan></text></g></g><g transform="translate(900,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(900,693)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(750,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(750,953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(600,1039)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(600,1212)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(450,1299)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">6</tspan></text></g></g></g></g> <!----> <!----></svg><figcaption>“odd-r” horizontal layout<br>shoves odd rows right</figcaption></figure><figure id="diagram-grid-offset-even-r" class="offset-diagram"><svg viewBox="-193.2050807568878 -120 1339.038105676658 1140"><g fill="white" stroke="black" class=" rotate-pointy"><g class="grid"><g transform="translate(0,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(-150,87)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(-150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(-300,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(-300,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(-450,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(-450,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">6</tspan></text></g></g><g transform="translate(150,87)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(0,173)"><g class="highlight q-axis-same r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(0,346)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(-150,433)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(-150,606)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(-300,693)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(-300,866)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">6</tspan></text></g></g><g transform="translate(300,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(150,260)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(150,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(0,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(0,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(-150,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(-150,953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">6</tspan></text></g></g><g transform="translate(450,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(300,346)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(300,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(150,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(150,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(0,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(0,1039)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">6</tspan></text></g></g><g transform="translate(600,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(450,433)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(450,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(300,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(300,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(150,953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(150,1126)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">6</tspan></text></g></g><g transform="translate(750,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(600,520)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(600,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(450,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(450,953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(300,1039)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(300,1212)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">6</tspan></text></g></g><g transform="translate(900,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(750,606)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(750,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(600,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(600,1039)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(450,1126)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(450,1299)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">6</tspan></text></g></g></g></g> <!----> <!----></svg><figcaption>“even-r” horizontal layout<br>shoves even rows right</figcaption></figure><figure id="diagram-grid-offset-odd-q" class="offset-diagram"><svg viewBox="-120 -106.60254037844388 1290 1165.8330249197702"><g fill="white" stroke="black" class=" rotate-flat"><g class="grid"><g transform="translate(0,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(0,173)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(0,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(0,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(0,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(0,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(150,87)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(150,260)"><g class="highlight q-axis-same r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(150,433)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(150,606)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(150,779)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(150,953)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(300,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(300,173)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(300,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(300,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(300,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(300,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(450,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(450,260)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(450,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(450,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(450,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(450,953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(600,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(600,173)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(600,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(600,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(600,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(600,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(750,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(750,260)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(750,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(750,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(750,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(750,953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(900,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(900,173)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(900,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(900,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(900,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(900,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(1050,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">7</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(1050,260)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">7</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(1050,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">7</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(1050,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">7</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(1050,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">7</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(1050,953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">7</tspan>, <tspan class="r-coord">5</tspan></text></g></g></g></g> <!----> <!----></svg><figcaption>“odd-q” vertical layout<br>shoves odd columns down</figcaption></figure><figure id="diagram-grid-offset-even-q" class="offset-diagram"><svg viewBox="-120 -193.2050807568878 1290 1165.8330249197702"><g fill="white" stroke="black" class=" rotate-flat"><g class="grid"><g transform="translate(0,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(0,173)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(0,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(0,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(0,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(0,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(150,-87)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(150,87)"><g class="highlight q-axis-same r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(150,260)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(150,433)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(150,606)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(150,779)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(300,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(300,173)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(300,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(300,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(300,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(300,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(450,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(450,87)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(450,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(450,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(450,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(450,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(600,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(600,173)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(600,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(600,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(600,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(600,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(750,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(750,87)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(750,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(750,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(750,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(750,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(900,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(900,173)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(900,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(900,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(900,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(900,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(1050,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">7</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(1050,87)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">7</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(1050,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">7</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(1050,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">7</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(1050,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">7</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(1050,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">7</tspan>, <tspan class="r-coord">5</tspan></text></g></g></g></g> <!----> <!----></svg><figcaption>“even-q” vertical layout<br>shoves even columns down</figcaption></figure>
</div>
<script type="x-template" id="template-diagram-grid-offset"><figure v-bind:id="id" class="offset-diagram"><a-svg><a-grid v-bind:hexes="grid" v-bind:setHighlight="setHighlight"><g slot-scope="props" v-bind:class="className(props.hex)"><a-hex></a-hex><a-text><tspan class="q-coord">{{props.hex.col}}</tspan>, <tspan class="r-coord">{{props.hex.row}}</tspan></a-text></g></a-grid></a-svg><figcaption v-html="caption"></figcaption></figure></script><h3 id="coordinates-cube">
<span>Cube coordinates</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#coordinates-cube">#</a>
</h3>
<div class="float-container">
<div>
<p>Another way to look at hexagonal grids is to see that there are <em>three</em> primary axes, unlike the <em>two</em> we have for square grids. There's an elegant symmetry with these.</p>
<p>Let's take a cube grid and <strong>slice</strong> out a diagonal plane at <code style="white-space: nowrap"><span class="q">x</span> + <span class="s">y</span> + <span class="r">z</span> = 0</code>. This is a <em>weird</em> idea but it helps us with hex grid algorithms:</p>
<ol>
<li>3D cartesian coordinates follow standard vector operations: we can add/subtract coordinates, multiply/divide by a scalar, etc. We can reuse these operations with hexagonal grids. Offset coordinates do not support these operations.</li>
<li>3D cartesian coordinates have existing algorithms like distances, rotation, reflection, line drawing, conversion to/from screen coordinates, etc. We can adapt these algorithms to work on hexagonal grids.</li>
</ol>
</div>
<figure id="diagram-cube-to-hex" class="float-right" style="margin-bottom: 1em;"><svg viewBox="-420 -430 840 880" style="max-width: 23.4rem; overflow: visible; contain: layout;"><g><line x2="2.7554552980815446e-14" y2="450" class="r"></line><text dy="0.4em" x="-35.98147263289568" y="428.4919294772869" class="r">+z</text></g><g><line x2="-389.7114317029974" y2="224.99999999999997" class="q"></line><text dy="0.4em" x="-389.0756325603883" y="183.08509537298133" class="q">-x</text></g><g><line x2="-389.71143170299734" y2="-225.00000000000006" class="s"></line><text dy="0.4em" x="-353.0941599274928" y="-245.40683410430557" class="s">+y</text></g><g><line x2="-8.266365894244634e-14" y2="-450" class="r"></line><text dy="0.4em" x="35.98147263289563" y="-428.4919294772869" class="r">-z</text></g><g><line x2="389.7114317029973" y2="-225.0000000000002" class="q"></line><text dy="0.4em" x="389.07563256038844" y="-183.08509537298104" class="q">+x</text></g><g><line x2="389.7114317029976" y2="224.9999999999997" class="s"></line><text dy="0.4em" x="353.0941599274927" y="245.4068341043057" class="s">-y</text></g><g transform="translate(0, -300)" fill="white" stroke="black"><polygon points="87,50 87,-50 0,-100 -87,-50 -87,50 -0,100"></polygon></g><g transform="translate(86.60254037844386, -150)" fill="white" stroke="black"><polygon points="87,50 87,-50 0,-100 -87,-50 -87,50 -0,100"></polygon></g><g transform="translate(173.20508075688772, 0)" fill="white" stroke="black"><polygon points="87,50 87,-50 0,-100 -87,-50 -87,50 -0,100"></polygon></g><g transform="translate(259.8076211353316, 150)" fill="white" stroke="black"><polygon points="87,50 87,-50 0,-100 -87,-50 -87,50 -0,100"></polygon></g><g transform="translate(-86.60254037844386, -150)" fill="white" stroke="black"><polygon points="87,50 87,-50 0,-100 -87,-50 -87,50 -0,100"></polygon></g><g transform="translate(0, 0)" fill="white" stroke="black"><polygon points="87,50 87,-50 0,-100 -87,-50 -87,50 -0,100"></polygon></g><g transform="translate(86.60254037844386, 150)" fill="white" stroke="black"><polygon points="87,50 87,-50 0,-100 -87,-50 -87,50 -0,100"></polygon></g><g transform="translate(-173.20508075688772, 0)" fill="white" stroke="black"><polygon points="87,50 87,-50 0,-100 -87,-50 -87,50 -0,100"></polygon></g><g transform="translate(-86.60254037844386, 150)" fill="white" stroke="black"><polygon points="87,50 87,-50 0,-100 -87,-50 -87,50 -0,100"></polygon></g><g transform="translate(-259.8076211353316, 150)" fill="white" stroke="black"><polygon points="87,50 87,-50 0,-100 -87,-50 -87,50 -0,100"></polygon></g><g transform="translate(0, -300)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(86.60254037844386, -150)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(86.60254037844386, -250)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(173.20508075688772, 0)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(173.20508075688772, -100)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(173.20508075688772, -200)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(259.8076211353316, 150)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(259.8076211353316, 50)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(259.8076211353316, -50)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(259.8076211353316, -150)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(-86.60254037844386, -150)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(-86.60254037844386, -250)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(0, 0)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(0, -100)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(0, -200)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(86.60254037844386, 150)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(86.60254037844386, 50)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(86.60254037844386, -50)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(86.60254037844386, -150)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(173.20508075688772, 200)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(173.20508075688772, 100)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(173.20508075688772, 0)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(173.20508075688772, -100)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(-173.20508075688772, 0)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(-173.20508075688772, -100)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(-173.20508075688772, -200)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(-86.60254037844386, 150)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(-86.60254037844386, 50)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(-86.60254037844386, -50)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(-86.60254037844386, -150)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(0, 200)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(0, 100)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(0, 0)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(0, -100)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(86.60254037844386, 250)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(86.60254037844386, 150)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(86.60254037844386, 50)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(86.60254037844386, -50)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(-259.8076211353316, 150)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(-259.8076211353316, 50)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(-259.8076211353316, -50)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(-259.8076211353316, -150)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(-173.20508075688772, 200)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(-173.20508075688772, 100)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(-173.20508075688772, 0)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(-173.20508075688772, -100)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(-86.60254037844386, 250)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(-86.60254037844386, 150)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(-86.60254037844386, 50)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(-86.60254037844386, -50)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(0, 300)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(0, 200)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(0, 100)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g><g transform="translate(0, 0)" fill-opacity="1" stroke-opacity="1" fill="white" stroke="black"><polygon points="0 0 87 -50 0 -100 -87 -50" class="top"></polygon><polygon points="0 0 -87 -50 -87 50 -0 100" class="left"></polygon><polygon points="0 0 -0 100 87 50 87 -50" class="right"></polygon></g></svg><br><button class="sans-serif">Switch to hexagons</button></figure><script type="x-template" id="template-diagram-cube-to-hex"><figure id="diagram-cube-to-hex" class="float-right" style="margin-bottom: 1em"><svg style="max-width:23.4rem;overflow:visible;contain:layout" viewBox="-420 -430 840 880"><g v-for="dir in 6" v-bind:key="'dir'+dir"><line v-bind:class="axis(dir).axis" v-bind:x2="axis(dir).x" v-bind:y2="axis(dir).y"></line><text dy="0.4em" v-bind:class="axis(dir).axis" v-bind:x="axis(dir).x2" v-bind:y="axis(dir).y2">{{axis(dir).label}}</text></g><g v-for="(cube, index) in cubes.filter(c =&gt; c.z === -3)" v-bind:key="'base'+index" v-bind:transform="position(cube)" fill="white" stroke="black"><polygon v-bind:points="hexagonPoints"></polygon></g><g v-for="(cube, index) in cubes" v-bind:key="index" v-bind:transform="position(cube)" v-bind:fill-opacity="opacity(cube)" v-bind:stroke-opacity="opacity(cube)" fill="white" stroke="black"><polygon class="top" v-bind:points="rhombusTop"></polygon><polygon class="left" v-bind:points="rhombusLeft"></polygon><polygon class="right" v-bind:points="rhombusRight"></polygon></g></svg><br><button class="sans-serif" v-on:click="phase = 1 - phase">{{['Switch to hexagons', 'Switch back to cubes'][phase]}}</button></figure></script>
</div>
<div id="diagram-grid-cube" class="float-container"><p>Study how the cube coordinates work on the hex grid. Selecting the hexes will highlight the cube coordinates corresponding to the three axes.</p> <figure class="float-right"><svg viewBox="-626.2177826491071 -626.2177826491071 1252.4355652982142 1252.4355652982142" style="max-width: 25.625rem;"><g fill="white" stroke="black" class=" rotate-pointy"><g class="grid"><g transform="translate(-450,-260)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(-450,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(-450,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-450,260)"><g class="s-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(-300,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(-300,-173)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(-300,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-300,173)"><g class="s-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(-300,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(-150,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(-150,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(-150,-87)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-150,87)"><g class="s-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(-150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(-150,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(0,-520)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(0,-346)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(0,-173)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(0,0)"><g class="origin highlight q-axis-same r-axis-same s-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">q</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">r</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">s</text></g></g></g></g><g transform="translate(0,173)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(0,346)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(0,520)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(150,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(150,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(150,-87)"><g class="s-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(150,87)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(150,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(300,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(300,-173)"><g class="s-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(300,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(300,173)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(300,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(450,-260)"><g class="s-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(450,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(450,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(450,260)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g></g></g> <g transform="translate(626.2177826491071,626.2177826491071) scale(1)"><g transform="translate(-175,-50) scale(0.5)" class="toggle-orientation"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em">flat</text></g> <g transform="translate(-75,-50) rotate(-30) scale(0.5)" class="toggle-orientation selected"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em" transform="rotate(30)">pointy</text></g></g> <g class="axes" style="transform: translate(-500px, 500px) scale(0.75);"><g class=" rotate-pointy"><g transform="translate(135,0)"><path transform="translate(-22.5,0.0) rotate(180)" d="M 0 0 l 20 20 l 0 -10 l 77.5 0 l -3 -10 l 3 -10 l -77.5 0 l 0 -10 Z" class="q"></path> <text dy="0.4em" class="unrotate">+q</text></g> <g transform="translate(-67.49999999999997,116.91342951089922)"><path transform="translate(11.2,-19.5) rotate(-60.00000000000001)" d="M 0 0 l 20 20 l 0 -10 l 77.49999999999999 0 l -3 -10 l 3 -10 l -77.49999999999999 0 l 0 -10 Z" class="r"></path> <text dy="0.4em" class="unrotate">+r</text></g> <g transform="translate(-67.50000000000006,-116.91342951089918)"><path transform="translate(11.3,19.5) rotate(59.99999999999997)" d="M 0 0 l 20 20 l 0 -10 l 77.5 0 l -3 -10 l 3 -10 l -77.5 0 l 0 -10 Z" class="s"></path> <text dy="0.4em" class="unrotate">+s</text></g> <g transform="translate(-135,1.6532731788489267e-14)"><path transform="translate(22.5,-0.0) rotate(-7.0167092985348775e-15)" d="M 0 0 l 20 20 l 0 -10 l 77.5 0 l -3 -10 l 3 -10 l -77.5 0 l 0 -10 Z" class="q"></path> <text dy="0.4em" class="unrotate">-q</text></g> <g transform="translate(67.50000000000001,-116.9134295108992)"><path transform="translate(-11.3,19.5) rotate(120.00000000000001)" d="M 0 0 l 20 20 l 0 -10 l 77.5 0 l -3 -10 l 3 -10 l -77.5 0 l 0 -10 Z" class="r"></path> <text dy="0.4em" class="unrotate">-r</text></g> <g transform="translate(67.50000000000001,116.9134295108992)"><path transform="translate(-11.3,-19.5) rotate(-120.00000000000001)" d="M 0 0 l 20 20 l 0 -10 l 77.5 0 l -3 -10 l 3 -10 l -77.5 0 l 0 -10 Z" class="s"></path> <text dy="0.4em" class="unrotate">-s</text></g></g></g></svg></figure><ol><li>Each direction on the cube grid corresponds to a <em>line</em> on the hex grid. Try highlighting a hex with <code class="r">r</code> at 0, 1, 2, 3 to see how these are related. The row is marked in blue. Try the same for <code class="q">q</code> (green) and <code class="s">s</code> (purple).</li> <li>Each direction on the hex grid is a combination of <em>two</em> directions on the cube grid. For example, <span class="orientation-northwest-north">northwest</span> on the hex grid lies between the <code class="s">+s</code> and <code class="r">-r</code>, so every step <span class="orientation-northwest-north">northwest</span> involves adding 1 to <code class="s">s</code> and subtracting 1 from <code class="r">r</code>. We'll use this to calculate <a href="https://www.redblobgames.com/grids/hexagons/#neighbors">neighbors</a>.</li></ol> <p>The cube coordinates are a reasonable choice for a hex grid coordinate system. The constraint is that <code style="white-space: nowrap;"><span class="q">q</span> + <span class="r">r</span> + <span class="s">s</span> = 0</code> so the algorithms must preserve that. The constraint also ensures that there's a canonical coordinate for each hex.</p></div><script type="x-template" id="template-diagram-grid-cube"><div id="diagram-grid-cube" class="float-container">
<p>Study how the cube coordinates work on the hex grid. Selecting the hexes will highlight the cube coordinates corresponding to the three axes.</p>
<figure class="float-right"><a-svg style="max-width:25.625rem" axes="-500,500,0.75"><a-grid v-bind:hexes="grid" v-bind:setHighlight="setHighlight"><g slot-scope="props" v-bind:class="className(props.hex)"><a-hex></a-hex><a-cube-label v-bind:labels="props.hex.len()===0? ['q','r','s']:[props.hex.q,props.hex.r,props.hex.s]"></a-cube-label></g></a-grid></a-svg></figure><ol>
<li>Each direction on the cube grid corresponds to a <em>line</em> on the hex grid. Try highlighting a hex with <code class="r">r</code> at 0, 1, 2, 3 to see how these are related. The row is marked in blue. Try the same for <code class="q">q</code> (green) and <code class="s">s</code> (purple).</li>
<li>Each direction on the hex grid is a combination of <em>two</em> directions on the cube grid. For example, <span class="orientation-northwest-north">{{layout === 'pointy'? "northwest" : "north"}}</span> on the hex grid lies between the <code class="s">+s</code> and <code class="r">-r</code>, so every step <span class="orientation-northwest-north">{{layout === 'pointy'? "northwest" : "north"}}</span> involves adding 1 to <code class="s">s</code> and subtracting 1 from <code class="r">r</code>. We'll use this to calculate <a href="#neighbors">neighbors</a>.</li>
</ol>
<p>The cube coordinates are a reasonable choice for a hex grid coordinate system. The constraint is that <code style="white-space: nowrap"><span class="q">q</span> + <span class="r">r</span> + <span class="s">s</span> = 0</code> so the algorithms must preserve that. The constraint also ensures that there's a canonical coordinate for each hex.</p>
</div></script><div class="float-container">
<div>
<h3 id="coordinates-axial">
<span>Axial coordinates</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#coordinates-axial">#</a>
</h3>
<p>The axial coordinate system, sometimes called “trapezoidal” or “oblique” or “skewed”, is <strong>the same as the cube system</strong> except we don't <em>store</em> the <span class="s">s</span> coordinate. Since we have a constraint <code style="white-space: nowrap"><span class="q">q</span> + <span class="r">r</span> + <span class="s">s</span> = 0</code>, we can calculate <code style="white-space: nowrap"><span class="s">s</span> = -<span class="q">q</span>-<span class="r">r</span></code> when we need it.</p>
</div>
<figure id="diagram-grid-axial" class="hide-s-coordinate float-right"><svg viewBox="-626.2177826491071 -626.2177826491071 1252.4355652982142 1252.4355652982142" style="max-width: 25.625rem;"><g fill="white" stroke="black" class=" rotate-pointy"><g class="grid"><g transform="translate(-450,-260)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(-450,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(-450,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-450,260)"><g class="s-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(-300,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(-300,-173)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(-300,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-300,173)"><g class="s-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(-300,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(-150,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(-150,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(-150,-87)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-150,87)"><g class="s-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(-150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(-150,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(0,-520)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(0,-346)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(0,-173)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(0,0)"><g class="origin highlight q-axis-same r-axis-same s-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">q</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">r</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate"></text></g></g></g></g><g transform="translate(0,173)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(0,346)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(0,520)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(150,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(150,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(150,-87)"><g class="s-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(150,87)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(150,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(300,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(300,-173)"><g class="s-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(300,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(300,173)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(300,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(450,-260)"><g class="s-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(450,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(450,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(450,260)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g></g></g> <g transform="translate(626.2177826491071,626.2177826491071) scale(1)"><g transform="translate(-175,-50) scale(0.5)" class="toggle-orientation"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em">flat</text></g> <g transform="translate(-75,-50) rotate(-30) scale(0.5)" class="toggle-orientation selected"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em" transform="rotate(30)">pointy</text></g></g> <g class="axes" style="transform: translate(-500px, 500px) scale(0.75);"><g class=" rotate-pointy"><g transform="translate(135,0)"><path transform="translate(-22.5,0.0) rotate(180)" d="M 0 0 l 20 20 l 0 -10 l 77.5 0 l -3 -10 l 3 -10 l -77.5 0 l 0 -10 Z" class="q"></path> <text dy="0.4em" class="unrotate">+q</text></g> <g transform="translate(-67.49999999999997,116.91342951089922)"><path transform="translate(11.2,-19.5) rotate(-60.00000000000001)" d="M 0 0 l 20 20 l 0 -10 l 77.49999999999999 0 l -3 -10 l 3 -10 l -77.49999999999999 0 l 0 -10 Z" class="r"></path> <text dy="0.4em" class="unrotate">+r</text></g> <g transform="translate(-67.50000000000006,-116.91342951089918)"><path transform="translate(11.3,19.5) rotate(59.99999999999997)" d="M 0 0 l 20 20 l 0 -10 l 77.5 0 l -3 -10 l 3 -10 l -77.5 0 l 0 -10 Z" class="s"></path> <text dy="0.4em" class="unrotate">+s</text></g> <g transform="translate(-135,1.6532731788489267e-14)"><path transform="translate(22.5,-0.0) rotate(-7.0167092985348775e-15)" d="M 0 0 l 20 20 l 0 -10 l 77.5 0 l -3 -10 l 3 -10 l -77.5 0 l 0 -10 Z" class="q"></path> <text dy="0.4em" class="unrotate">-q</text></g> <g transform="translate(67.50000000000001,-116.9134295108992)"><path transform="translate(-11.3,19.5) rotate(120.00000000000001)" d="M 0 0 l 20 20 l 0 -10 l 77.5 0 l -3 -10 l 3 -10 l -77.5 0 l 0 -10 Z" class="r"></path> <text dy="0.4em" class="unrotate">-r</text></g> <g transform="translate(67.50000000000001,116.9134295108992)"><path transform="translate(-11.3,-19.5) rotate(-120.00000000000001)" d="M 0 0 l 20 20 l 0 -10 l 77.5 0 l -3 -10 l 3 -10 l -77.5 0 l 0 -10 Z" class="s"></path> <text dy="0.4em" class="unrotate">-s</text></g></g></g></svg></figure><script type="x-template" id="template-diagram-grid-axial"><figure id="diagram-grid-axial" class="hide-s-coordinate float-right"><a-svg style="max-width:25.625rem" axes="-500,500,0.75"><a-grid v-bind:hexes="grid" v-bind:setHighlight="setHighlight"><g slot-scope="props" v-bind:class="className(props.hex)"><a-hex></a-hex><a-cube-label v-bind:labels="props.hex.len()===0? ['q','r','']:[props.hex.q,props.hex.r,props.hex.s]"></a-cube-label></g></a-grid></a-svg></figure></script><div><p>The axial/cube system allows us to add, subtract, multiply, and divide with hex coordinates. The offset coordinate systems do not allow this, and that's part of what makes algorithms simpler with axial/cube coordinates.</p></div>
</div>
<h3 id="coordinates-doubled">
<span>Doubled coordinates</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#coordinates-doubled">#</a>
</h3>
<div class="float-container">
<p>Consider doubled instead of offset coordinates. It makes many of the algorithms easier to implement. Instead of alternation, the doubled coordinates <em>double</em> either the horizontal or vertical step size. It has a constraint <code>(<span class="q">col</span> + <span class="r">row</span>) mod 2 == 0</code>. In the horizontal (pointy top hex) layout it increases the column by 2 each hex; in the vertical (flat top hex) layout it increases the row by 2 each hex. This allows the in-between values for the hexes that are halfway in between:</p>
<div class="float-right" style="text-align:center">
<figure id="diagram-grid-doubled-r" class="doubled-diagram" style="display: inline-block; max-width: 18.75rem;"><svg viewBox="-106.60254037844388 -120 1339.038105676658 1140"><g fill="white" stroke="black" class=" rotate-pointy"><g class="grid"><g transform="translate(0,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(300,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(450,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(600,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">8</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(750,433)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">10</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(900,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">12</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(0,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(300,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(450,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">7</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(600,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">9</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(750,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">11</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(900,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">13</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(-150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(0,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(150,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(300,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(450,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">8</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(600,693)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">10</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(750,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">12</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(-150,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(0,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(150,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(300,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">7</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(450,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">9</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(600,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">11</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(750,953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">13</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(-300,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(-150,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(0,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(150,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(300,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">8</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(450,953)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">10</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(600,1039)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">12</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(-300,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(-150,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(0,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(150,953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">7</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(300,1039)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">9</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(450,1126)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">11</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(600,1212)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">13</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(-450,779)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">6</tspan></text></g></g><g transform="translate(-300,866)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">6</tspan></text></g></g><g transform="translate(-150,953)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">6</tspan></text></g></g><g transform="translate(0,1039)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">6</tspan></text></g></g><g transform="translate(150,1126)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">8</tspan>, <tspan class="r-coord">6</tspan></text></g></g><g transform="translate(300,1212)"><g class="highlight q-axis-same r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">10</tspan>, <tspan class="r-coord">6</tspan></text></g></g><g transform="translate(450,1299)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">12</tspan>, <tspan class="r-coord">6</tspan></text></g></g></g></g> <!----> <!----></svg><figcaption>“double-width” horizontal layout<br>doubles column values</figcaption></figure><script type="x-template" id="template-diagram-grid-doubled-r"><figure id="diagram-grid-doubled-r" class="doubled-diagram" style="display:inline-block;max-width:18.75rem"><a-svg><a-grid v-bind:hexes="grid" v-bind:setHighlight="setHighlight"><g slot-scope="props" v-bind:class="className(props.hex)"><a-hex></a-hex><a-text><tspan class="q-coord">{{props.hex.col}}</tspan>, <tspan class="r-coord">{{props.hex.row}}</tspan></a-text></g></a-grid></a-svg><figcaption>“double-width” horizontal layout<br>doubles column values</figcaption></figure></script><figure id="diagram-grid-doubled-q" class="doubled-diagram float-right" style="display: inline-block; max-width: 18.75rem;"><svg viewBox="-120 -106.60254037844388 1290 1165.8330249197702"><g fill="white" stroke="black" class=" rotate-flat"><g class="grid"><g transform="translate(0,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(0,173)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(0,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(0,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">6</tspan></text></g></g><g transform="translate(0,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">8</tspan></text></g></g><g transform="translate(0,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">10</tspan></text></g></g><g transform="translate(150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(150,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(150,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">7</tspan></text></g></g><g transform="translate(150,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">9</tspan></text></g></g><g transform="translate(150,953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">11</tspan></text></g></g><g transform="translate(300,0)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(300,173)"><g class="highlight q-axis-same r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(300,346)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(300,520)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">6</tspan></text></g></g><g transform="translate(300,693)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">8</tspan></text></g></g><g transform="translate(300,866)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">10</tspan></text></g></g><g transform="translate(450,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(450,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(450,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(450,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">7</tspan></text></g></g><g transform="translate(450,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">9</tspan></text></g></g><g transform="translate(450,953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">11</tspan></text></g></g><g transform="translate(600,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(600,173)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(600,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(600,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">6</tspan></text></g></g><g transform="translate(600,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">8</tspan></text></g></g><g transform="translate(600,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">10</tspan></text></g></g><g transform="translate(750,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(750,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(750,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(750,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">7</tspan></text></g></g><g transform="translate(750,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">9</tspan></text></g></g><g transform="translate(750,953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">11</tspan></text></g></g><g transform="translate(900,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(900,173)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(900,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(900,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">6</tspan></text></g></g><g transform="translate(900,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">8</tspan></text></g></g><g transform="translate(900,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">10</tspan></text></g></g><g transform="translate(1050,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">7</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(1050,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">7</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(1050,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">7</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(1050,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">7</tspan>, <tspan class="r-coord">7</tspan></text></g></g><g transform="translate(1050,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">7</tspan>, <tspan class="r-coord">9</tspan></text></g></g><g transform="translate(1050,953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">7</tspan>, <tspan class="r-coord">11</tspan></text></g></g></g></g> <!----> <!----></svg><figcaption>“double-height” horizontal layout<br>doubles row values</figcaption></figure><script type="x-template" id="template-diagram-grid-doubled-q"><figure id="diagram-grid-doubled-q" class="doubled-diagram float-right" style="display:inline-block;max-width:18.75rem"><a-svg><a-grid v-bind:hexes="grid" v-bind:setHighlight="setHighlight"><g slot-scope="props" v-bind:class="className(props.hex)"><a-hex></a-hex><a-text><tspan class="q-coord">{{props.hex.col}}</tspan>, <tspan class="r-coord">{{props.hex.row}}</tspan></a-text></g></a-grid></a-svg><figcaption>“double-height” horizontal layout<br>doubles row values</figcaption></figure></script>
</div>
<p>I haven't found much information about this system — tri-bit.com called it <a href="https://web.archive.org/web/20090205120106/http://sc.tri-bit.com/Hex_Grids">interlaced</a><sup class="print-endnote">[4]</sup>, rot.js calls it <a href="https://ondras.github.io/rot.js/manual/#hex/indexing">double width</a><sup class="print-endnote">[5]</sup>, and <a href="https://www.researchgate.net/publication/235779843_Storage_and_addressing_scheme_for_practical_hexagonal_image_processing?_sg=flKEA6rk1KmOpC4LBjQJN_-NBuiR1KJtJt-XeYRXnd0z_MNUrB2gjb2FKV3iBoKg988P2xHCpQ">this paper</a><sup class="print-endnote">[6]</sup> calls it rectangular. Other possible names: brick or checkerboard. I'm not sure what to call it. Tamás Kenéz sent me the core algorithms (neighbors, distances, etc.). If you have any references, please send them to me.</p>
</div>
<h3 id="coordinates-other">
<span>Others</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#coordinates-other">#</a>
</h3>
<p>In <a href="https://www.redblobgames.com/grids/hexagons-v2/">previous versions of this document</a>, I used <span class="q">x</span>&nbsp;<span class="r">z</span>&nbsp;<span class="s">y</span> for hexagonal coordinates and <em>also</em> for cartesian coordinates, and then I also used <span class="q">q</span>&nbsp;<span class="r">r</span>&nbsp;<span class="s">s</span> for hexagonal coordinates. To avoid confusion in this document, I'll use the names <span class="q">q</span>&nbsp;<span class="r">r</span>&nbsp;<span class="s">s</span> for hexagonal coordinates (with the constraint <code><span class="q">q</span>&nbsp;+&nbsp;<span class="r">r</span>&nbsp;+&nbsp;<span class="s">s</span>&nbsp;=&nbsp;0</code>), and I'll use the names x&nbsp;y&nbsp;z for cartesian coordinates.</p>
<p>There are <em>many</em> different valid cube hex coordinate systems. Some of them have constraints other than <code><span class="q">q</span>&nbsp;+&nbsp;<span class="r">r</span>&nbsp;+&nbsp;<span class="s">s</span>&nbsp;=&nbsp;0</code>. I've shown only one of the many systems. There are also <em>many</em> different valid axial hex coordinate systems, found by using reflections and rotations. Some have the 120° axis separation as shown here and some have a 60° axis separation.</p>
<p>There are also cube systems that use <code>q-r, r-s, s-q</code>. One of the interesting properties of that system is that it reveals <a href="https://www.redblobgames.com/grids/hexagons/directions.html">hexagonal directions</a>.</p>
<p>In addition to the <a href="https://www.redblobgames.com/grids/hexagons/#rings-spiral-coordinates">flat spiral coordinate systems</a> shown later on this page, there are nested/recursive spiral systems. See <a href="https://gamedev.stackexchange.com/questions/71785/converting-between-spiral-honeycomb-mosaic-and-axial-hex-coordinates">this question</a><sup class="print-endnote">[7]</sup> on stackoverflow, or this <a href="https://opus.lib.uts.edu.au/bitstream/2100/280/11/02Whole.pdf">Spiral Architecture for Machine Vision</a><sup class="print-endnote">[8]</sup> (1996), or this <a href="https://web.archive.org/web/20120303114550/http://www.pyxisinnovation.com/pyxwiki/index.php?title=Generalized_Balanced_Ternary">diagram about "generalized balanced ternary" coordinates</a><sup class="print-endnote">[9]</sup>, or this <a href="https://www.sciencedirect.com/science/article/pii/0166218X9200186P">An isomorphism between the p-adic integers and a ring associated with a tiling of N-space by permutohedra</a><sup class="print-endnote">[10]</sup> (1994) (<a href="https://doi.org/10.1016/0166-218X(92)00186-P">DOI</a><sup class="print-endnote">[11]</sup>), or this <a href="https://old.reddit.com/r/gamedev/comments/19wmvn/a_data_structure_for_a_game_board_with_hexagonal/c8s9qbe/">discussion on reddit</a><sup class="print-endnote">[12]</sup>. There's a <a href="https://github.com/SimonWailand/hexwrench">Clojure library</a><sup class="print-endnote">[13]</sup> implementing Generalized Balanced Ternary. Also see the Gosper Curve, <a href="https://patricksurry.github.io/posts/flowsnake/">here</a><sup class="print-endnote">[14]</sup> and <a href="https://metacpan.org/pod/Math::PlanePath::FlowsnakeCentres">here</a><sup class="print-endnote">[15]</sup>.</p>
<h3 id="coordinates-comparison">
<span>Recommendations</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#coordinates-comparison">#</a>
</h3>
<p>What do I recommend?</p>
<table class="grid-comparison">
<thead><tr>
<th></th>
<th>Offset</th>
<th>Doubled</th>
<th>Axial</th>
<th>Cube</th>
</tr></thead>
<tbody>
<tr>
<th>Pointy rotation</th>
<td>evenr, oddr</td>
<td>doublewidth</td>
<td rowspan="2">axial</td>
<td rowspan="2">cube</td>
</tr>
<tr>
<th>Flat rotation</th>
<td>evenq, oddq</td>
<td>doubleheight</td>
</tr>
<tr>
<th>Other rotations</th>
<td colspan="2">no</td>
<td colspan="2">yes</td>
</tr>
<tr>
<th>Vector operations (add,&nbsp;subtract,&nbsp;scale)</th>
<td>no</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
</tr>
<tr>
<th>Array storage</th>
<td>rectangular</td>
<td>no<sup>*</sup>
</td>
<td>rhombus<sup>*</sup>
</td>
<td>no<sup>*</sup>
</td>
</tr>
<tr>
<th>Hash storage</th>
<td colspan="2">any shape</td>
<td colspan="2">any shape</td>
</tr>
<tr>
<th>Hexagonal symmetry</th>
<td>no</td>
<td>no</td>
<td>no</td>
<td>yes</td>
</tr>
<tr>
<th>Easy algorithms</th>
<td>few</td>
<td>some</td>
<td>most</td>
<td>most</td>
</tr>
</tbody>
</table>
<p><sup>*</sup> rectangular maps require an adapter, shown in the <a href="https://www.redblobgames.com/grids/hexagons/#map-storage">map storage section</a></p>
<p>My recommendation: if you are only going to use non-rotated rectangular maps, consider the <strong>Doubled</strong> or <strong>Offset</strong> system that matches your map orientation. For maps with rotation, or non-rectangularly shaped maps, use <strong>Axial</strong>/<strong>Cube</strong>. Note that Axial (<span class="q">q</span>,<span class="r">r</span>) and Cube (<span class="q">q</span>,<span class="r">r</span>,<span class="s">s</span>) are essentially the same system. Store coordinates as Axial, and calculate <span class="s">s</span> in algorithms that need it.</p></section><section><h2 id="conversions">
<span><a href="https://www.redblobgames.com/grids/hexagons/#conversions">Coordinate conversion</a></span><a class="anchor" href="https://www.redblobgames.com/grids/hexagons/#conversions">#</a>
</h2>
<p>It is likely that you will use axial or offset coordinates in your project, but many algorithms are simpler to express in axial/cube coordinates. Therefore you need to be able to convert back and forth.</p>
<h3 id="conversions-axial">
<span>Axial coordinates</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#conversions-axial">#</a>
</h3>
<div id="diagram-conversions-axial" class="float-container"><p>Axial and Cube coordinates are essentially the same system. In the Cube system, we store the third coordinate, <code class="s">s</code>. In the Axial system, we calculate it as needed, <code><span class="s">s</span> = -<span class="q">q</span>-<span class="r">r</span></code>.</p> <figure class="float-right"><svg viewBox="0 -450 2100 900" style="max-width: 31.25rem;"><g transform="translate(550,0)" fill="white" stroke="black" class="root"><g class=" rotate-pointy"><g class="grid"><g transform="translate(-300,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(-300,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-300,173)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(-150,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(-150,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(-150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(0,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(0,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(0,0)"><g class="origin"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">q</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">r</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">s</text></g></g></g></g><g transform="translate(0,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(0,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(150,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(150,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(300,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(300,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(300,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g></g></g></g><g transform="translate(1550,0)" fill="white" stroke="black" class="root"><g class=" rotate-pointy"><g class="grid"><g transform="translate(-300,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate"></text></g></g></g></g><g transform="translate(-300,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate"></text></g></g></g></g><g transform="translate(-300,173)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate"></text></g></g></g></g><g transform="translate(-150,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate"></text></g></g></g></g><g transform="translate(-150,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate"></text></g></g></g></g><g transform="translate(-150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate"></text></g></g></g></g><g transform="translate(-150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate"></text></g></g></g></g><g transform="translate(0,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate"></text></g></g></g></g><g transform="translate(0,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate"></text></g></g></g></g><g transform="translate(0,0)"><g class="origin"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">q</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">r</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate"></text></g></g></g></g><g transform="translate(0,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate"></text></g></g></g></g><g transform="translate(0,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate"></text></g></g></g></g><g transform="translate(150,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate"></text></g></g></g></g><g transform="translate(150,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate"></text></g></g></g></g><g transform="translate(150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate"></text></g></g></g></g><g transform="translate(150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate"></text></g></g></g></g><g transform="translate(300,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate"></text></g></g></g></g><g transform="translate(300,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate"></text></g></g></g></g><g transform="translate(300,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate"></text></g></g></g></g></g></g></g><g transform="translate(2100,450)"><g transform="translate(-175,-50) scale(0.5)" class="toggle-orientation"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em">flat</text></g> <g transform="translate(-75,-50) rotate(-30) scale(0.5)" class="toggle-orientation selected"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em" transform="rotate(30)">pointy</text></g></g></svg></figure><pre>function cube_to_axial(cube):
    var q = cube.q
    var r = cube.r
    return Hex(q, r)

function axial_to_cube(hex):
    var q = hex.q
    var r = hex.r
    var s = -q-r
    return Cube(q, r, s)</pre> <p>Converting between the systems like this is probably overkill. If you're using Cube and need Axial, ignore the <code class="s">s</code> coordinate. If you're using Axial and need Cube, calculate the <code class="s">s</code> coordinate only in the algorithms that need it.</p></div><script type="x-template" id="template-diagram-conversions-axial"><div id="diagram-conversions-axial" class="float-container">
<p>Axial and Cube coordinates are essentially the same system. In the Cube system, we store the third coordinate, <code class="s">s</code>. In the Axial system, we calculate it as needed, <code style="white-space: nobreak"><span class="s">s</span> = -<span class="q">q</span>-<span class="r">r</span></code>.</p>
<figure class="float-right"><svg viewBox="0 -450 2100 900" style="max-width:31.25rem"><g class="root" transform="translate(550,0)" fill="white" stroke="black"><g v-bind:class="$root.rotateClass"><a-grid v-bind:hexes="grid" v-bind:setHighlight="setHighlight"><g slot-scope="props" v-bind:class="className(props.hex)"><a-hex></a-hex><a-cube-label v-bind:labels="props.hex.len()===0? ['q','r','s']:[props.hex.q,props.hex.r,props.hex.s]"></a-cube-label></g></a-grid></g></g><g class="root" transform="translate(1550,0)" fill="white" stroke="black"><g v-bind:class="$root.rotateClass"><a-grid v-bind:hexes="grid" v-bind:setHighlight="setHighlight"><g slot-scope="props" v-bind:class="className(props.hex)"><a-hex></a-hex><a-cube-label v-bind:labels="props.hex.len()===0? ['q','r','']:[props.hex.q,props.hex.r,'']"></a-cube-label></g></a-grid></g></g><a-toggle-orientation transform="translate(2100,450)"></a-toggle-orientation></svg></figure><pre>function cube_to_axial(cube):
    var q = cube.q
    var r = cube.r
    return Hex(q, r)

function axial_to_cube(hex):
    var q = hex.q
    var r = hex.r
    var s = -q-r
    return Cube(q, r, s)</pre>
<p>Converting between the systems like this is probably overkill. If you're using Cube and need Axial, ignore the <code class="s">s</code> coordinate. If you're using Axial and need Cube, calculate the <code class="s">s</code> coordinate only in the algorithms that need it.</p>
</div></script><h3 id="conversions-offset">
<span>Offset coordinates</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#conversions-offset">#</a>
</h3>
<div id="diagram-conversions-offset" class="float-container"><p>Determine which type of offset system you use; *-<b>r</b> are pointy top; *-<b>q</b> are flat top. The conversion is different for each.</p> <pre>function cube_to_evenq(hex):
    var col = hex.q
    var row = hex.r + (hex.q + (hex.q&amp;1)) / 2
    return OffsetCoord(col, row)

function evenq_to_cube(hex):
    var q = hex.col
    var r = hex.row - (hex.col + (hex.col&amp;1)) / 2
    return Cube(q, r, -q-r)</pre> <ul><li style="list-style-type: none;"><label><input type="radio" value="odd_r"> <b>odd-r</b>&nbsp; shoves odd rows by +½ column</label></li> <li style="list-style-type: none;"><label><input type="radio" value="even_r"> <b>even-r</b>&nbsp; shoves even rows by +½ column</label></li> <li style="list-style-type: none;"><label><input type="radio" value="odd_q"> <b>odd-q</b>&nbsp; shoves odd columns by +½ row</label></li> <li style="list-style-type: none;"><label><input type="radio" value="even_q"> <b>even-q</b>&nbsp; shoves even columns by +½ row</label></li></ul> <figure class="float-right"><svg viewBox="0 -550 2100 1100" style="max-width: 31.25rem;"><g transform="translate(550,0)" fill="white" stroke="black" class="root"><g class=" rotate-flat"><g class="grid"><g transform="translate(-300,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(-300,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(-300,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-300,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(-300,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(-150,-433)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(-150,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(-150,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(-150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(0,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(0,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(0,0)"><g class="origin"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">q</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">r</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">s</text></g></g></g></g><g transform="translate(0,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(0,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(150,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(150,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(150,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(300,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(300,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(300,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(300,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(300,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g></g></g></g><g transform="translate(1550,0)" fill="white" stroke="black" class="root"><g class=" rotate-flat"><g class="grid"><g transform="translate(-300,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">-2, -2</text></g></g><g transform="translate(-300,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">-2, -1</text></g></g><g transform="translate(-300,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">-2, 0</text></g></g><g transform="translate(-300,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">-2, +1</text></g></g><g transform="translate(-300,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">-2, +2</text></g></g><g transform="translate(-150,-433)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">-1, -2</text></g></g><g transform="translate(-150,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">-1, -1</text></g></g><g transform="translate(-150,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">-1, 0</text></g></g><g transform="translate(-150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">-1, +1</text></g></g><g transform="translate(-150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">-1, +2</text></g></g><g transform="translate(0,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">0, -2</text></g></g><g transform="translate(0,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">0, -1</text></g></g><g transform="translate(0,0)"><g class="origin"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">col, row</text></g></g><g transform="translate(0,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">0, +1</text></g></g><g transform="translate(0,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">0, +2</text></g></g><g transform="translate(150,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">+1, -2</text></g></g><g transform="translate(150,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">+1, -1</text></g></g><g transform="translate(150,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">+1, 0</text></g></g><g transform="translate(150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">+1, +1</text></g></g><g transform="translate(150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">+1, +2</text></g></g><g transform="translate(300,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">+2, -2</text></g></g><g transform="translate(300,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">+2, -1</text></g></g><g transform="translate(300,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">+2, 0</text></g></g><g transform="translate(300,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">+2, +1</text></g></g><g transform="translate(300,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">+2, +2</text></g></g></g></g></g></svg></figure><p>Convert to/from <label><input type="radio" value="axial"><b>axial</b></label> or <label><input type="radio" value="cube"><b>cube</b></label>.</p> <p>Implementation note: I use <code>a&amp;1</code> (<a href="https://en.wikipedia.org/wiki/Bitwise_operation#AND">bitwise and</a><sup class="print-endnote">[16]</sup>) instead of <code>a%2</code> (<a href="https://en.wikipedia.org/wiki/Modulo_operation">modulo</a><sup class="print-endnote">[17]</sup>) to detect whether something is even (0) or odd (1), because it works with negative numbers too. See a longer explanation on <a href="https://www.redblobgames.com/grids/hexagons/implementation.html#offset">my implementation notes page</a>.</p></div><script type="x-template" id="template-diagram-conversions-offset"><div id="diagram-conversions-offset" class="float-container">
<p>Determine which type of offset system you use; *-<b>r</b> are pointy top; *-<b>q</b> are flat top. The conversion is different for each.</p>
<pre v-if="variant === 'odd_r'">function {{output}}_to_oddr(hex):
    var col = hex.q + (hex.r - (hex.r&amp;1)) / 2
    var row = hex.r
    return OffsetCoord(col, row)

function oddr_to_{{output}}(hex):
    var q = hex.col - (hex.row - (hex.row&amp;1)) / 2
    var r = hex.row
    return {{output_constructor}}</pre>
<pre v-else-if="variant === 'even_r'">function {{output}}_to_evenr(hex):
    var col = hex.q + (hex.r + (hex.r&amp;1)) / 2
    var row = hex.r
    return OffsetCoord(col, row)

function evenr_to_{{output}}(hex):
    var q = hex.col - (hex.row + (hex.row&amp;1)) / 2
    var r = hex.row
    return {{output_constructor}}</pre>
<pre v-else-if="variant === 'odd_q'">function {{output}}_to_oddq(hex):
    var col = hex.q
    var row = hex.r + (hex.q - (hex.q&amp;1)) / 2
    return OffsetCoord(col, row)

function oddq_to_{{output}}(hex):
    var q = hex.col
    var r = hex.row - (hex.col - (hex.col&amp;1)) / 2
    return {{output_constructor}}</pre>
<pre v-else="">function {{output}}_to_evenq(hex):
    var col = hex.q
    var row = hex.r + (hex.q + (hex.q&amp;1)) / 2
    return OffsetCoord(col, row)

function evenq_to_{{output}}(hex):
    var q = hex.col
    var r = hex.row - (hex.col + (hex.col&amp;1)) / 2
    return {{output_constructor}}</pre>
<ul>
<li style="list-style-type:none"><label><input type="radio" v-model="variant" value="odd_r"> <b>odd-r</b>  shoves odd rows by +½ column</label></li>
<li style="list-style-type:none"><label><input type="radio" v-model="variant" value="even_r"> <b>even-r</b>  shoves even rows by +½ column</label></li>
<li style="list-style-type:none"><label><input type="radio" v-model="variant" value="odd_q"> <b>odd-q</b>  shoves odd columns by +½ row</label></li>
<li style="list-style-type:none"><label><input type="radio" v-model="variant" value="even_q"> <b>even-q</b>  shoves even columns by +½ row</label></li>
</ul>
<figure class="float-right"><svg viewBox="0 -550 2100 1100" style="max-width:31.25rem"><g class="root" v-bind:class="{'hide-s-coordinate': output=='axial'}" transform="translate(550,0)" fill="white" stroke="black"><g v-bind:class="$root.rotateClass"><a-grid v-bind:hexes="grid" v-bind:setHighlight="setHighlight"><g slot-scope="props" v-bind:class="className(props.hex)"><a-hex></a-hex><a-cube-label v-bind:labels="props.hex.len()===0? ['q','r','s']:[props.hex.q,props.hex.r,props.hex.s]"></a-cube-label></g></a-grid></g></g><g class="root" transform="translate(1550,0)" fill="white" stroke="black"><g v-bind:class="$root.rotateClass"><a-grid v-bind:hexes="grid" v-bind:setHighlight="setHighlight"><g slot-scope="props" v-bind:class="className(props.hex)"><a-hex></a-hex><a-text v-if="props.hex.len() === 0">col, row</a-text><a-text v-else="">{{props.hex.col | signed}}, {{props.hex.row | signed}}</a-text></g></a-grid></g></g></svg></figure><p>Convert to/from <label><input type="radio" v-model="output" value="axial"><b>axial</b></label> or <label><input type="radio" v-model="output" value="cube"><b>cube</b></label>.</p>
<p>Implementation note: I use <code>a&amp;1</code> (<a href="https://en.wikipedia.org/wiki/Bitwise_operation#AND">bitwise and</a><sup class="print-endnote">[16]</sup>) instead of <code>a%2</code> (<a href="https://en.wikipedia.org/wiki/Modulo_operation">modulo</a><sup class="print-endnote">[17]</sup>) to detect whether something is even (0) or odd (1), because it works with negative numbers too. See a longer explanation on <a href="implementation.html#offset">my implementation notes page</a>.</p>
</div></script><h3 id="conversions-doubled">
<span>Doubled coordinates</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#conversions-doubled">#</a>
</h3>
<pre>function doubleheight_to_axial(hex):
    var q = hex.col
    var r = (hex.row - hex.col) / 2
    return Hex(q, r)

function axial_to_doubleheight(hex):
    var col = hex.q
    var row = 2 * hex.r + hex.q
    return DoubledCoord(col, row)

function doublewidth_to_axial(hex):
    var q = (hex.col - hex.row) / 2
    var r = hex.row
    return Hex(q, r)

function axial_to_doublewidth(hex):
    var col = 2 * hex.q + hex.r
    var row = hex.r
    return DoubledCoord(col, row)</pre>
<p>If you need Cube coordinates, use <code>Cube(q, r, -q-r)</code> instead of <code>Hex(q, r)</code>.</p></section><section><h2 id="neighbors">
<span><a href="https://www.redblobgames.com/grids/hexagons/#neighbors">Neighbors</a></span><a class="anchor" href="https://www.redblobgames.com/grids/hexagons/#neighbors">#</a>
</h2>
<p>Given a hex, which 6 hexes are neighboring it? As you might expect, the answer is simplest with cube coordinates, still pretty simple with axial coordinates, and slightly trickier with offset coordinates. We might also want to calculate the 6 “diagonal” hexes.</p>
<h3 id="neighbors-cube">
<span>Cube coordinates</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#neighbors-cube">#</a>
</h3>
<div id="diagram-neighbors-cube" class="float-container"><div><p>Moving one space in hex coordinates involves changing one of the 3 cube coordinates by +1 and changing another one by -1 (the sum must remain 0). There are 3 possible coordinates to change by +1, and 2 remaining that could be changed by -1. This results in 6 possible changes. Each corresponds to one of the hexagonal directions. The simplest and fastest approach is to precompute the permutations and put them into a table of <code>Cube(dq, dr, ds)</code>:</p> <pre class="neighbors-code">var cube_direction_vectors = [
    <span><span class="">Cube(+1, 0, -1)</span>, <!----><!----></span><span><span class="">Cube(+1, -1, 0)</span>, <!----><!----></span><span><span class="">Cube(0, -1, +1)</span>, <br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span><span class="highlight">Cube(-1, 0, +1)</span>, <!----><!----></span><span><span class="">Cube(-1, +1, 0)</span>, <!----><!----></span><span><span class="">Cube(0, +1, -1)</span>, <!----><!----></span>
]

function cube_direction(direction):
    return cube_direction_vectors[direction]

function cube_add(hex, vec):
    return Cube(hex.q + vec.q, hex.r + vec.r, hex.s + vec.s)

function cube_neighbor(cube, direction):
    return cube_add(cube, cube_direction(direction))</pre> <p>With the Cube coordinate systems, we can store <em>differences</em> between two coordinates (a "vector"), and then add those differences back to a coordinate to get another coordinate. That's what the <code>cube_add</code> function does. Axial and Doubled coordinates also support this, but the Offset coordinates do not.</p></div> <figure class="float-right"><svg viewBox="-279.8076211353316 -279.8076211353316 559.6152422706632 559.6152422706632" class="neighbors" style="max-width: 16.875rem;"><g fill="white" stroke="black" class=" rotate-pointy"><g class="grid"><g transform="translate(-150,-87)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(0,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(0,0)"><g class="origin"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">q</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">r</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">s</text></g></g></g></g><g transform="translate(0,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(150,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g></g></g> <g transform="translate(279.8076211353316,279.8076211353316) scale(0.5)"><g transform="translate(-175,-50) scale(0.5)" class="toggle-orientation"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em">flat</text></g> <g transform="translate(-75,-50) rotate(-30) scale(0.5)" class="toggle-orientation selected"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em" transform="rotate(30)">pointy</text></g></g> <!----></svg></figure></div><script type="x-template" id="template-diagram-neighbors-cube"><div id="diagram-neighbors-cube" class="float-container">
<div>
<p>Moving one space in hex coordinates involves changing one of the 3 cube coordinates by +1 and changing another one by -1 (the sum must remain 0). There are 3 possible coordinates to change by +1, and 2 remaining that could be changed by -1. This results in 6 possible changes. Each corresponds to one of the hexagonal directions. The simplest and fastest approach is to precompute the permutations and put them into a table of <code>Cube(dq, dr, ds)</code>:</p>
<pre class="neighbors-code">var cube_direction_vectors = [
    <span v-for="(hex, index) in neighbors" v-bind:key="index"><span v-bind:class="{highlight:highlight &amp;&amp; hex.toString()===highlight.toString()}" v-on:pointerenter="setHighlight(hex)">Cube({{hex.q | signed}}, {{hex.r | signed}}, {{hex.s | signed}})</span>, <br v-if="index===2"><span v-if="index===2">    </span></span>
]

function cube_direction(direction):
    return cube_direction_vectors[direction]

function cube_add(hex, vec):
    return Cube(hex.q + vec.q, hex.r + vec.r, hex.s + vec.s)

function cube_neighbor(cube, direction):
    return cube_add(cube, cube_direction(direction))</pre>
<p>With the Cube coordinate systems, we can store <em>differences</em> between two coordinates (a "vector"), and then add those differences back to a coordinate to get another coordinate. That's what the <code>cube_add</code> function does. Axial and Doubled coordinates also support this, but the Offset coordinates do not.</p>
</div>
<figure class="float-right"><a-svg class="neighbors" v-bind:orientation-button-scale="0.5" style="max-width:16.875rem"><a-grid v-bind:hexes="grid" v-bind:setHighlight="setHighlight"><g slot-scope="props" v-bind:class="className(props.hex)"><a-hex></a-hex><a-cube-label v-bind:labels="props.hex.len()===0? ['q','r','s']:[props.hex.q,props.hex.r,props.hex.s]"></a-cube-label></g></a-grid></a-svg></figure>
</div></script><h3 id="neighbors-axial">
<span>Axial coordinates</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#neighbors-axial">#</a>
</h3>
<div id="diagram-neighbors-axial" class="float-container"><div><p>Since axial is the same as cube except not storing the third coordinate, the code is the same as the previous section except we won't write out the third coordinate:</p> <pre id="neighbors-axial-code" class="neighbors-code">var axial_direction_vectors = [
    <span><span class="">Hex(+1, 0)</span>, <!----><!----></span><span><span class="">Hex(+1, -1)</span>, <!----><!----></span><span><span class="">Hex(0, -1)</span>, <br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span><span class="highlight">Hex(-1, 0)</span>, <!----><!----></span><span><span class="">Hex(-1, +1)</span>, <!----><!----></span><span><span class="">Hex(0, +1)</span>, <!----><!----></span>
]

function axial_direction(direction):
    return axial_direction_vectors[direction]

function axial_add(hex, vec):
    return Hex(hex.q + vec.q, hex.r + vec.r)

function axial_neighbor(hex, direction):
    return axial_add(hex, axial_direction(direction))</pre></div> <figure class="float-right"><svg viewBox="-279.8076211353316 -279.8076211353316 559.6152422706632 559.6152422706632" class="neighbors" style="max-width: 16.875rem;"><g fill="white" stroke="black" class=" rotate-pointy"><g class="grid"><g transform="translate(-150,-87)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">-1, 0</text></g></g><g transform="translate(-150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">-1, +1</text></g></g><g transform="translate(0,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">0, -1</text></g></g><g transform="translate(0,0)"><g class="origin"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">q, r</text></g></g><g transform="translate(0,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">0, +1</text></g></g><g transform="translate(150,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">+1, -1</text></g></g><g transform="translate(150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">+1, 0</text></g></g></g></g> <g transform="translate(279.8076211353316,279.8076211353316) scale(0.5)"><g transform="translate(-175,-50) scale(0.5)" class="toggle-orientation"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em">flat</text></g> <g transform="translate(-75,-50) rotate(-30) scale(0.5)" class="toggle-orientation selected"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em" transform="rotate(30)">pointy</text></g></g> <!----></svg></figure></div><script type="x-template" id="template-diagram-neighbors-axial"><div id="diagram-neighbors-axial" class="float-container">
<div>
<p>Since axial is the same as cube except not storing the third coordinate, the code is the same as the previous section except we won't write out the third coordinate:</p>
<pre id="neighbors-axial-code" class="neighbors-code">var axial_direction_vectors = [
    <span v-for="(hex, index) in neighbors" v-bind:key="index"><span v-bind:class="{highlight:highlight &amp;&amp; hex.toString()===highlight.toString()}" v-on:pointerenter="setHighlight(hex)">Hex({{hex.q | signed}}, {{hex.r | signed}})</span>, <br v-if="index===2"><span v-if="index===2">    </span></span>
]

function axial_direction(direction):
    return axial_direction_vectors[direction]

function axial_add(hex, vec):
    return Hex(hex.q + vec.q, hex.r + vec.r)

function axial_neighbor(hex, direction):
    return axial_add(hex, axial_direction(direction))</pre>
</div>
<figure class="float-right"><a-svg class="neighbors" v-bind:orientation-button-scale="0.5" style="max-width:16.875rem"><a-grid v-bind:hexes="grid" v-bind:setHighlight="setHighlight"><g slot-scope="props" v-bind:class="className(props.hex)"><a-hex></a-hex><a-text v-if="props.hex.len() === 0">q, r</a-text><a-text v-else="">{{props.hex.q | signed}}, {{props.hex.r | signed}}</a-text></g></a-grid></a-svg></figure>
</div></script><h3 id="neighbors-offset">
<span>Offset coordinates</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#neighbors-offset">#</a>
</h3>
<p>As with cube and axial coordinates, we'll build a table of the numbers we need to add to <code>col</code> and <code>row</code>. However <strong>offset coordinates can't be safely subtracted and added</strong>. For example, moving southeast from (0, 0) takes us to (0, +1), so we might put (0, +1) into the table for moving southeast. But moving southeast from (0, +1) takes us to (+1, +2), so we would need to put (+1, +1) into that table. <em>The amount we need to add depends on where in the grid we are</em>.</p>
<p>Since the movement vector is different for odd and even columns/rows, we will need two separate lists of neighbors. <strong>Pick a grid type</strong> to see the corresponding code.</p>
<div id="diagram-neighbors-offset" class="float-container"><pre id="neighbors-offset-code" class="column neighbors-code">var evenq_direction_differences = [<span><br>&nbsp;&nbsp;&nbsp;&nbsp;// even cols <br>&nbsp;&nbsp;&nbsp;&nbsp;[<span><span class="">[+1, +1]</span><span>, </span><!----><!----></span><span><span class="">[+1,  0]</span><span>, </span><!----><!----></span><span><span class="">[ 0, -1]</span><span>, </span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span><span class="">[-1,  0]</span><span>, </span><!----><!----></span><span><span class="">[-1, +1]</span><span>, </span><!----><!----></span><span><span class="">[ 0, +1]</span><!----><!----><!----></span>],</span><span><br>&nbsp;&nbsp;&nbsp;&nbsp;// odd cols <br>&nbsp;&nbsp;&nbsp;&nbsp;[<span><span class="">[+1,  0]</span><span>, </span><!----><!----></span><span><span class="">[+1, -1]</span><span>, </span><!----><!----></span><span><span class="">[ 0, -1]</span><span>, </span><br><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span><span class="">[-1, -1]</span><span>, </span><!----><!----></span><span><span class="">[-1,  0]</span><span>, </span><!----><!----></span><span><span class="highlight">[ 0, +1]</span><!----><!----><!----></span>],</span>
]

function <b>evenq</b>_offset_neighbor(hex, direction):
    var parity = hex.col &amp; 1
    var diff = evenq_direction_differences[parity][direction]
    return OffsetCoord(hex.col + diff[0], hex.row + diff[1])</pre> <figure class="float-right"><strong>Pick a grid type:</strong> <label><input type="radio" value="odd_r">&nbsp;odd-r&nbsp;</label><label><input type="radio" value="even_r">&nbsp;even-r&nbsp;</label><label><input type="radio" value="odd_q">&nbsp;odd-q&nbsp;</label><label><input type="radio" value="even_q">&nbsp;even-q&nbsp;</label><br><svg viewBox="0 0 1200 600" class="neighbors" style="max-width: 31.25rem;"><g fill="white" stroke="black" style="transform: translate(900px, 300px);"><g class=" rotate-flat"><g class="grid"><g transform="translate(-150,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">-1,  0</text></g></g><g transform="translate(-150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">-1, +1</text></g></g><g transform="translate(0,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"> 0, -1</text></g></g><g transform="translate(0,0)"><g class="origin"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan x="0" dy="-0.4em">EVEN col</tspan><tspan x="0" dy="1.5em">ALL rows</tspan></text></g></g><g transform="translate(0,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"> 0, +1</text></g></g><g transform="translate(150,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">+1,  0</text></g></g><g transform="translate(150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">+1, +1</text></g></g></g></g></g><g fill="white" stroke="black" style="transform: translate(300px, 300px);"><g class=" rotate-flat"><g class="grid"><g transform="translate(-150,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">-1, -1</text></g></g><g transform="translate(-150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">-1,  0</text></g></g><g transform="translate(0,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"> 0, -1</text></g></g><g transform="translate(0,0)"><g class="origin"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan x="0" dy="-0.4em">ODD col</tspan><tspan x="0" dy="1.5em">ALL rows</tspan></text></g></g><g transform="translate(0,173)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"> 0, +1</text></g></g><g transform="translate(150,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">+1, -1</text></g></g><g transform="translate(150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">+1,  0</text></g></g></g></g></g></svg></figure></div><script type="x-template" id="template-diagram-neighbors-offset"><div id="diagram-neighbors-offset" class="float-container">
<pre id="neighbors-offset-code" class="column neighbors-code">var {{variant.replace('_', '')}}_direction_differences = [<span v-for="parity in [0,1]"><br>    // {{['even','odd'][parity]}} {{parityField}}s <br>    [<span v-for="(hex, index) in neighbors" v-bind:key="index"><span v-bind:class="{highlight:highlight &amp;&amp; highlightParity === parity &amp;&amp; hex.toString()===highlight.toString()}" v-on:pointerenter="setHighlightWithParity(parity)(hex)">[{{neighbor(hex, parity)}}]</span><span v-if="index%6!==5">, </span><br v-if="index===2"><span v-if="index===2">     </span></span>],</span>
]

function <b>{{variant.replace('_', '')}}</b>_offset_neighbor(hex, direction):
    var parity = hex.{{parityField}} &amp; 1
    var diff = {{variant.replace('_', '')}}_direction_differences[parity][direction]
    return OffsetCoord(hex.col + diff[0], hex.row + diff[1])</pre>
<figure class="float-right"><strong>Pick a grid type:</strong>  <label><input type="radio" v-model="variant" value="odd_r"> odd-r </label><label><input type="radio" v-model="variant" value="even_r"> even-r </label><label><input type="radio" v-model="variant" value="odd_q"> odd-q </label><label><input type="radio" v-model="variant" value="even_q"> even-q </label><br><svg class="neighbors" style="max-width:31.25rem" viewBox="0 0 1200 600"><g v-for="parity in [0,1]" v-bind:style="{transform: `translate(${xTranslate(parity)}px, 300px)`}" fill="white" stroke="black"><g v-bind:class="$root.rotateClass"><a-grid v-bind:hexes="grid" v-bind:setHighlight="setHighlightWithParity(parity)"><g slot-scope="props" v-bind:class="className(props.hex, parity)"><a-hex></a-hex><a-text v-if="props.hex.len() === 0"><tspan x="0" dy="-0.4em">{{ ['EVEN ', 'ODD '][parity] + parityField }}</tspan><tspan x="0" dy="1.5em">ALL {{ {row: "cols", col: "rows"}[parityField] }}</tspan></a-text><a-text v-else="">{{ neighbor(props.hex, parity) }}</a-text></g></a-grid></g></g></svg></figure>
</div></script><p>Using the above lookup tables is the easiest way to to calculate neighbors. It's also possible to <a href="https://www.redblobgames.com/grids/hexagons/derive-hex-neighbor-formula.html">derive these numbers</a>, for those of you who are curious.</p>
<h3 id="neighbors-doubled">
<span>Doubled coordinates</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#neighbors-doubled">#</a>
</h3>
<p>Unlike offset coordinates, the neighbors for doubled coordinates do <em>not</em> depend on which column/row we're on. They're the same everywhere, like axial/cube coordinates. Also unlike offset coordinates, we can safely subtract and add doubled coordinates, which makes them easier to work with than offset coordinates.</p>
<div id="diagram-neighbors-doubled" class="float-container"><pre id="neighbors-doubled-code" class="column neighbors-code">var doublewidth_direction_vectors = [<span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="">DoubledCoord(+2,  0)</span>, </span><span><!----><span class="">DoubledCoord(+1, -1)</span>, </span><span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="">DoubledCoord(-1, -1)</span>, </span><span><!----><span class="highlight">DoubledCoord(-2,  0)</span>, </span><span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="">DoubledCoord(-1, +1)</span>, </span><span><!----><span class="">DoubledCoord(+1, +1)</span>, </span>
]

function doublewidth_add(hex, diff):
    return DoubleCoord(hex.col + diff.col, hex.row + diff.row)

function doublewidth_neighbor(hex, direction):
    var vec = doublewidth_direction_vectors[direction]
    return doublewidth_add(hex, vec)</pre> <figure class="float-right"><strong>Pick a grid type:</strong> <label><input type="radio" value="width">&nbsp;double width&nbsp;</label><label><input type="radio" value="height">&nbsp;double height&nbsp;</label><br><svg viewBox="-279.8076211353316 -279.8076211353316 559.6152422706632 559.6152422706632" class="neighbors" style="max-width: 16.875rem;"><g fill="white" stroke="black" class=" rotate-pointy"><g class="grid"><g transform="translate(-150,-87)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">-2,  0</text></g></g><g transform="translate(-150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">-1, +1</text></g></g><g transform="translate(0,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">-1, -1</text></g></g><g transform="translate(0,0)"><g class="origin"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"> 0,  0</text></g></g><g transform="translate(0,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">+1, +1</text></g></g><g transform="translate(150,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">+1, -1</text></g></g><g transform="translate(150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">+2,  0</text></g></g></g></g> <!----> <!----></svg></figure></div><script type="x-template" id="template-diagram-neighbors-doubled"><div id="diagram-neighbors-doubled" class="float-container">
<pre id="neighbors-doubled-code" class="column neighbors-code">var double{{variant}}_direction_vectors = [<span v-for="(hex, index) in neighbors" v-bind:key="index"><template v-if="index%2===0"><br>    </template><span v-bind:class="{highlight:highlight &amp;&amp; hex.toString()===highlight.toString()}" v-on:pointerenter="setHighlight(hex)">DoubledCoord({{ neighbor(hex) }})</span>, </span>
]

function double{{variant}}_add(hex, diff):
    return DoubleCoord(hex.col + diff.col, hex.row + diff.row)

function double{{variant}}_neighbor(hex, direction):
    var vec = double{{variant}}_direction_vectors[direction]
    return double{{variant}}_add(hex, vec)</pre>
<figure class="float-right"><strong>Pick a grid type:</strong>  <label><input type="radio" v-model="variant" value="width"> double width </label><label><input type="radio" v-model="variant" value="height"> double height </label><br><a-svg class="neighbors" v-bind:orientation-button-scale="0" style="max-width:16.875rem"><a-grid v-bind:hexes="grid" v-bind:setHighlight="setHighlight"><g slot-scope="props" v-bind:class="className(props.hex)"><a-hex></a-hex><a-text>{{ neighbor(props.hex) }}</a-text></g></a-grid></a-svg></figure>
</div></script><h3 id="neighbors-diagonal">
<span>Diagonals</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#neighbors-diagonal">#</a>
</h3>
<div id="diagram-neighbors-diagonal" class="float-container"><div><p>Moving to a “diagonal” space in hex coordinates changes one of the 3 cube coordinates by ±2 and the other two by ∓1 (the sum must remain 0).</p> <pre class="neighbors-code">var cube_diagonal_vectors = [
    <span><span class="">Cube(+2, -1, -1)</span>, <!----><!----></span><span><span class="">Cube(+1, -2, +1)</span>, <!----><!----></span><span><span class="">Cube(-1, -1, +2)</span>, <br><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span><span class="highlight">Cube(-2, +1, +1)</span>, <!----><!----></span><span><span class="">Cube(-1, +2, -1)</span>, <!----><!----></span><span><span class="">Cube(+1, +1, -2)</span>, <!----><!----></span>
]

function cube_diagonal_neighbor(cube, direction):
    return cube_add(cube, cube_diagonal_vectors[direction])</pre> <p>As before, you can convert these into axial by dropping one of the three coordinates, or convert to offset/doubled by precalculating the results.</p></div> <figure class="float-right"><svg viewBox="-420 -420 840 840" class="neighbors" style="max-width: 19.1rem;"><g fill="white" stroke="black" class=" rotate-pointy"><g class="grid"><g transform="translate(-150,-87)"><g class="faded"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-150,87)"><g class="faded"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(0,-173)"><g class="faded"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(0,0)"><g class="origin"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">q</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">r</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">s</text></g></g></g></g><g transform="translate(0,173)"><g class="faded"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(150,-87)"><g class="faded"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(150,87)"><g class="faded"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(300,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(150,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-150,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(-300,0)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g></g></g> <g transform="translate(420,420) scale(0.75)"><g transform="translate(-175,-50) scale(0.5)" class="toggle-orientation"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em">flat</text></g> <g transform="translate(-75,-50) rotate(-30) scale(0.5)" class="toggle-orientation selected"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em" transform="rotate(30)">pointy</text></g></g> <!----></svg></figure></div><script type="x-template" id="template-diagram-neighbors-diagonal"><div id="diagram-neighbors-diagonal" class="float-container">
<div>
<p>Moving to a “diagonal” space in hex coordinates changes one of the 3 cube coordinates by ±2 and the other two by ∓1 (the sum must remain 0).</p>
<pre class="neighbors-code">var cube_diagonal_vectors = [
    <span v-for="(hex, index) in neighbors" v-bind:key="index"><span v-bind:class="{highlight:highlight &amp;&amp; hex.toString()===highlight.toString()}" v-on:pointerenter="setHighlight(hex)">Cube({{hex.q | signed}}, {{hex.r | signed}}, {{hex.s | signed}})</span>, <br v-if="index===2"><span v-if="index===2">    </span></span>
]

function cube_diagonal_neighbor(cube, direction):
    return cube_add(cube, cube_diagonal_vectors[direction])</pre>
<p>As before, you can convert these into axial by dropping one of the three coordinates, or convert to offset/doubled by precalculating the results.</p>
</div>
<figure class="float-right"><a-svg class="neighbors" v-bind:orientation-button-scale="0.75" style="max-width:19.1rem"><a-grid v-bind:hexes="grid" v-bind:setHighlight="setHighlight"><g slot-scope="props" v-bind:class="className(props.hex)"><a-hex></a-hex><a-cube-label v-bind:labels="props.hex.len()===0? ['q','r','s']:[props.hex.q,props.hex.r,props.hex.s]"></a-cube-label></g></a-grid></a-svg></figure>
</div></script></section><section><h2 id="distances">
<span><a href="https://www.redblobgames.com/grids/hexagons/#distances">Distances</a></span><a class="anchor" href="https://www.redblobgames.com/grids/hexagons/#distances">#</a>
</h2>
<h3 id="distances-cube">
<span>Cube coordinates</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#distances-cube">#</a>
</h3>
<div class="float-container">
<div>
<p>Since cube hexagonal coordinates are based on 3D cube coordinates, we can <em>adapt</em> the distance calculation to work on hexagonal grids. Each hexagon corresponds to a cube in 3D space. Adjacent hexagons are distance 1 apart in the hex grid but distance 2 apart in the cube grid. For every 2 steps in the cube grid, we need only 1 step in the hex grid. In the 3D cube grid, Manhattan distances are <code>abs(dx) + abs(dy) + abs(dz)</code>. The distance on a hex grid is half that:</p>
<pre>function cube_subtract(a, b):
    return Cube(a.q - b.q, a.r - b.r, a.s - b.s)

function cube_distance(a, b):
    var vec = cube_subtract(a, b)
    return (abs(vec.q) + abs(vec.r) + abs(vec.s)) / 2
    // or: (abs(a.q - b.q) + abs(a.r - b.r) + abs(a.s - b.s)) / 2</pre>
<p>An equivalent way to write this is by noting that one of the three coordinates must be the sum of the other two, then picking that one as the distance. You may prefer the “divide by two” form above, or the “max” form here, but they give the same result:</p>
<pre>function cube_subtract(a, b):
    return Cube(a.q - b.q, a.r - b.r, a.s - b.s)

function cube_distance(a, b):
    var vec = cube_subtract(a, b)
    return max(abs(vec.q), abs(vec.r), abs(vec.s))
    // or: max(abs(a.q - b.q), abs(a.r - b.r), abs(a.s - b.s))</pre>
<p>The maximum of the three coordinates is the distance. You can also use the max of <code>abs(vec.q-vec.r), abs(vec.r-vec.s),
          abs(vec.s-vec.q)</code> to figure out which of the 6 “wedges” a hex is in; see <a href="https://www.redblobgames.com/grids/hexagons/directions.html">diagrams here</a>.</p>
</div>
<figure id="diagram-distances" class="float-right"><svg viewBox="-799.4228634059948 -799.4228634059948 1598.8457268119896 1598.8457268119896" style="max-width: 37.5rem;"><g fill="white" stroke="black" class=" rotate-pointy"><g class="grid"><g transform="translate(-600,-346)"><g class="d4 q-axis-max s-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+4</text></g></g></g></g><g transform="translate(-600,-173)"><g class="d4 q-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(-600,0)"><g class="d4 q-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(-600,173)"><g class="d4 q-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-600,346)"><g class="d4 q-axis-max r-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(-450,-433)"><g class="d4 s-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+4</text></g></g></g></g><g transform="translate(-450,-260)"><g class="highlight d3 q-axis-max s-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(-450,-87)"><g class="highlight d3 q-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(-450,87)"><g class="highlight d3 q-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-450,260)"><g class="highlight d3 q-axis-max r-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(-450,433)"><g class="d4 r-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(-300,-520)"><g class="d4 s-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+4</text></g></g></g></g><g transform="translate(-300,-346)"><g class="highlight d3 s-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(-300,-173)"><g class="d2 q-axis-max s-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(-300,0)"><g class="d2 q-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-300,173)"><g class="d2 q-axis-max r-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(-300,346)"><g class="highlight d3 r-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(-300,520)"><g class="d4 r-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(-150,-606)"><g class="d4 s-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+4</text></g></g></g></g><g transform="translate(-150,-433)"><g class="highlight d3 s-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(-150,-260)"><g class="d2 s-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(-150,-87)"><g class="d1 q-axis-max s-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-150,87)"><g class="d1 q-axis-max r-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(-150,260)"><g class="d2 r-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(-150,433)"><g class="highlight d3 r-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(-150,606)"><g class="d4 r-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(0,-693)"><g class="d4 r-axis-max s-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+4</text></g></g></g></g><g transform="translate(0,-520)"><g class="highlight d3 r-axis-max s-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(0,-346)"><g class="d2 r-axis-max s-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(0,-173)"><g class="d1 r-axis-max s-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(0,0)"><g class="d0 q-axis-max r-axis-max s-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">q</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">r</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">s</text></g></g></g></g><g transform="translate(0,173)"><g class="d1 r-axis-max s-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(0,346)"><g class="d2 r-axis-max s-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(0,520)"><g class="highlight d3 r-axis-max s-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(0,693)"><g class="d4 r-axis-max s-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-4</text></g></g></g></g><g transform="translate(150,-606)"><g class="d4 r-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(150,-433)"><g class="highlight d3 r-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(150,-260)"><g class="d2 r-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(150,-87)"><g class="d1 q-axis-max r-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(150,87)"><g class="d1 q-axis-max s-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(150,260)"><g class="d2 s-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(150,433)"><g class="highlight d3 s-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(150,606)"><g class="d4 s-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-4</text></g></g></g></g><g transform="translate(300,-520)"><g class="d4 r-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(300,-346)"><g class="highlight d3 r-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(300,-173)"><g class="d2 q-axis-max r-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(300,0)"><g class="d2 q-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(300,173)"><g class="d2 q-axis-max s-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(300,346)"><g class="highlight d3 s-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(300,520)"><g class="d4 s-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-4</text></g></g></g></g><g transform="translate(450,-433)"><g class="d4 r-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(450,-260)"><g class="highlight d3 q-axis-max r-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(450,-87)"><g class="highlight d3 q-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(450,87)"><g class="highlight d3 q-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(450,260)"><g class="highlight d3 q-axis-max s-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(450,433)"><g class="d4 s-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-4</text></g></g></g></g><g transform="translate(600,-346)"><g class="d4 q-axis-max r-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(600,-173)"><g class="d4 q-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(600,0)"><g class="d4 q-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(600,173)"><g class="d4 q-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(600,346)"><g class="d4 q-axis-max s-axis-max"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-4</text></g></g></g></g></g></g> <g transform="translate(799.4228634059948,799.4228634059948) scale(1)"><g transform="translate(-175,-50) scale(0.5)" class="toggle-orientation"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em">flat</text></g> <g transform="translate(-75,-50) rotate(-30) scale(0.5)" class="toggle-orientation selected"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em" transform="rotate(30)">pointy</text></g></g> <!----></svg></figure><script type="x-template" id="template-diagram-distances"><figure id="diagram-distances" class="float-right"><a-svg style="max-width:37.5rem"><a-grid v-bind:hexes="grid" v-bind:setHighlight="setHighlight"><g slot-scope="props" v-bind:class="className(props.hex)"><a-hex></a-hex><a-cube-label v-bind:labels="props.hex.len()===0? ['q','r','s']:[props.hex.q,props.hex.r,props.hex.s]"></a-cube-label></g></a-grid></a-svg></figure></script><p>Xiangguo Li's 2013 paper <a href="https://scholar.google.com/scholar?q=Storage+and+addressing+scheme+for+practical+hexagonal+image+processing"><em>Storage and addressing scheme for practical hexagonal image processing.</em></a><sup class="print-endnote">[18]</sup> (<a href="https://doi.org/10.1117/1.JEI.22.1.010502">DOI</a><sup class="print-endnote">[19]</sup>) gives a formula for Euclidean distance, which can be adapted to axial coordinates: <code>sqrt(dq² + dr² + dq*dr)</code>.<!-- TODO: ds∧2 for cube coordinates, and there should be a version for doubled coordinates, so maybe make a separate cartesian distance section --></p>
</div>
<h3 id="distances-axial">
<span>Axial coordinates</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#distances-axial">#</a>
</h3>
<p>In the axial system, the third coordinate is implicit. We can always <a href="https://www.redblobgames.com/grids/hexagons/#conversions">convert</a> axial to cube to calculate distance:</p>
<pre>function axial_distance(a, b):
    var ac = axial_to_cube(a)
    var bc = axial_to_cube(b)
    return cube_distance(ac, bc)</pre>
<p>Once we inline those functions it ends up as:</p>
<pre>function axial_distance(a, b):
    return (abs(a.q - b.q) 
          + abs(a.q + a.r - b.q - b.r)
          + abs(a.r - b.r)) / 2</pre>
<p>which can also be written:</p>
<pre>function axial_subtract(a, b):
    return Hex(a.q - b.q, a.r - b.r)

function axial_distance(a, b):
    var vec = axial_subtract(a, b)
    return (abs(vec.q)
          + abs(vec.q + vec.r)
          + abs(vec.r)) / 2</pre>
<p>There are lots of different ways to write hex distance in axial coordinates. No matter which way you write it, <em>axial hex distance is derived from the Mahattan distance on cubes</em>. For example, the <a href="https://web.archive.org/web/20210302023226/http://3dmdesign.com/development/hexmap-coordinates-the-easy-way">“difference of differences”</a><sup class="print-endnote">[20]</sup> formula results from writing <code>a.q + a.r - b.q - b.r</code> as <code>a.q - b.q + a.r - b.r</code>, and using “max” form instead of the “divide by two” form of <code>cube_distance</code>. They're all equivalent once you see the connection to cube coordinates.</p>
<h3 id="distances-offset">
<span>Offset coordinates</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#distances-offset">#</a>
</h3>
<p>As with axial coordinates, we'll <a href="https://www.redblobgames.com/grids/hexagons/#conversions">convert</a> offset coordinates to axial/cube coordinates, then use axial/cube distance.</p>
<pre>function offset_distance(a, b):
    var ac = offset_to_axial(a)
    var bc = offset_to_axial(b)
    return axial_distance(ac, bc)</pre>
<p>We'll use the same pattern for many of the algorithms: convert offset to axial/cube, run the axial/cube version of the algorithm, and convert any axial/cube results back to offset coordinates. There are also more direct formulas for distances; see <a href="https://ondras.github.io/rot.js/manual/#hex/indexing">the rot.js manual</a><sup class="print-endnote">[21]</sup> for a formula in the "Odd shift" section.</p>
<h3 id="distances-doubled">
<span>Doubled coordinates</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#distances-doubled">#</a>
</h3>
<p>Although converting doubled coordinates to axial/cube coordinates works, there's also a direct formula for distances, from the <a href="https://ondras.github.io/rot.js/manual/#hex/indexing">rot.js manual</a><sup class="print-endnote">[22]</sup>:</p>
<pre>function doublewidth_distance(a, b):
    var dcol = abs(a.col - b.col)
    var drow = abs(a.row - b.row)
    return drow + max(0, (dcol-drow)/2)

function doubleheight_distance(a, b):
    var dcol = abs(a.col - b.col)
    var drow = abs(a.row - b.row)
    return dcol + max(0, (drow−dcol)/2)</pre></section><section><h2 id="line-drawing">
<span><a href="https://www.redblobgames.com/grids/hexagons/#line-drawing">Line drawing</a></span><a class="anchor" href="https://www.redblobgames.com/grids/hexagons/#line-drawing">#</a>
</h2>
<div id="diagram-line-drawing" class="float-container"><p>How do we draw a line from one hex to another? I use <a href="https://www.redblobgames.com/grids/line-drawing/">linear interpolation for line drawing</a>. Evenly <em>sample</em> the line at <code>N+1</code> points, and figure out which hexes those samples are in.</p> <figure class="float-right"><svg viewBox="-1145.8330249197702 -1145.8330249197702 2291.6660498395404 2291.6660498395404" style="max-width: 37.5rem;"><g fill="white" stroke="black" class=" rotate-pointy"><g class="grid"><g transform="translate(-900,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-900,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-900,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-900,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-900,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-900,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-900,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,-433)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,-346)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-260)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-173)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-87)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,87)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-1039)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,173)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,1039)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,260)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,346)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,433)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,520)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(900,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(900,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(900,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(900,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(900,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(900,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(900,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g></g><path d="M -750 -433.0127018922193 L 600 519.6152422706632" class="path"></path><circle r="15" cx="-749.99985" cy="-433.0122688795174" fill="hsl(240, 50%, 50%)" stroke="hsl(0, 0%, 100%, 0.5)" stroke-width="10"></circle><circle r="15" cx="-614.9998499999999" cy="-337.7494744632291" fill="hsl(240, 50%, 50%)" stroke="hsl(0, 0%, 100%, 0.5)" stroke-width="10"></circle><circle r="15" cx="-479.99985" cy="-242.4866800469409" fill="hsl(240, 50%, 50%)" stroke="hsl(0, 0%, 100%, 0.5)" stroke-width="10"></circle><circle r="15" cx="-344.9998499999999" cy="-147.22388563065266" fill="hsl(240, 50%, 50%)" stroke="hsl(0, 0%, 100%, 0.5)" stroke-width="10"></circle><circle r="15" cx="-209.99984999999998" cy="-51.96109121436443" fill="hsl(240, 50%, 50%)" stroke="hsl(0, 0%, 100%, 0.5)" stroke-width="10"></circle><circle r="15" cx="-74.99985" cy="43.30170320192381" fill="hsl(240, 50%, 50%)" stroke="hsl(0, 0%, 100%, 0.5)" stroke-width="10"></circle><circle r="15" cx="60.000149999999984" cy="138.56449761821204" fill="hsl(240, 50%, 50%)" stroke="hsl(0, 0%, 100%, 0.5)" stroke-width="10"></circle><circle r="15" cx="195.00014999999993" cy="233.8272920345003" fill="hsl(240, 50%, 50%)" stroke="hsl(0, 0%, 100%, 0.5)" stroke-width="10"></circle><circle r="15" cx="330.0001500000001" cy="329.0900864507886" fill="hsl(240, 50%, 50%)" stroke="hsl(0, 0%, 100%, 0.5)" stroke-width="10"></circle><circle r="15" cx="465.00015" cy="424.3528808670768" fill="hsl(240, 50%, 50%)" stroke="hsl(0, 0%, 100%, 0.5)" stroke-width="10"></circle><circle r="15" cx="600.00015" cy="519.615675283365" fill="hsl(240, 50%, 50%)" stroke="hsl(0, 0%, 100%, 0.5)" stroke-width="10"></circle></g> <g transform="translate(1145.8330249197702,1145.8330249197702) scale(1.3)"><g transform="translate(-175,-50) scale(0.5)" class="toggle-orientation"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em">flat</text></g> <g transform="translate(-75,-50) rotate(-30) scale(0.5)" class="toggle-orientation selected"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em" transform="rotate(30)">pointy</text></g></g> <!----></svg></figure><div><ol><li>First we calculate <code>N</code>=10 to be the <a href="https://www.redblobgames.com/grids/hexagons/#distances">hex distance</a> between the endpoints.</li> <li>Then evenly sample <code>N+1</code> points between point <code>A</code> and point <code>B</code>. Using linear interpolation, each point will be <code>A + (B - A) * 1.0/N * i</code>, for values of <code>i</code> from <code>0</code> to <code>N</code>, inclusive. In the diagram these sample points are the dark blue dots. This results in floating point coordinates.</li> <li>Convert each sample point (float) back into a hex (int). The algorithm is called <a href="https://www.redblobgames.com/grids/hexagons/#rounding">cube_round</a>.</li></ol></div> <p>Putting these together to draw a line from <code>A</code> to <code>B</code>:</p> <pre>function lerp(a, b, t): # for floats
    return a + (b - a) * t

function cube_lerp(a, b, t): # for hexes
    return Cube(lerp(a.q, b.q, t),
                lerp(a.r, b.r, t),
                lerp(a.s, b.s, t))

function cube_linedraw(a, b):
    var N = cube_distance(a, b)
    var results = []
    for each 0 ≤ i ≤ N:
        results.append(cube_round(cube_lerp(a, b, 1.0/N * i)))
    return results</pre> <p>More notes:</p> <ul><li>There are times when <code>cube_lerp</code> will return a point that's exactly on the side between two hexes. Then <code>cube_round</code> will push it one way or the other. The <em>lines will look better</em> if it's always pushed in the same direction. You can do this by adding an "epsilon" hex <code>Cube(1e-6, 2e-6, -3e-6)</code> to one or both of the endpoints before starting the loop. This will "nudge" the line in one direction to avoid landing on side boundaries.</li> <li>The <a href="https://en.wikipedia.org/wiki/Digital_differential_analyzer_(graphics_algorithm)">DDA Algorithm</a><sup class="print-endnote">[23]</sup> on square grids sets <code>N</code> to the max of the distance along each axis. We do the same in cube space, which happens to be the same as the hex grid distance.</li> <li>There are times when this algorithm slightly goes outside the marked hexagons (<a href="https://www.redblobgames.com/grids/hexagons/blog/hex-line-outside-hexagons.png">example</a>). I haven't come up with an easy fix for this.</li> <li>The <code>cube_lerp</code> function needs to return a cube with float coordinates. If you're working in a statically typed language, you won't be able to use the <code>Cube</code> type but instead could define <code>FloatCube</code>, or inline the function into the line drawing code if you want to avoid defining another type.</li> <li>You can optimize the code by inlining <code>cube_lerp</code>, and then calculating <code>B.q-A.q</code>, <code>B.r-A.r</code>, <code>B.s-A.s</code>, and <code>1.0/N</code> outside the loop. Multiplication can be turned into repeated addition. You'll end up with something like the DDA algorithm.</li> <li>This code can be adapted to work with axial coordinates — define <code>axial_lerp</code> and then use <code>axial_distance</code>, <code>axial_round</code> in <code>axial_linedraw</code>. It is likely it can work with doubled coordinates as well.</li> <li>I use axial or cube coordinates for line drawing, but if you want something for offset coordinates, take a look at <a href="https://zvold.blogspot.com/2010/02/line-of-sight-on-hexagonal-grid.html">this article</a><sup class="print-endnote">[24]</sup>.</li> <li>There are many variants of line drawing. Sometimes you'll want <a href="https://stackoverflow.com/questions/3233522/elegant-clean-special-case-straight-line-grid-traversal-algorithm">"super cover"</a><sup class="print-endnote">[25]</sup>. Someone sent me hex super cover line drawing code but I haven't studied it yet.</li> <li>A paper from Yong-Kui, Liu, <em>The Generation of Straight Lines on Hexagonal Grids</em>, Computer Graphics Forum 12-1 (Feb 1993) (<a href="https://doi.org/10.1111/1467-8659.1210027">DOI</a><sup class="print-endnote">[26]</sup>), describes a variant of Bresenham's line drawing algorithm for hexagonal grids. The same author has another paper, <em>The Generation of Circular Arcs on Hexagonal Grids</em> (<a href="https://doi.org/10.1111/1467-8659.1210021">DOI</a><sup class="print-endnote">[27]</sup>).</li></ul></div><script type="x-template" id="template-diagram-line-drawing"><div id="diagram-line-drawing" class="float-container">
<p>How do we draw a line from one hex to another? I use <a href="/grids/line-drawing/">linear interpolation for line drawing</a>. Evenly <em>sample</em> the line at <code>N+1</code> points, and figure out which hexes those samples are in.</p>
<figure class="float-right"><a-svg style="max-width:37.5rem" v-bind:orientation-button-scale="1.3"><a-grid v-bind:hexes="grid" v-bind:setHighlight="setHighlight"><g slot-scope="props" v-bind:class="className(props.hex)"><a-hex></a-hex></g></a-grid><path class="path" v-bind:d="line"></path><circle v-for="point in interpolationPoints" r="15" v-bind:cx="center(point).x" v-bind:cy="center(point).y" fill="hsl(240, 50%, 50%)" stroke="hsl(0, 0%, 100%, 0.5)" stroke-width="10"></circle></a-svg></figure><div><ol>
<li>First we calculate <code>N</code>={{N}} to be the <a href="#distances">hex distance</a> between the endpoints.</li>
<li>Then evenly sample <code>N+1</code> points between point <code>A</code> and point <code>B</code>. Using linear interpolation, each point will be <code>A + (B - A) * 1.0/N * i</code>, for values of <code>i</code> from <code>0</code> to <code>N</code>, inclusive. In the diagram these sample points are the dark blue dots. This results in floating point coordinates.</li>
<li>Convert each sample point (float) back into a hex (int). The algorithm is called <a href="#rounding">cube_round</a>.</li>
</ol></div>
<p>Putting these together to draw a line from <code>A</code> to <code>B</code>:</p>
<pre>function lerp(a, b, t): # for floats
    return a + (b - a) * t

function cube_lerp(a, b, t): # for hexes
    return Cube(lerp(a.q, b.q, t),
                lerp(a.r, b.r, t),
                lerp(a.s, b.s, t))

<!--
# Adjust one endpoint to break ties, make lines look better
ɛ = 1e-6
a.x += ɛ; a.y += ɛ; a.z -= 2*ɛ;
-->function cube_linedraw(a, b):
    var N = cube_distance(a, b)
    var results = []
    for each 0 ≤ i ≤ N:
        results.append(cube_round(cube_lerp(a, b, 1.0/N * i)))
    return results</pre>
<!--
     (Note: originally I had recommended using
              <code>N = max(abs(dx - dy), abs(dy - dz), abs(dz -
              dx))</code> but Theodore Lief Gannon ‏(<a
              href="https://twitter.com/dour">@dour</a>) pointed out
              that the distance works better.)
              --><p>More notes:</p>
<ul>
<li>There are times when <code>cube_lerp</code> will return a point that's exactly on the side between two hexes. Then <code>cube_round</code> will push it one way or the other. The <em>lines will look better</em> if it's always pushed in the same direction. You can do this by adding an "epsilon" hex <code>Cube(1e-6, 2e-6, -3e-6)</code> to one or both of the endpoints before starting the loop. This will "nudge" the line in one direction to avoid landing on side boundaries.</li>
<li>The <a href="https://en.wikipedia.org/wiki/Digital_differential_analyzer_(graphics_algorithm)">DDA Algorithm</a><sup class="print-endnote">[23]</sup> on square grids sets <code>N</code> to the max of the distance along each axis. We do the same in cube space, which happens to be the same as the hex grid distance.</li>
<li>There are times when this algorithm slightly goes outside the marked hexagons (<a href="blog/hex-line-outside-hexagons.png">example</a>). I haven't come up with an easy fix for this.</li>
<li>The <code>cube_lerp</code> function needs to return a cube with float coordinates. If you're working in a statically typed language, you won't be able to use the <code>Cube</code> type but instead could define <code>FloatCube</code>, or inline the function into the line drawing code if you want to avoid defining another type.</li>
<li>You can optimize the code by inlining <code>cube_lerp</code>, and then calculating <code>B.q-A.q</code>, <code>B.r-A.r</code>, <code>B.s-A.s</code>, and <code>1.0/N</code> outside the loop. Multiplication can be turned into repeated addition. You'll end up with something like the DDA algorithm.</li>
<li>This code can be adapted to work with axial coordinates — define <code>axial_lerp</code> and then use <code>axial_distance</code>, <code>axial_round</code> in <code>axial_linedraw</code>. It is likely it can work with doubled coordinates as well.</li>
<li>I use axial or cube coordinates for line drawing, but if you want something for offset coordinates, take a look at <a href="https://zvold.blogspot.com/2010/02/line-of-sight-on-hexagonal-grid.html">this article</a><sup class="print-endnote">[24]</sup>.</li>
<li>There are many variants of line drawing. Sometimes you'll want <a href="https://stackoverflow.com/questions/3233522/elegant-clean-special-case-straight-line-grid-traversal-algorithm">"super cover"</a><sup class="print-endnote">[25]</sup>. Someone sent me hex super cover line drawing code but I haven't studied it yet.</li>
<li>A paper from Yong-Kui, Liu, <em>The Generation of Straight Lines on Hexagonal Grids</em>, Computer Graphics Forum 12-1 (Feb 1993) (<a href="https://doi.org/10.1111/1467-8659.1210027">DOI</a><sup class="print-endnote">[26]</sup>), describes a variant of Bresenham's line drawing algorithm for hexagonal grids. The same author has another paper, <em>The Generation of Circular Arcs on Hexagonal Grids</em> (<a href="https://doi.org/10.1111/1467-8659.1210021">DOI</a><sup class="print-endnote">[27]</sup>).</li>
</ul>
</div></script></section><section><h2 id="range">
<span><a href="https://www.redblobgames.com/grids/hexagons/#range">Movement Range</a></span><a class="anchor" href="https://www.redblobgames.com/grids/hexagons/#range">#</a>
</h2>
<h3 id="range-coordinate">
<span>Coordinate range</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#range-coordinate">#</a>
</h3>
<div class="float-container">
<div>
<p>Given a hex <code>center</code> and a range N, which hexes are within N steps from it?</p>
<p>We can work backwards from the <a href="https://www.redblobgames.com/grids/hexagons/#distances">hex distance</a> formula, <code>distance = max(abs(q), abs(r), abs(s))</code>. To find all hexes within N steps, we need <code>max(abs(q), abs(r), abs(s)) ≤ N</code>. This means we need <em>all</em> three to be true: <code>abs(q) ≤ N</code> and <code>abs(r) ≤ N</code> and <code>abs(s) ≤ N</code>. Removing absolute value, we get <code class="q">-N ≤ q ≤ +N</code> and <code class="r">-N ≤ r ≤ +N</code> and <code class="s">-N ≤ s ≤ +N</code>. In code it's a nested loop:</p>
<pre>var results = []
for each -N ≤ q ≤ +N:
    for each -N ≤ r ≤ +N:
        for each -N ≤ s ≤ +N:
            if q + r + s == 0:
                results.append(cube_add(center, Cube(q, r, s)))</pre>
<p>This loop will work but it's somewhat inefficient. Of all the values of <code>s</code> we loop over, only one of them actually satisfies the <code>q + r + s = 0</code> constraint on cubes. Instead, let's directly calculate the value of <code>s</code> that satisfies the constraint:</p>
<pre>var results = []
for each -N ≤ q ≤ +N:
    for each max(-N, -q-N) ≤ r ≤ min(+N, -q+N):
        var s = -q-r
        results.append(cube_add(center, Cube(q, r, s)))</pre>
<p>This loop iterates over exactly the needed coordinates. In the diagram, each range is a pair of lines. Each line is an inequality (a <a href="http://devmag.org.za/2013/08/31/geometry-with-hex-coordinates/">half-plane</a><sup class="print-endnote">[28]</sup>). We pick all the hexes that satisfy all six inequalities. This loop also works nicely with axial coordinates:</p>
<pre>var results = []
for each -N ≤ q ≤ +N:
    for each max(-N, -q-N) ≤ r ≤ min(+N, -q+N):
        results.append(axial_add(center, Hex(q, r)))</pre>
</div>
<figure id="diagram-range-coordinate" class="float-right"><svg viewBox="-972.6279441628825 -972.6279441628825 1945.255888325765 1945.255888325765" style="max-width: 31.25rem;"><g fill="white" stroke="black" class=" rotate-pointy"><g class="grid"><g transform="translate(-750,-433)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+5</text></g></g></g></g><g transform="translate(-750,-260)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+4</text></g></g></g></g><g transform="translate(-750,-87)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(-750,87)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(-750,260)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-750,433)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(-600,-520)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+5</text></g></g></g></g><g transform="translate(-600,-346)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+4</text></g></g></g></g><g transform="translate(-600,-173)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(-600,0)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(-600,173)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-600,346)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(-600,520)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(-450,-606)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+5</text></g></g></g></g><g transform="translate(-450,-433)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+4</text></g></g></g></g><g transform="translate(-450,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(-450,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(-450,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-450,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(-450,433)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(-450,606)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(-300,-693)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+5</text></g></g></g></g><g transform="translate(-300,-520)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+4</text></g></g></g></g><g transform="translate(-300,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(-300,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(-300,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-300,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(-300,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(-300,520)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(-300,693)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(-150,-779)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+5</text></g></g></g></g><g transform="translate(-150,-606)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+4</text></g></g></g></g><g transform="translate(-150,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(-150,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(-150,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(-150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(-150,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(-150,606)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(-150,779)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-4</text></g></g></g></g><g transform="translate(0,-866)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+5</text></g></g></g></g><g transform="translate(0,-693)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+4</text></g></g></g></g><g transform="translate(0,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(0,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(0,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(0,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">q</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">r</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">s</text></g></g></g></g><g transform="translate(0,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(0,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(0,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(0,693)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-4</text></g></g></g></g><g transform="translate(0,866)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-5</text></g></g></g></g><g transform="translate(150,-779)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+4</text></g></g></g></g><g transform="translate(150,-606)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(150,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(150,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(150,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(150,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(150,606)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-4</text></g></g></g></g><g transform="translate(150,779)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-5</text></g></g></g></g><g transform="translate(300,-693)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(300,-520)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(300,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(300,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(300,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(300,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(300,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(300,520)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-4</text></g></g></g></g><g transform="translate(300,693)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-5</text></g></g></g></g><g transform="translate(450,-606)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(450,-433)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(450,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(450,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(450,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(450,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(450,433)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-4</text></g></g></g></g><g transform="translate(450,606)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-5</text></g></g></g></g><g transform="translate(600,-520)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(600,-346)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(600,-173)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(600,0)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(600,173)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(600,346)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-4</text></g></g></g></g><g transform="translate(600,520)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-5</text></g></g></g></g><g transform="translate(750,-433)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(750,-260)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(750,-87)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(750,87)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(750,260)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-4</text></g></g></g></g><g transform="translate(750,433)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-5</text></g></g></g></g></g><g transform="rotate(-30) translate(0,525)" class="s"><line x1="-1000" y1="0" x2="1000" y2="0" stroke-width="5"></line><text y="-15" transform="" class="inequality">s ≥ -3</text></g><g transform="rotate(30) translate(0,525)" class="r"><line x1="-1000" y1="0" x2="1000" y2="0" stroke-width="5"></line><text y="-15" transform="" class="inequality">r ≤ +3</text></g><g transform="rotate(90) translate(0,525)" class="q"><line x1="-1000" y1="0" x2="1000" y2="0" stroke-width="5"></line><text y="-15" transform="" class="inequality">q ≥ -3</text></g><g transform="rotate(150) translate(0,525)" class="s"><line x1="-1000" y1="0" x2="1000" y2="0" stroke-width="5"></line><text y="-15" transform="rotate(180) translate(0,55)" class="inequality">s ≤ +3</text></g><g transform="rotate(210) translate(0,525)" class="r"><line x1="-1000" y1="0" x2="1000" y2="0" stroke-width="5"></line><text y="-15" transform="rotate(180) translate(0,55)" class="inequality">r ≥ -3</text></g><g transform="rotate(270) translate(0,525)" class="q"><line x1="-1000" y1="0" x2="1000" y2="0" stroke-width="5"></line><text y="-15" transform="rotate(180) translate(0,55)" class="inequality">q ≤ +3</text></g></g> <g transform="translate(972.6279441628825,972.6279441628825) scale(1.5)"><g transform="translate(-175,-50) scale(0.5)" class="toggle-orientation"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em">flat</text></g> <g transform="translate(-75,-50) rotate(-30) scale(0.5)" class="toggle-orientation selected"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em" transform="rotate(30)">pointy</text></g></g> <g class="axes" style="transform: translate(-825px, 775px) scale(1);"><g class=" rotate-pointy"><g transform="translate(135,0)"><path transform="translate(-22.5,0.0) rotate(180)" d="M 0 0 l 20 20 l 0 -10 l 77.5 0 l -3 -10 l 3 -10 l -77.5 0 l 0 -10 Z" class="q"></path> <text dy="0.4em" class="unrotate">+q</text></g> <g transform="translate(-67.49999999999997,116.91342951089922)"><path transform="translate(11.2,-19.5) rotate(-60.00000000000001)" d="M 0 0 l 20 20 l 0 -10 l 77.49999999999999 0 l -3 -10 l 3 -10 l -77.49999999999999 0 l 0 -10 Z" class="r"></path> <text dy="0.4em" class="unrotate">+r</text></g> <g transform="translate(-67.50000000000006,-116.91342951089918)"><path transform="translate(11.3,19.5) rotate(59.99999999999997)" d="M 0 0 l 20 20 l 0 -10 l 77.5 0 l -3 -10 l 3 -10 l -77.5 0 l 0 -10 Z" class="s"></path> <text dy="0.4em" class="unrotate">+s</text></g> <g transform="translate(-135,1.6532731788489267e-14)"><path transform="translate(22.5,-0.0) rotate(-7.0167092985348775e-15)" d="M 0 0 l 20 20 l 0 -10 l 77.5 0 l -3 -10 l 3 -10 l -77.5 0 l 0 -10 Z" class="q"></path> <text dy="0.4em" class="unrotate">-q</text></g> <g transform="translate(67.50000000000001,-116.9134295108992)"><path transform="translate(-11.3,19.5) rotate(120.00000000000001)" d="M 0 0 l 20 20 l 0 -10 l 77.5 0 l -3 -10 l 3 -10 l -77.5 0 l 0 -10 Z" class="r"></path> <text dy="0.4em" class="unrotate">-r</text></g> <g transform="translate(67.50000000000001,116.9134295108992)"><path transform="translate(-11.3,-19.5) rotate(-120.00000000000001)" d="M 0 0 l 20 20 l 0 -10 l 77.5 0 l -3 -10 l 3 -10 l -77.5 0 l 0 -10 Z" class="s"></path> <text dy="0.4em" class="unrotate">-s</text></g></g></g></svg></figure><script type="x-template" id="template-diagram-range-coordinate"><figure id="diagram-range-coordinate" class="float-right"><a-svg style="max-width:31.25rem" axes="-825,775" v-bind:orientation-button-scale="1.5"><a-grid v-bind:hexes="grid" v-bind:setHighlight="setHighlight"><g slot-scope="props" v-bind:class="className(props.hex)"><a-hex></a-hex><a-cube-label v-bind:labels="props.hex.len()===0? ['q','r','s']:[props.hex.q,props.hex.r,props.hex.s]"></a-cube-label></g></a-grid><g v-for="(line, index) in constraints" v-bind:class="line[0]" v-bind:transform="`rotate(${index*60-30}) translate(0,${75+distance*150})`"><line x1="-1000" y1="0" x2="1000" y2="0" stroke-width="5"></line><text v-if="distance &gt; 0" class="inequality" y="-15" v-bind:transform="index &gt;= 3? 'rotate(180) translate(0,55)' : ''">{{line}} {{format(line[2], distance) | signed}}</text></g></a-svg></figure></script>
</div>
<h3 id="range-intersection">
<span>Intersecting ranges</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#range-intersection">#</a>
</h3>
<div class="float-container">
<div>
<p>If you need to find hexes that are in more than one range, you can intersect the ranges before generating a list of hexes.</p>
<p>You can either think of this problem algebraically or geometrically. Algebraically, each hexagonally-shaped region is expressed as inequality constraints of the form <code>-N ≤ dq ≤ +N</code>, and we're going to solve for the intersection of those constraints. Geometrically, each region is a cube in 3D space, and we're going to intersect two cubes in 3D space to form a <a href="https://en.wikipedia.org/wiki/Cuboid">cuboid</a><sup class="print-endnote">[29]</sup> in 3D space, then project back to the q + r + s = 0 plane to get hexes. I'm going to solve it algebraically:</p>
<p>First, we rewrite constraint <code>-N ≤ dq ≤ +N</code> into a more general form, <code>q<sub>min</sub> ≤ q ≤
          q<sub>max</sub></code>, and set <code>q<sub>min</sub> = center.q
          - N</code> and <code>q<sub>max</sub> = center.q + N</code>. We'll do the same for <code>r</code> and <code>s</code>, and end up with this generalization of the code from the previous section:</p>
<pre>var results = []
for each q<sub>min</sub>&nbsp;≤ q ≤ q<sub>max</sub>:
    for each max(r<sub>min</sub>, -q-s<sub>max</sub>) ≤ r ≤ min(r<sub>max</sub>, -q-s<sub>min</sub>):
        results.append(Hex(q, r))</pre>
<p>The intersection of two ranges <code>a ≤ q ≤ b</code> and <code>c ≤ q ≤ d</code> is <code>max(a, c) ≤ q ≤ min(b,
          d)</code>. Since a hex region is expressed as ranges over q, r, s, we can separately intersect each of the q, r, s ranges then use the nested loop to generate a list of hexes in the intersection. For one hex region we set <code>q<sub>min</sub> = H.q - N</code> and <code>q<sub>max</sub> = H.q + N</code> and likewise for <code>r</code> and <code>s</code>. For intersecting two hex regions we set <code>q<sub>min</sub> = max(H<sub>1</sub>.q -
          N, H<sub>2</sub>.q - N)</code> and <code>q<sub>max</sub> =
          min(H<sub>1</sub>.q + N, H<sub>2</sub>.q + N)</code>, and likewise for <code>r</code> and <code>s</code>. The same pattern works for intersecting three or more regions, and can generalize to <a href="http://devmag.org.za/2013/08/31/geometry-with-hex-coordinates/">other shapes</a><sup class="print-endnote">[30]</sup> (triangles, trapezoids, rhombuses, non-regular hexagons).</p>
</div>
<figure id="diagram-range-intersection" class="float-right"><svg viewBox="-1319.0381056766578 -1319.0381056766578 2638.0762113533156 2638.0762113533156" style="max-width: 31.25rem;"><g fill="white" stroke="black" class=" rotate-pointy"><g class="grid"><g transform="translate(-1050,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-1050,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-1050,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-1050,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-1050,87)"><g class="regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-1050,260)"><g class="regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-1050,433)"><g class="regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-1050,606)"><g class="regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-900,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-900,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-900,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-900,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-900,0)"><g class="regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-900,173)"><g class="regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-900,346)"><g class="regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-900,520)"><g class="regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-900,693)"><g class="regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,-779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,-87)"><g class="regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,87)"><g class="regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,260)"><g class="regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,433)"><g class="regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,606)"><g class="regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,779)"><g class="regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,-866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,-173)"><g class="regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,0)"><g class="regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,173)"><g class="regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,346)"><g class="center regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,520)"><g class="regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,693)"><g class="regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,866)"><g class="regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-87)"><g class="regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,87)"><g class="regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,260)"><g class="regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,433)"><g class="regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,606)"><g class="regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,779)"><g class="regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-1039)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-173)"><g class="regionA"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,0)"><g class="regionA regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,173)"><g class="regionA regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,346)"><g class="regionA regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,520)"><g class="regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,693)"><g class="regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,1039)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-1126)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-260)"><g class="regionA"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-87)"><g class="regionA"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,87)"><g class="regionA regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,260)"><g class="regionA regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,433)"><g class="regionA regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,606)"><g class="regionB"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,1126)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-1212)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-1039)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-346)"><g class="regionA"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-173)"><g class="regionA"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,0)"><g class="regionA"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,173)"><g class="regionA"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,346)"><g class="regionA"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,520)"><g class="regionA"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,1039)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,1212)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-1126)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-433)"><g class="regionA"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-260)"><g class="regionA"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-87)"><g class="regionA"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,87)"><g class="highlight regionA"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,260)"><g class="regionA"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,433)"><g class="regionA"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,606)"><g class="regionA"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,1126)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-1039)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-346)"><g class="regionA"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-173)"><g class="regionA"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,0)"><g class="regionA"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,173)"><g class="regionA"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,346)"><g class="regionA"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,520)"><g class="regionA"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,1039)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-260)"><g class="regionA"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-87)"><g class="regionA"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,87)"><g class="regionA"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,260)"><g class="regionA"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,433)"><g class="regionA"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,-866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,-173)"><g class="regionA"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,0)"><g class="regionA"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,173)"><g class="regionA"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,346)"><g class="regionA"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,-779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(900,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(900,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(900,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(900,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(900,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(900,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(900,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(900,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(900,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(1050,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(1050,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(1050,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(1050,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(1050,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(1050,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(1050,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(1050,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g></g></g> <g transform="translate(1319.0381056766578,1319.0381056766578) scale(1.75)"><g transform="translate(-175,-50) scale(0.5)" class="toggle-orientation"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em">flat</text></g> <g transform="translate(-75,-50) rotate(-30) scale(0.5)" class="toggle-orientation selected"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em" transform="rotate(30)">pointy</text></g></g> <!----></svg></figure><script type="x-template" id="template-diagram-range-intersection"><figure id="diagram-range-intersection" class="float-right"><a-svg style="max-width:31.25rem" v-bind:orientation-button-scale="1.75"><a-grid v-bind:hexes="grid" v-bind:setHighlight="setHighlight"><g slot-scope="props" v-bind:class="className(props.hex)"><a-hex></a-hex></g></a-grid></a-svg></figure></script>
</div>
<h3 id="range-obstacles">
<span>Obstacles</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#range-obstacles">#</a>
</h3>
<div class="float-container">
<div>
<p>If there are obstacles, the simplest thing to do is a distance-limited flood fill (<a href="https://www.redblobgames.com/pathfinding/tower-defense/">breadth first search</a>). In the code, <code>fringes[k]</code> is an array of all hexes that can be reached in <code>k</code> steps. Each time through the main loop, we expand level <code>k-1</code> into level <code>k</code>. This works equally well with any of the hex coordinate systems (cube, axial, offset, doubled).</p>
<pre>function hex_reachable(start, movement):
    var visited = set() # set of hexes
    add start to visited
    var fringes = [] # array of arrays of hexes
    fringes.append([start])

    for each 1 &lt; k ≤ movement:
        fringes.append([])
        for each hex in fringes[k-1]:
            for each 0 ≤ dir &lt; 6:
                var neighbor = hex_neighbor(hex, dir)
                if neighbor not in visited and not blocked:
                    add neighbor to visited
                    fringes[k].append(neighbor)

    return visited</pre>
</div>
<figure id="diagram-movement-range" class="float-right"><svg viewBox="-972.6279441628825 -972.6279441628825 1945.255888325765 1945.255888325765" style="max-width: 31.25rem;"><g fill="white" stroke="black" class=" rotate-pointy"><g class="grid"><g transform="translate(-750,-433)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">5</text></g></g><g transform="translate(-750,-260)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">5</text></g></g><g transform="translate(-750,-87)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">5</text></g></g><g transform="translate(-750,87)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">5</text></g></g><g transform="translate(-750,260)"><g class="wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><!----></g></g><g transform="translate(-750,433)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">15</text></g></g><g transform="translate(-600,-520)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">5</text></g></g><g transform="translate(-600,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">4</text></g></g><g transform="translate(-600,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">4</text></g></g><g transform="translate(-600,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">4</text></g></g><g transform="translate(-600,173)"><g class="wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><!----></g></g><g transform="translate(-600,346)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">14</text></g></g><g transform="translate(-600,520)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">14</text></g></g><g transform="translate(-450,-606)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">5</text></g></g><g transform="translate(-450,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">4</text></g></g><g transform="translate(-450,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">3</text></g></g><g transform="translate(-450,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">3</text></g></g><g transform="translate(-450,87)"><g class="wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><!----></g></g><g transform="translate(-450,260)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">13</text></g></g><g transform="translate(-450,433)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">13</text></g></g><g transform="translate(-450,606)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">13</text></g></g><g transform="translate(-300,-693)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">5</text></g></g><g transform="translate(-300,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">4</text></g></g><g transform="translate(-300,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">3</text></g></g><g transform="translate(-300,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">2</text></g></g><g transform="translate(-300,0)"><g class="wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><!----></g></g><g transform="translate(-300,173)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">13</text></g></g><g transform="translate(-300,346)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">12</text></g></g><g transform="translate(-300,520)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">12</text></g></g><g transform="translate(-300,693)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">12</text></g></g><g transform="translate(-150,-779)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">6</text></g></g><g transform="translate(-150,-606)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">5</text></g></g><g transform="translate(-150,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">4</text></g></g><g transform="translate(-150,-260)"><g class="wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><!----></g></g><g transform="translate(-150,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">1</text></g></g><g transform="translate(-150,87)"><g class="wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><!----></g></g><g transform="translate(-150,260)"><g class="wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><!----></g></g><g transform="translate(-150,433)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">11</text></g></g><g transform="translate(-150,606)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">11</text></g></g><g transform="translate(-150,779)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">11</text></g></g><g transform="translate(0,-866)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">7</text></g></g><g transform="translate(0,-693)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">6</text></g></g><g transform="translate(0,-520)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">5</text></g></g><g transform="translate(0,-346)"><g class="wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><!----></g></g><g transform="translate(0,-173)"><g class="path"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">1</text></g></g><g transform="translate(0,0)"><g class="path origin"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">0</text></g></g><g transform="translate(0,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">1</text></g></g><g transform="translate(0,346)"><g class="wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><!----></g></g><g transform="translate(0,520)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">10</text></g></g><g transform="translate(0,693)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">10</text></g></g><g transform="translate(0,866)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">11</text></g></g><g transform="translate(150,-779)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">6</text></g></g><g transform="translate(150,-606)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">5</text></g></g><g transform="translate(150,-433)"><g class="wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><!----></g></g><g transform="translate(150,-260)"><g class="path"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">2</text></g></g><g transform="translate(150,-87)"><g class="wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><!----></g></g><g transform="translate(150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">1</text></g></g><g transform="translate(150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">2</text></g></g><g transform="translate(150,433)"><g class="wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><!----></g></g><g transform="translate(150,606)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">9</text></g></g><g transform="translate(150,779)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">10</text></g></g><g transform="translate(300,-693)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">5</text></g></g><g transform="translate(300,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">4</text></g></g><g transform="translate(300,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">3</text></g></g><g transform="translate(300,-173)"><g class="path"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">3</text></g></g><g transform="translate(300,0)"><g class="wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><!----></g></g><g transform="translate(300,173)"><g class="wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><!----></g></g><g transform="translate(300,346)"><g class="wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><!----></g></g><g transform="translate(300,520)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">8</text></g></g><g transform="translate(300,693)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">9</text></g></g><g transform="translate(450,-606)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">5</text></g></g><g transform="translate(450,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">4</text></g></g><g transform="translate(450,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">4</text></g></g><g transform="translate(450,-87)"><g class="path"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">4</text></g></g><g transform="translate(450,87)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">5</text></g></g><g transform="translate(450,260)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">6</text></g></g><g transform="translate(450,433)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">7</text></g></g><g transform="translate(450,606)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">8</text></g></g><g transform="translate(600,-520)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">5</text></g></g><g transform="translate(600,-346)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">5</text></g></g><g transform="translate(600,-173)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">5</text></g></g><g transform="translate(600,0)"><g class="path shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">5</text></g></g><g transform="translate(600,173)"><g class="path shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">6</text></g></g><g transform="translate(600,346)"><g class="highlight path shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">7</text></g></g><g transform="translate(600,520)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">8</text></g></g><g transform="translate(750,-433)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">6</text></g></g><g transform="translate(750,-260)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">6</text></g></g><g transform="translate(750,-87)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">6</text></g></g><g transform="translate(750,87)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">6</text></g></g><g transform="translate(750,260)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">7</text></g></g><g transform="translate(750,433)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">8</text></g></g></g><path d="M 600 346.41016151377545 L 600 173.20508075688772 L 600 0 L 450 -86.60254037844383 L 300 -173.20508075688772 L 150 -259.8076211353316 L 0 -173.20508075688772 L 0 0" class="path"></path></g> <g transform="translate(972.6279441628825,972.6279441628825) scale(1.25)"><g transform="translate(-175,-50) scale(0.5)" class="toggle-orientation"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em">flat</text></g> <g transform="translate(-75,-50) rotate(-30) scale(0.5)" class="toggle-orientation selected"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em" transform="rotate(30)">pointy</text></g></g> <!----></svg><br><label>Limit <code>movement =  4</code><input type="range" min="0" max="20" style="width: 50%;"></label></figure><script type="x-template" id="template-diagram-movement-range"><figure id="diagram-movement-range" class="float-right"><a-svg style="max-width:31.25rem" v-bind:orientation-button-scale="1.25"><a-grid v-bind:hexes="grid" v-bind:walls="walls" v-bind:setHighlight="setHighlight"><g slot-scope="props" v-bind:class="className(props.hex)"><a-hex></a-hex><a-text v-if="!isWall(props.hex)">{{breadthFirstSearch.cost_so_far[props.hex]}}</a-text></g></a-grid><path class="path" v-bind:d="reconstructedPath"></path></a-svg><br><label>Limit <code>movement =  {{distanceLimit}}</code><input v-model="distanceLimit" type="range" min="0" max="20" style="width:50%"></label></figure></script>
</div></section><section><h2 id="rotation">
<span><a href="https://www.redblobgames.com/grids/hexagons/#rotation">Rotation</a></span><a class="anchor" href="https://www.redblobgames.com/grids/hexagons/#rotation">#</a>
</h2>
<div class="float-container">
<div>
<p>Given a hex vector (difference between one hex and another), we might want to rotate it to point to a different hex. This is simple with cube coordinates if we stick with rotations of 1/6th of a circle.</p>
<p>A rotation 60° right (clockwise ↻) shoves each coordinate one slot to the left ←:</p>
<pre>      [ q,  r,  s]
to        [-r, -s, -q]
to           [  s,  q,  r]</pre>
<p>A rotation 60° left (counter-clockwise ↺) shoves each coordinate one slot to the right →:</p>
<pre>          [ q,  r,  s]
to    [-s, -q, -r]
to [r,  s,  q]</pre>
</div>
<figure id="diagram-rotation" class="float-right"><svg viewBox="-972.6279441628825 -972.6279441628825 1945.255888325765 1945.255888325765" style="max-width: 37.5rem;"><g fill="white" stroke="black" class=" rotate-pointy"><g class="grid"><g transform="translate(-750,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+5</text></g></g></g></g><g transform="translate(-750,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+4</text></g></g></g></g><g transform="translate(-750,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(-750,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(-750,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-750,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(-600,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+5</text></g></g></g></g><g transform="translate(-600,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+4</text></g></g></g></g><g transform="translate(-600,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(-600,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(-600,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-600,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(-600,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(-450,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+5</text></g></g></g></g><g transform="translate(-450,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+4</text></g></g></g></g><g transform="translate(-450,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(-450,-87)"><g class="left2"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(-450,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-450,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(-450,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(-450,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(-300,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+5</text></g></g></g></g><g transform="translate(-300,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+4</text></g></g></g></g><g transform="translate(-300,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(-300,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(-300,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-300,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(-300,346)"><g class="opposite"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(-300,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(-300,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(-150,-779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+5</text></g></g></g></g><g transform="translate(-150,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+4</text></g></g></g></g><g transform="translate(-150,-433)"><g class="left1"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(-150,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(-150,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(-150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(-150,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(-150,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(-150,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-4</text></g></g></g></g><g transform="translate(0,-866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+5</text></g></g></g></g><g transform="translate(0,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+4</text></g></g></g></g><g transform="translate(0,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(0,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(0,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(0,0)"><g class="origin"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">q</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">r</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">s</text></g></g></g></g><g transform="translate(0,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(0,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(0,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(0,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-4</text></g></g></g></g><g transform="translate(0,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-5</text></g></g></g></g><g transform="translate(150,-779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+4</text></g></g></g></g><g transform="translate(150,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(150,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(150,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(150,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(150,433)"><g class="right2"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(150,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-4</text></g></g></g></g><g transform="translate(150,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-5</text></g></g></g></g><g transform="translate(300,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(300,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(300,-346)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(300,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(300,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(300,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(300,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(300,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-4</text></g></g></g></g><g transform="translate(300,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-5</text></g></g></g></g><g transform="translate(450,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(450,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(450,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(450,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(450,87)"><g class="right1"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(450,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(450,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-4</text></g></g></g></g><g transform="translate(450,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-5</text></g></g></g></g><g transform="translate(600,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(600,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(600,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(600,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(600,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(600,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-4</text></g></g></g></g><g transform="translate(600,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-5</text></g></g></g></g><g transform="translate(750,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(750,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(750,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(750,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(750,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-4</text></g></g></g></g><g transform="translate(750,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-5</text></g></g></g></g></g><path transform="translate(300.0,-346.4) rotate(130.8933946491309)" d="M 0 0 l 30 30 l 0 -15 l 338.25756949558405 0 l -4.5 -15 l 4.5 -15 l -338.25756949558405 0 l 0 -15 Z" class="arrow highlight"></path><path transform="translate(-150.0,-433.0) rotate(10.893394649130897)" d="M 0 0 l 30 30 l 0 -15 l 338.257569495584 0 l -4.5 -15 l 4.5 -15 l -338.257569495584 0 l 0 -15 Z" class="arrow left"></path><path transform="translate(450.0,86.6) rotate(-109.1066053508691)" d="M 0 0 l 30 30 l 0 -15 l 338.2575694955841 0 l -4.5 -15 l 4.5 -15 l -338.2575694955841 0 l 0 -15 Z" class="arrow right"></path></g> <g transform="translate(972.6279441628825,972.6279441628825) scale(1)"><g transform="translate(-175,-50) scale(0.5)" class="toggle-orientation"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em">flat</text></g> <g transform="translate(-75,-50) rotate(-30) scale(0.5)" class="toggle-orientation selected"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em" transform="rotate(30)">pointy</text></g></g> <g class="axes" style="transform: translate(-825px, 775px) scale(1);"><g class=" rotate-pointy"><g transform="translate(135,0)"><path transform="translate(-22.5,0.0) rotate(180)" d="M 0 0 l 20 20 l 0 -10 l 77.5 0 l -3 -10 l 3 -10 l -77.5 0 l 0 -10 Z" class="q"></path> <text dy="0.4em" class="unrotate">+q</text></g> <g transform="translate(-67.49999999999997,116.91342951089922)"><path transform="translate(11.2,-19.5) rotate(-60.00000000000001)" d="M 0 0 l 20 20 l 0 -10 l 77.49999999999999 0 l -3 -10 l 3 -10 l -77.49999999999999 0 l 0 -10 Z" class="r"></path> <text dy="0.4em" class="unrotate">+r</text></g> <g transform="translate(-67.50000000000006,-116.91342951089918)"><path transform="translate(11.3,19.5) rotate(59.99999999999997)" d="M 0 0 l 20 20 l 0 -10 l 77.5 0 l -3 -10 l 3 -10 l -77.5 0 l 0 -10 Z" class="s"></path> <text dy="0.4em" class="unrotate">+s</text></g> <g transform="translate(-135,1.6532731788489267e-14)"><path transform="translate(22.5,-0.0) rotate(-7.0167092985348775e-15)" d="M 0 0 l 20 20 l 0 -10 l 77.5 0 l -3 -10 l 3 -10 l -77.5 0 l 0 -10 Z" class="q"></path> <text dy="0.4em" class="unrotate">-q</text></g> <g transform="translate(67.50000000000001,-116.9134295108992)"><path transform="translate(-11.3,19.5) rotate(120.00000000000001)" d="M 0 0 l 20 20 l 0 -10 l 77.5 0 l -3 -10 l 3 -10 l -77.5 0 l 0 -10 Z" class="r"></path> <text dy="0.4em" class="unrotate">-r</text></g> <g transform="translate(67.50000000000001,116.9134295108992)"><path transform="translate(-11.3,-19.5) rotate(-120.00000000000001)" d="M 0 0 l 20 20 l 0 -10 l 77.5 0 l -3 -10 l 3 -10 l -77.5 0 l 0 -10 Z" class="s"></path> <text dy="0.4em" class="unrotate">-s</text></g></g></g></svg></figure><script type="x-template" id="template-diagram-rotation"><figure id="diagram-rotation" class="float-right"><a-svg style="max-width:37.5rem" axes="-825,775"><a-grid v-bind:hexes="grid" v-bind:setHighlight="setHighlight"><g slot-scope="props" v-bind:class="className(props.hex)"><a-hex></a-hex><a-cube-label v-bind:labels="props.hex.len()===0? ['q','r','s']:[props.hex.q,props.hex.r,props.hex.s]"></a-cube-label></g></a-grid><a-arrow class="arrow highlight" v-bind:w="15" v-bind:skip="90" v-bind:A="center(origin)" v-bind:B="center(highlight)"></a-arrow><a-arrow class="arrow left" v-bind:w="15" v-bind:skip="90" v-bind:A="center(highlight)" v-bind:B="center(left1)"></a-arrow><a-arrow class="arrow right" v-bind:w="15" v-bind:skip="90" v-bind:A="center(highlight)" v-bind:B="center(right1)"></a-arrow></a-svg></figure></script><div>
<p>As you play with diagram, notice that each 60° rotation <em>flips</em> the signs and also physically “rotates” the coordinates. Take a look at the axis legend on the bottom left to see how this works. After a 120° rotation the signs are flipped back to where they were. A 180° rotation flips the signs but the coordinates have rotated back to where they originally were.</p>
<p>Here's the full recipe for rotating a position <code>hex</code> around a center position <code>center</code> to result in a new position <code>rotated</code>:</p>
<ol>
<li>
<a href="https://www.redblobgames.com/grids/hexagons/#conversions">Convert</a> positions <code>hex</code> and <code>center</code> to cube coordinates.</li>
<li>Calculate a <em>vector</em> by subtracting the center: <code>vec = cube_subtract(hex, center) = Cube(hex.q - center.q, hex.r - center.r, hex.s - center.s)</code>.</li>
<li>Rotate the vector <code>vec</code> as described above, and call the resulting vector <code>rotated_vec</code>.</li>
<li>Convert the vector back to a position by adding the center: <code>rotated = cube_add(rotated_vec, center) = Cube(rotated_vec.q + center.q, rotated_vec.r + center.r, rotated_vec.s + center.s)</code>.</li>
<li>
<a href="https://www.redblobgames.com/grids/hexagons/#conversions">Convert</a> the cube position <code>rotated</code> back to to your preferred coordinate system.</li>
</ol>
<p>It's several conversion steps but each step is short. You can shortcut some of these steps by defining rotation directly on axial coordinates, but hex vectors don't work for offset coordinates and I don't know a shortcut for offset coordinates. Also see <a href="https://gamedev.stackexchange.com/questions/15237/how-do-i-rotate-a-structure-of-hexagonal-tiles-on-a-hexagonal-grid/">this stackexchange discussion</a><sup class="print-endnote">[31]</sup> for other ways to calculate rotation.</p>
</div>
</div></section><section><h2 id="reflection">
<span><a href="https://www.redblobgames.com/grids/hexagons/#reflection">Reflection</a></span><a class="anchor" href="https://www.redblobgames.com/grids/hexagons/#reflection">#</a>
</h2>
<div class="float-container">
<div><p>Given a hex, we might want to reflect it across one of the axes. With cube coordinates, we <em>swap</em> the coordinates that <em>aren't</em> the axis we're reflecting over. The axis we're reflecting over stays the same.</p></div>
<figure id="diagram-reflection" class="float-right"><svg viewBox="-972.6279441628825 -972.6279441628825 1945.255888325765 1945.255888325765" style="max-width: 37.5rem;"><g fill="white" stroke="black" class=" rotate-pointy"><g class="grid"><g transform="translate(-750,-433)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+5</text></g></g></g></g><g transform="translate(-750,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+4</text></g></g></g></g><g transform="translate(-750,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(-750,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(-750,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-750,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(-600,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+5</text></g></g></g></g><g transform="translate(-600,-346)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+4</text></g></g></g></g><g transform="translate(-600,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(-600,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(-600,173)"><g class="r-secondary r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-600,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(-600,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(-450,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+5</text></g></g></g></g><g transform="translate(-450,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+4</text></g></g></g></g><g transform="translate(-450,-260)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(-450,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(-450,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-450,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(-450,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(-450,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(-300,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+5</text></g></g></g></g><g transform="translate(-300,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+4</text></g></g></g></g><g transform="translate(-300,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(-300,-173)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(-300,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-300,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(-300,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(-300,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(-300,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(-150,-779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+5</text></g></g></g></g><g transform="translate(-150,-606)"><g class="r-primary r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+4</text></g></g></g></g><g transform="translate(-150,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(-150,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(-150,-87)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(-150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(-150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(-150,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(-150,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(-150,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">-1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-4</text></g></g></g></g><g transform="translate(0,-866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+5</text></g></g></g></g><g transform="translate(0,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+4</text></g></g></g></g><g transform="translate(0,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(0,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(0,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(0,0)"><g class="origin r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">q</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">r</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">s</text></g></g></g></g><g transform="translate(0,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(0,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(0,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(0,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-4</text></g></g></g></g><g transform="translate(0,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">0</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-5</text></g></g></g></g><g transform="translate(150,-779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+4</text></g></g></g></g><g transform="translate(150,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(150,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(150,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(150,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(150,87)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(150,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(150,606)"><g class="r-secondary r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-4</text></g></g></g></g><g transform="translate(150,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+1</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-5</text></g></g></g></g><g transform="translate(300,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+3</text></g></g></g></g><g transform="translate(300,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(300,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(300,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(300,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(300,173)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(300,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(300,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-4</text></g></g></g></g><g transform="translate(300,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+2</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-5</text></g></g></g></g><g transform="translate(450,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+2</text></g></g></g></g><g transform="translate(450,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(450,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(450,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(450,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(450,260)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(450,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-4</text></g></g></g></g><g transform="translate(450,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+3</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-5</text></g></g></g></g><g transform="translate(600,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">+1</text></g></g></g></g><g transform="translate(600,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(600,-173)"><g class="r-primary r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(600,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(600,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(600,346)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-4</text></g></g></g></g><g transform="translate(600,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+4</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">+1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-5</text></g></g></g></g><g transform="translate(750,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-5</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">0</text></g></g></g></g><g transform="translate(750,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-4</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-1</text></g></g></g></g><g transform="translate(750,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-3</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-2</text></g></g></g></g><g transform="translate(750,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-2</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-3</text></g></g></g></g><g transform="translate(750,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">-1</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-4</text></g></g></g></g><g transform="translate(750,433)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><g><g transform="translate(0,-60)"><text dy="10" class="q-coord unrotate">+5</text></g><g transform="translate(52,30)"><text dy="10" class="r-coord unrotate">0</text></g><g transform="translate(-52,30)"><text dy="10" class="s-coord unrotate">-5</text></g></g></g></g></g><line transform="rotate(120)" x1="-1000" y1="0" x2="1000" y2="0" class="axis primary r"></line><line transform="rotate(30)" x1="-1000" y1="0" x2="1000" y2="0" class="axis secondary"></line><path transform="translate(600.0,-173.2) rotate(-150)" d="M 0 0 l 30 30 l 0 -15 l 746.0254037844386 0 l -4.5 -15 l 4.5 -15 l -746.0254037844386 0 l 0 -15 Z" class="arrow primary r"></path><path transform="translate(-600.0,173.2) rotate(-16.102113751986018)" d="M 0 0 l 30 30 l 0 -15 l 1128.9995996796797 0 l -4.5 -15 l 4.5 -15 l -1128.9995996796797 0 l 0 -15 Z" class="arrow secondary r"></path><path transform="translate(150.0,606.2) rotate(-103.89788624801399)" d="M 0 0 l 30 30 l 0 -15 l 1128.9995996796795 0 l -4.5 -15 l 4.5 -15 l -1128.9995996796795 0 l 0 -15 Z" class="arrow secondary r"></path></g> <g transform="translate(972.6279441628825,972.6279441628825) scale(1)"><g transform="translate(-175,-50) scale(0.5)" class="toggle-orientation"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em">flat</text></g> <g transform="translate(-75,-50) rotate(-30) scale(0.5)" class="toggle-orientation selected"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em" transform="rotate(30)">pointy</text></g></g> <g class="axes" style="transform: translate(-825px, 725px) scale(0.75);"><g class=" rotate-pointy"><g transform="translate(135,0)"><path transform="translate(-22.5,0.0) rotate(180)" d="M 0 0 l 20 20 l 0 -10 l 77.5 0 l -3 -10 l 3 -10 l -77.5 0 l 0 -10 Z" class="q"></path> <text dy="0.4em" class="unrotate">+q</text></g> <g transform="translate(-67.49999999999997,116.91342951089922)"><path transform="translate(11.2,-19.5) rotate(-60.00000000000001)" d="M 0 0 l 20 20 l 0 -10 l 77.49999999999999 0 l -3 -10 l 3 -10 l -77.49999999999999 0 l 0 -10 Z" class="r"></path> <text dy="0.4em" class="unrotate">+r</text></g> <g transform="translate(-67.50000000000006,-116.91342951089918)"><path transform="translate(11.3,19.5) rotate(59.99999999999997)" d="M 0 0 l 20 20 l 0 -10 l 77.5 0 l -3 -10 l 3 -10 l -77.5 0 l 0 -10 Z" class="s"></path> <text dy="0.4em" class="unrotate">+s</text></g> <g transform="translate(-135,1.6532731788489267e-14)"><path transform="translate(22.5,-0.0) rotate(-7.0167092985348775e-15)" d="M 0 0 l 20 20 l 0 -10 l 77.5 0 l -3 -10 l 3 -10 l -77.5 0 l 0 -10 Z" class="q"></path> <text dy="0.4em" class="unrotate">-q</text></g> <g transform="translate(67.50000000000001,-116.9134295108992)"><path transform="translate(-11.3,19.5) rotate(120.00000000000001)" d="M 0 0 l 20 20 l 0 -10 l 77.5 0 l -3 -10 l 3 -10 l -77.5 0 l 0 -10 Z" class="r"></path> <text dy="0.4em" class="unrotate">-r</text></g> <g transform="translate(67.50000000000001,116.9134295108992)"><path transform="translate(-11.3,-19.5) rotate(-120.00000000000001)" d="M 0 0 l 20 20 l 0 -10 l 77.5 0 l -3 -10 l 3 -10 l -77.5 0 l 0 -10 Z" class="s"></path> <text dy="0.4em" class="unrotate">-s</text></g></g></g></svg><figcaption>Reflection axis: <label class="q"><input type="radio" value="q">q</label><label class="r"><input type="radio" value="r">r</label><label class="s"><input type="radio" value="s">s</label></figcaption></figure><script type="x-template" id="template-diagram-reflection"><figure id="diagram-reflection" class="float-right"><a-svg style="max-width:37.5rem" axes="-825,725,0.75"><a-grid v-bind:hexes="grid" v-bind:setHighlight="setHighlight"><g slot-scope="props" v-bind:class="className(props.hex)"><a-hex></a-hex><a-cube-label v-bind:labels="props.hex.len()===0? ['q','r','s']:[props.hex.q,props.hex.r,props.hex.s]"></a-cube-label></g></a-grid><line class="axis primary" v-bind:class="axis" v-bind:transform="`rotate(${90+axisRotation})`" v-bind:x1="-1000" v-bind:y1="0" v-bind:x2="+1000" v-bind:y2="0"></line><line class="axis secondary" v-bind:transform="`rotate(${axisRotation})`" v-bind:x1="-1000" v-bind:y1="0" v-bind:x2="+1000" v-bind:y2="0"></line><a-arrow class="arrow primary" v-bind:class="axis" v-bind:w="15" v-bind:skip="90" v-bind:A="center(highlight)" v-bind:B="center(primary)"></a-arrow><a-arrow class="arrow secondary" v-bind:class="axis" v-bind:w="15" v-bind:skip="90" v-bind:A="center(primary)" v-bind:B="center(secondary)"></a-arrow><a-arrow class="arrow secondary" v-bind:class="axis" v-bind:w="15" v-bind:skip="90" v-bind:A="center(highlight)" v-bind:B="center(highlight.scale(-1))"></a-arrow></a-svg><figcaption>Reflection axis: <label class="q"><input type="radio" v-model="axis" value="q">q</label><label class="r"><input type="radio" v-model="axis" value="r">r</label><label class="s"><input type="radio" v-model="axis" value="s">s</label></figcaption></figure></script><pre>function reflectQ(h) { return Cube(h.q, h.<b class="s">s</b>, h.<b class="r">r</b>); }
function reflectR(h) { return Cube(h.<b class="s">s</b>, h.r, h.<b class="q">q</b>); }
function reflectS(h) { return Cube(h.<b class="r">r</b>, h.<b class="q">q</b>, h.s); }</pre>
<p>To reach the other two reflections, <em>negate</em> the coordinates of the original and the first reflection. These are shown as white arrows in the diagram.</p>
<p>To reflect over a line that's not at 0, pick a reference point on that line. Subtract the reference point, perform the reflection, then add the reference point back.</p>
</div></section><section><h2 id="rings">
<span><a href="https://www.redblobgames.com/grids/hexagons/#rings">Rings</a></span><a class="anchor" href="https://www.redblobgames.com/grids/hexagons/#rings">#</a>
</h2>
<div class="float-container">
<div>
<h3 id="rings-single">
<span>Single ring</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#rings-single">#</a>
</h3>
<p>To find out whether a given hex is on a ring of a given <code>radius</code>, calculate the distance from that hex to the center and see if it's <code>radius</code>. To get a list of all such hexes, take <code>radius</code> steps away from the center, then follow the rotated vectors in a path around the ring.</p>
<pre>function cube_scale(hex, factor):
    return Cube(hex.q * factor, hex.r * factor, hex.s * factor)

function cube_ring(center, radius):
    var results = []
    # this code doesn't work for radius == 0; can you see why?
    var hex = cube_add(center,
                        cube_scale(cube_direction(4), radius))
    for each 0 ≤ i &lt; 6:
        for each 0 ≤ j &lt; radius:
            results.append(hex)
            hex = cube_neighbor(hex, i)
    return results</pre>
<p>In this code, <code>hex</code> starts out on the ring, shown by the large arrow from the center to the corner in the diagram. I chose corner 4 to start with because it lines up the way my direction numbers work but you may need a different starting corner. At each step of the inner loop, <code>hex</code> moves one hex along the ring. After a circumference of <code>6 * radius</code> steps it ends up back where it started.</p>
</div>
<figure id="diagram-rings" class="float-right"><svg viewBox="-972.6279441628825 -972.6279441628825 1945.255888325765 1945.255888325765" style="max-width: 31.25rem;"><g fill="white" stroke="black" class=" rotate-pointy"><g class="grid"><g transform="translate(-750,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-260)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-87)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,87)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,260)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-346)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,346)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-433)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,433)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-520)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,520)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-433)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,433)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-346)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,346)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-260)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-87)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,87)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,260)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g></g><path transform="translate(-450.0,259.8) rotate(-29.999999999999996)" d="M 0 0 l 30 30 l 0 -15 l 439.6152422706632 0 l -4.5 -15 l 4.5 -15 l -439.6152422706632 0 l 0 -15 Z" class="arrow"></path><path transform="translate(-300.0,346.4) rotate(-149.99999999999997)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688775 0 l -4.5 -15 l 4.5 -15 l -93.20508075688775 0 l 0 -15 Z" class="arrow"></path><path transform="translate(-150.0,433.0) rotate(-150)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(0.0,519.6) rotate(-150)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(150.0,433.0) rotate(149.99999999999997)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688775 0 l -4.5 -15 l 4.5 -15 l -93.20508075688775 0 l 0 -15 Z" class="arrow"></path><path transform="translate(300.0,346.4) rotate(150)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(450.0,259.8) rotate(150)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(450.0,86.6) rotate(90)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(450.0,-86.6) rotate(90)" d="M 0 0 l 30 30 l 0 -15 l 93.2050807568877 0 l -4.5 -15 l 4.5 -15 l -93.2050807568877 0 l 0 -15 Z" class="arrow"></path><path transform="translate(450.0,-259.8) rotate(90)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688775 0 l -4.5 -15 l 4.5 -15 l -93.20508075688775 0 l 0 -15 Z" class="arrow"></path><path transform="translate(300.0,-346.4) rotate(30.000000000000018)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688775 0 l -4.5 -15 l 4.5 -15 l -93.20508075688775 0 l 0 -15 Z" class="arrow"></path><path transform="translate(150.0,-433.0) rotate(29.999999999999993)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(0.0,-519.6) rotate(29.999999999999993)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(-150.0,-433.0) rotate(-30.000000000000018)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688775 0 l -4.5 -15 l 4.5 -15 l -93.20508075688775 0 l 0 -15 Z" class="arrow"></path><path transform="translate(-300.0,-346.4) rotate(-29.999999999999993)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(-450.0,-259.8) rotate(-29.999999999999993)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(-450.0,-86.6) rotate(-90)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(-450.0,86.6) rotate(-90)" d="M 0 0 l 30 30 l 0 -15 l 93.2050807568877 0 l -4.5 -15 l 4.5 -15 l -93.2050807568877 0 l 0 -15 Z" class="arrow"></path></g> <g transform="translate(972.6279441628825,972.6279441628825) scale(1)"><g transform="translate(-175,-50) scale(0.5)" class="toggle-orientation"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em">flat</text></g> <g transform="translate(-75,-50) rotate(-30) scale(0.5)" class="toggle-orientation selected"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em" transform="rotate(30)">pointy</text></g></g> <!----></svg></figure><script type="x-template" id="template-diagram-rings"><figure id="diagram-rings" class="float-right"><a-svg style="max-width:31.25rem"><a-grid v-bind:hexes="grid" v-bind:setHighlight="setHighlight"><g slot-scope="props" v-bind:class="className(props.hex)"><a-hex></a-hex></g></a-grid><a-arrow v-for="(arrow, index) in arrows" v-bind:key="index" class="arrow" v-bind:w="15" v-bind:skip="50" v-bind:A="center(arrow.A)" v-bind:B="center(arrow.B)"></a-arrow></a-svg></figure></script><p>The scale, add, and neighbor operations also work on axial and doubled coordinates, so the same algorithm can be used. For offset coordinates, convert to one of the other formats, generate the ring, and convert back.</p>
</div>
<div class="float-container">
<div>
<h3 id="rings-spiral">
<span>Spiral rings</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#rings-spiral">#</a>
</h3>
<p>Traversing the <code>N</code> rings one by one in a spiral pattern, we can fill in the interior:</p>
<pre>function cube_spiral(center, radius):
    var results = list(center)
    for each 1 ≤ k ≤ radius:
        results = list_append(results, cube_ring(center, k))
    return results</pre>
</div>
<figure id="diagram-spiral" class="float-right"><svg viewBox="-972.6279441628825 -972.6279441628825 1945.255888325765 1945.255888325765" style="max-width: 31.25rem;"><g fill="white" stroke="black" class=" rotate-pointy"><g class="grid"><g transform="translate(-750,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-260)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-87)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,87)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,260)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-346)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-173)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,0)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,173)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,346)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-433)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-260)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-87)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,87)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,260)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,433)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-520)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-346)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-173)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,0)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,173)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,346)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,520)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-433)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-260)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-87)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,87)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,260)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,433)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-346)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-173)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,0)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,173)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,346)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-260)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-87)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,87)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,260)"><g class="highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g></g><path transform="translate(-150.0,86.6) rotate(-29.999999999999996)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(0.0,173.2) rotate(-150)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(150.0,86.6) rotate(150)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(150.0,-86.6) rotate(90)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(0.0,-173.2) rotate(29.999999999999996)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(-150.0,-86.6) rotate(-29.999999999999996)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(-300.0,173.2) rotate(-60.00000000000001)" d="M 0 0 l 30 30 l 0 -15 l 220 0 l -4.5 -15 l 4.5 -15 l -220 0 l 0 -15 Z" class="arrow"></path><path transform="translate(-150.0,259.8) rotate(-150)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(0.0,346.4) rotate(-150)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(150.0,259.8) rotate(150)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(300.0,173.2) rotate(150)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(300.0,0.0) rotate(90)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(300.0,-173.2) rotate(90)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(150.0,-259.8) rotate(30.000000000000004)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(0.0,-346.4) rotate(29.999999999999993)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(-150.0,-259.8) rotate(-29.999999999999993)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(-300.0,-173.2) rotate(-30.000000000000004)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(-300.0,0.0) rotate(-90)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(-450.0,259.8) rotate(-60.00000000000001)" d="M 0 0 l 30 30 l 0 -15 l 220 0 l -4.5 -15 l 4.5 -15 l -220 0 l 0 -15 Z" class="arrow"></path><path transform="translate(-300.0,346.4) rotate(-149.99999999999997)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688775 0 l -4.5 -15 l 4.5 -15 l -93.20508075688775 0 l 0 -15 Z" class="arrow"></path><path transform="translate(-150.0,433.0) rotate(-150)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(0.0,519.6) rotate(-150)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(150.0,433.0) rotate(149.99999999999997)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688775 0 l -4.5 -15 l 4.5 -15 l -93.20508075688775 0 l 0 -15 Z" class="arrow"></path><path transform="translate(300.0,346.4) rotate(150)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(450.0,259.8) rotate(150)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(450.0,86.6) rotate(90)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(450.0,-86.6) rotate(90)" d="M 0 0 l 30 30 l 0 -15 l 93.2050807568877 0 l -4.5 -15 l 4.5 -15 l -93.2050807568877 0 l 0 -15 Z" class="arrow"></path><path transform="translate(450.0,-259.8) rotate(90)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688775 0 l -4.5 -15 l 4.5 -15 l -93.20508075688775 0 l 0 -15 Z" class="arrow"></path><path transform="translate(300.0,-346.4) rotate(30.000000000000018)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688775 0 l -4.5 -15 l 4.5 -15 l -93.20508075688775 0 l 0 -15 Z" class="arrow"></path><path transform="translate(150.0,-433.0) rotate(29.999999999999993)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(0.0,-519.6) rotate(29.999999999999993)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(-150.0,-433.0) rotate(-30.000000000000018)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688775 0 l -4.5 -15 l 4.5 -15 l -93.20508075688775 0 l 0 -15 Z" class="arrow"></path><path transform="translate(-300.0,-346.4) rotate(-29.999999999999993)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(-450.0,-259.8) rotate(-29.999999999999993)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(-450.0,-86.6) rotate(-90)" d="M 0 0 l 30 30 l 0 -15 l 93.20508075688772 0 l -4.5 -15 l 4.5 -15 l -93.20508075688772 0 l 0 -15 Z" class="arrow"></path><path transform="translate(-450.0,86.6) rotate(-90)" d="M 0 0 l 30 30 l 0 -15 l 93.2050807568877 0 l -4.5 -15 l 4.5 -15 l -93.2050807568877 0 l 0 -15 Z" class="arrow"></path></g> <g transform="translate(972.6279441628825,972.6279441628825) scale(1)"><g transform="translate(-175,-50) scale(0.5)" class="toggle-orientation"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em">flat</text></g> <g transform="translate(-75,-50) rotate(-30) scale(0.5)" class="toggle-orientation selected"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em" transform="rotate(30)">pointy</text></g></g> <!----></svg></figure><script type="x-template" id="template-diagram-spiral"><figure id="diagram-spiral" class="float-right"><a-svg style="max-width:31.25rem"><a-grid v-bind:hexes="grid" v-bind:setHighlight="setHighlight"><g slot-scope="props" v-bind:class="className(props.hex)"><a-hex></a-hex></g></a-grid><a-arrow v-for="(arrow, index) in arrows" v-bind:key="index" class="arrow" v-bind:w="15" v-bind:skip="50" v-bind:A="center(arrow.A)" v-bind:B="center(arrow.B)"></a-arrow></a-svg></figure></script><p id="calculation-spiral">Spirals also give us a way to <em>count</em> how many hexagon tiles are in the larger hexagon. The center is 1 hex. The circumference of the k-th ring is <code>6 * k</code> hexes. The sum for N rings is <code>1 + 6 * sum(1 to N)</code>. Using <a href="https://en.wikipedia.org/wiki/1_%2B_2_%2B_3_%2B_4_%2B_%E2%8B%AF">this formula</a><sup class="print-endnote">[32]</sup>, that simplifies to <code>1 + 3 * N * (N+1)</code>. For <label><input type="number" value="4" min="1" style="width: 4em;"> rings</label>, there will be <output><code>61</code></output> hexes.</p>
<p>Visiting the hexes this way can also be used to calculate <a href="https://www.redblobgames.com/grids/hexagons/#range">movement range</a>.</p>
</div>
<div id="diagram-spiral-coordinates" class="float-container"><div><h3 id="rings-spiral-coordinates"><span>Spiral coordinates</span><a aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#rings-spiral-coordinates" class="anchor">#</a></h3> <p>Following the spiral path above lets us build one of many <em>spiral coordinate systems</em>:</p></div> <div class="float-right"><figure><svg viewBox="-972.6279441628825 -972.6279441628825 1945.255888325765 1945.255888325765" style="max-width: 31.25rem;"><g fill="white" stroke="black" class=" rotate-pointy"><g class="grid"><g transform="translate(-750,-433)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,-260)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,-87)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,87)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,260)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,433)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,-520)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,-346)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,-173)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,0)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,173)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,346)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,520)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-606)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-433)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-260)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-87)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,87)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,260)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,433)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,606)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-693)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-520)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-346)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-173)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,0)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,173)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,346)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,520)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,693)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-779)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-606)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-433)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-260)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-87)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,87)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,260)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,433)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,606)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,779)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-866)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-693)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-520)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-346)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-173)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,0)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,173)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,346)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,520)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,693)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,866)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-779)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-606)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-433)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-260)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-87)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,87)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,260)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,433)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,606)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,779)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-693)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-520)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-346)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-173)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,0)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,173)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,346)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,520)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,693)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-606)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-433)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-260)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-87)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,87)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,260)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,433)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,606)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,-520)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,-346)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,-173)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,0)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,173)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,346)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,520)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,-433)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,-260)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,-87)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,87)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,260)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,433)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g></g><path d="M 0 0 L -150 86.60254037844386 L 0 173.20508075688772 L 150 86.60254037844386 L 150 -86.60254037844386 L 0 -173.20508075688772 L -150 -86.60254037844386 L -300 173.20508075688772 L -150 259.8076211353316 L 0 346.41016151377545 L 150 259.8076211353316 L 300 173.20508075688772 L 300 0 L 300 -173.20508075688772 L 150 -259.8076211353316 L 0 -346.41016151377545 L -150 -259.8076211353316 L -300 -173.20508075688772 L -300 0 L -450 259.8076211353316 L -300 346.4101615137755 L -150 433.01270189221935 L 0 519.6152422706632 L 150 433.0127018922193 L 300 346.41016151377545 L 450 259.8076211353316 L 450 86.60254037844388 L 450 -86.60254037844383 L 450 -259.8076211353316 L 300 -346.4101615137755 L 150 -433.01270189221935 L 0 -519.6152422706632 L -150 -433.0127018922193 L -300 -346.41016151377545 L -450 -259.8076211353316 L -450 -86.60254037844388 L -450 86.60254037844383 L -600 346.41016151377545 L -450 433.0127018922193 L -300 519.6152422706632 L -150 606.217782649107 L 0 692.8203230275509 L 150 606.217782649107 L 300 519.6152422706632 L 450 433.0127018922193 L 600 346.41016151377545 L 600 173.20508075688772 L 600 0 L 600 -173.20508075688775 L 600 -346.41016151377545 L 450 -433.0127018922193 L 300 -519.6152422706632 L 150 -606.217782649107 L 0 -692.8203230275509 L -150 -606.217782649107 L -300 -519.6152422706632 L -450 -433.0127018922193 L -600 -346.41016151377545 L -600 -173.20508075688772 L -600 0 L -600 173.20508075688775 L -750 433.0127018922193 L -600 519.6152422706631 L -450 606.217782649107 L -300 692.8203230275509 L -150 779.4228634059947 L 0 866.0254037844386 L 150 779.4228634059947 L 300 692.8203230275509 L 450 606.217782649107 L 600 519.6152422706632 L 750 433.0127018922193 L 750 259.80762113533154 L 750 86.60254037844383 L 750 -86.60254037844393 L 750 -259.8076211353316 L 750 -433.0127018922193 L 600 -519.6152422706631 L 450 -606.217782649107 L 300 -692.8203230275509 L 150 -779.4228634059947 L 0 -866.0254037844386 L -150 -779.4228634059947 L -300 -692.8203230275509 L -450 -606.217782649107 L -600 -519.6152422706632 L -750 -433.0127018922193 L -750 -259.80762113533154 L -750 -86.60254037844383 L -750 86.60254037844393 L -750 259.8076211353316" class="path visible"></path><path d="M 0 0 M -150 86.60254037844386 L 0 173.20508075688772 L 150 86.60254037844386 L 150 -86.60254037844386 L 0 -173.20508075688772 L -150 -86.60254037844386 M -300 173.20508075688772 L -150 259.8076211353316 L 0 346.41016151377545 L 150 259.8076211353316 L 300 173.20508075688772 L 300 0 L 300 -173.20508075688772 L 150 -259.8076211353316 L 0 -346.41016151377545 L -150 -259.8076211353316 L -300 -173.20508075688772 L -300 0 M -450 259.8076211353316 L -300 346.4101615137755 L -150 433.01270189221935 L 0 519.6152422706632 L 150 433.0127018922193 L 300 346.41016151377545 L 450 259.8076211353316 L 450 86.60254037844388 L 450 -86.60254037844383 L 450 -259.8076211353316 L 300 -346.4101615137755 L 150 -433.01270189221935 L 0 -519.6152422706632 L -150 -433.0127018922193 L -300 -346.41016151377545 L -450 -259.8076211353316 L -450 -86.60254037844388 L -450 86.60254037844383 M -600 346.41016151377545 L -450 433.0127018922193 L -300 519.6152422706632 L -150 606.217782649107 L 0 692.8203230275509 L 150 606.217782649107 L 300 519.6152422706632 L 450 433.0127018922193 L 600 346.41016151377545 L 600 173.20508075688772 L 600 0 L 600 -173.20508075688775 L 600 -346.41016151377545 L 450 -433.0127018922193 L 300 -519.6152422706632 L 150 -606.217782649107 L 0 -692.8203230275509 L -150 -606.217782649107 L -300 -519.6152422706632 L -450 -433.0127018922193 L -600 -346.41016151377545 L -600 -173.20508075688772 L -600 0 L -600 173.20508075688775 M -750 433.0127018922193 L -600 519.6152422706631 L -450 606.217782649107 L -300 692.8203230275509 L -150 779.4228634059947 L 0 866.0254037844386 L 150 779.4228634059947 L 300 692.8203230275509 L 450 606.217782649107 L 600 519.6152422706632 L 750 433.0127018922193 L 750 259.80762113533154 L 750 86.60254037844383 L 750 -86.60254037844393 L 750 -259.8076211353316 L 750 -433.0127018922193 L 600 -519.6152422706631 L 450 -606.217782649107 L 300 -692.8203230275509 L 150 -779.4228634059947 L 0 -866.0254037844386 L -150 -779.4228634059947 L -300 -692.8203230275509 L -450 -606.217782649107 L -600 -519.6152422706632 L -750 -433.0127018922193 L -750 -259.80762113533154 L -750 -86.60254037844383 L -750 86.60254037844393 L -750 259.8076211353316" class="path"></path><path d="M 0 0 L -150 86.60254037844386 L -300 173.20508075688772 L -450 259.8076211353316 L -600 346.41016151377545 L -750 433.0127018922193" class="path"></path><path d="M -150 86.60254037844386 L -300 173.20508075688772 L -450 259.8076211353316 L -600 346.41016151377545 L -750 433.0127018922193 M 0 173.20508075688772 L 0 346.41016151377545 L 0 519.6152422706632 L 0 692.8203230275509 L 0 866.0254037844386 M 150 86.60254037844386 L 300 173.20508075688772 L 450 259.8076211353316 L 600 346.41016151377545 L 750 433.0127018922193 M 150 -86.60254037844386 L 300 -173.20508075688772 L 450 -259.8076211353316 L 600 -346.41016151377545 L 750 -433.0127018922193 M 0 -173.20508075688772 L 0 -346.41016151377545 L 0 -519.6152422706632 L 0 -692.8203230275509 L 0 -866.0254037844386 M -150 -86.60254037844386 L -300 -173.20508075688772 L -450 -259.8076211353316 L -600 -346.41016151377545 L -750 -433.0127018922193" class="path"></path><path d="M -150 86.60254037844386 M 0 173.20508075688772 M 150 86.60254037844386 M 150 -86.60254037844386 M 0 -173.20508075688772 M -150 -86.60254037844386 M -300 173.20508075688772 L -150 259.8076211353316 M 0 346.41016151377545 L 150 259.8076211353316 M 300 173.20508075688772 L 300 0 M 300 -173.20508075688772 L 150 -259.8076211353316 M 0 -346.41016151377545 L -150 -259.8076211353316 M -300 -173.20508075688772 L -300 0 M -450 259.8076211353316 L -300 346.4101615137755 L -150 433.01270189221935 M 0 519.6152422706632 L 150 433.0127018922193 L 300 346.41016151377545 M 450 259.8076211353316 L 450 86.60254037844388 L 450 -86.60254037844383 M 450 -259.8076211353316 L 300 -346.4101615137755 L 150 -433.01270189221935 M 0 -519.6152422706632 L -150 -433.0127018922193 L -300 -346.41016151377545 M -450 -259.8076211353316 L -450 -86.60254037844388 L -450 86.60254037844383 M -600 346.41016151377545 L -450 433.0127018922193 L -300 519.6152422706632 L -150 606.217782649107 M 0 692.8203230275509 L 150 606.217782649107 L 300 519.6152422706632 L 450 433.0127018922193 M 600 346.41016151377545 L 600 173.20508075688772 L 600 0 L 600 -173.20508075688775 M 600 -346.41016151377545 L 450 -433.0127018922193 L 300 -519.6152422706632 L 150 -606.217782649107 M 0 -692.8203230275509 L -150 -606.217782649107 L -300 -519.6152422706632 L -450 -433.0127018922193 M -600 -346.41016151377545 L -600 -173.20508075688772 L -600 0 L -600 173.20508075688775 M -750 433.0127018922193 L -600 519.6152422706631 L -450 606.217782649107 L -300 692.8203230275509 L -150 779.4228634059947 M 0 866.0254037844386 L 150 779.4228634059947 L 300 692.8203230275509 L 450 606.217782649107 L 600 519.6152422706632 M 750 433.0127018922193 L 750 259.80762113533154 L 750 86.60254037844383 L 750 -86.60254037844393 L 750 -259.8076211353316 M 750 -433.0127018922193 L 600 -519.6152422706631 L 450 -606.217782649107 L 300 -692.8203230275509 L 150 -779.4228634059947 M 0 -866.0254037844386 L -150 -779.4228634059947 L -300 -692.8203230275509 L -450 -606.217782649107 L -600 -519.6152422706632 M -750 -433.0127018922193 L -750 -259.80762113533154 L -750 -86.60254037844383 L -750 86.60254037844393 L -750 259.8076211353316" class="path"></path><g class="grid"><g transform="translate(-750,-433)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">86</text></g></g><g transform="translate(-750,-260)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">87</text></g></g><g transform="translate(-750,-87)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">88</text></g></g><g transform="translate(-750,87)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">89</text></g></g><g transform="translate(-750,260)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">90</text></g></g><g transform="translate(-750,433)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">61</text></g></g><g transform="translate(-600,-520)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">85</text></g></g><g transform="translate(-600,-346)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">57</text></g></g><g transform="translate(-600,-173)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">58</text></g></g><g transform="translate(-600,0)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">59</text></g></g><g transform="translate(-600,173)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">60</text></g></g><g transform="translate(-600,346)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">37</text></g></g><g transform="translate(-600,520)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">62</text></g></g><g transform="translate(-450,-606)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">84</text></g></g><g transform="translate(-450,-433)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">56</text></g></g><g transform="translate(-450,-260)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">34</text></g></g><g transform="translate(-450,-87)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">35</text></g></g><g transform="translate(-450,87)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">36</text></g></g><g transform="translate(-450,260)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">19</text></g></g><g transform="translate(-450,433)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">38</text></g></g><g transform="translate(-450,606)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">63</text></g></g><g transform="translate(-300,-693)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">83</text></g></g><g transform="translate(-300,-520)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">55</text></g></g><g transform="translate(-300,-346)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">33</text></g></g><g transform="translate(-300,-173)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">17</text></g></g><g transform="translate(-300,0)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">18</text></g></g><g transform="translate(-300,173)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">7</text></g></g><g transform="translate(-300,346)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">20</text></g></g><g transform="translate(-300,520)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">39</text></g></g><g transform="translate(-300,693)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">64</text></g></g><g transform="translate(-150,-779)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">82</text></g></g><g transform="translate(-150,-606)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">54</text></g></g><g transform="translate(-150,-433)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">32</text></g></g><g transform="translate(-150,-260)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">16</text></g></g><g transform="translate(-150,-87)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">6</text></g></g><g transform="translate(-150,87)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">1</text></g></g><g transform="translate(-150,260)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">8</text></g></g><g transform="translate(-150,433)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">21</text></g></g><g transform="translate(-150,606)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">40</text></g></g><g transform="translate(-150,779)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">65</text></g></g><g transform="translate(0,-866)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">81</text></g></g><g transform="translate(0,-693)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">53</text></g></g><g transform="translate(0,-520)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">31</text></g></g><g transform="translate(0,-346)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">15</text></g></g><g transform="translate(0,-173)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">5</text></g></g><g transform="translate(0,0)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">0</text></g></g><g transform="translate(0,173)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">2</text></g></g><g transform="translate(0,346)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">9</text></g></g><g transform="translate(0,520)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">22</text></g></g><g transform="translate(0,693)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">41</text></g></g><g transform="translate(0,866)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">66</text></g></g><g transform="translate(150,-779)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">80</text></g></g><g transform="translate(150,-606)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">52</text></g></g><g transform="translate(150,-433)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">30</text></g></g><g transform="translate(150,-260)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">14</text></g></g><g transform="translate(150,-87)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">4</text></g></g><g transform="translate(150,87)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">3</text></g></g><g transform="translate(150,260)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">10</text></g></g><g transform="translate(150,433)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">23</text></g></g><g transform="translate(150,606)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">42</text></g></g><g transform="translate(150,779)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">67</text></g></g><g transform="translate(300,-693)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">79</text></g></g><g transform="translate(300,-520)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">51</text></g></g><g transform="translate(300,-346)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">29</text></g></g><g transform="translate(300,-173)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">13</text></g></g><g transform="translate(300,0)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">12</text></g></g><g transform="translate(300,173)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">11</text></g></g><g transform="translate(300,346)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">24</text></g></g><g transform="translate(300,520)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">43</text></g></g><g transform="translate(300,693)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">68</text></g></g><g transform="translate(450,-606)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">78</text></g></g><g transform="translate(450,-433)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">50</text></g></g><g transform="translate(450,-260)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">28</text></g></g><g transform="translate(450,-87)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">27</text></g></g><g transform="translate(450,87)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">26</text></g></g><g transform="translate(450,260)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">25</text></g></g><g transform="translate(450,433)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">44</text></g></g><g transform="translate(450,606)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">69</text></g></g><g transform="translate(600,-520)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">77</text></g></g><g transform="translate(600,-346)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">49</text></g></g><g transform="translate(600,-173)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">48</text></g></g><g transform="translate(600,0)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">47</text></g></g><g transform="translate(600,173)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">46</text></g></g><g transform="translate(600,346)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">45</text></g></g><g transform="translate(600,520)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">70</text></g></g><g transform="translate(750,-433)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">76</text></g></g><g transform="translate(750,-260)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">75</text></g></g><g transform="translate(750,-87)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">74</text></g></g><g transform="translate(750,87)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">73</text></g></g><g transform="translate(750,260)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">72</text></g></g><g transform="translate(750,433)"><g style="pointer-events: none;"><text dy="0.4em" class="unrotate">71</text></g></g></g></g> <g transform="translate(972.6279441628825,972.6279441628825) scale(1)"><g transform="translate(-175,-50) scale(0.5)" class="toggle-orientation"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em">flat</text></g> <g transform="translate(-75,-50) rotate(-30) scale(0.5)" class="toggle-orientation selected"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em" transform="rotate(30)">pointy</text></g></g> <!----></svg></figure><p>The main ingredients we need are the <dfn>radius</dfn> (<code>spiralindex_to_radius</code>), <dfn>start of each ring</dfn> (<code>spiralindex_start_of_ring</code>), <dfn>start of each segment</dfn>, and <dfn>position within the segments</dfn>.</p></div> <div><pre>function spiralindex_start_of_ring(radius):
    return 1 + 3 * radius * (radius - 1)

function spiralindex_to_radius(index):
    // solve for 'radius' in equation: index = 1 + 3 * radius * (radius-1)
    return floor((sqrt(12 * index - 3) + 3) / 6)

function spiral_to_cube(index):
    center = Hex(0, 0, 0)
    radius = spiralindex_to_radius(index)
    ringstart = spiralindex_start_of_ring(radius)
    return cube_ring(center, radius)[index - ringstart]

function cube_to_spiral(hex):
    center = Hex(0, 0, 0)
    radius = cube_distance(hex, center)
    ring_hexes = cube_ring(center, radius)
    for each 0 ≤ i &lt; ring_hexes.length:
        if hex == ring_hexes[i]:
             return i + radius_to_startindex(radius)</pre> <p>To convert form a cube/axial coordinate to a spiral index is trickier. In the example <code>cube_to_spiral</code> function I linearly search the hexes in a ring, but this can be optimized.</p> <p>I haven't yet used any of the spiral coordinate systems in a real project. There are many possible variants, including <a href="https://x.com/BEBischof/status/969813312341917697">outside-in</a><sup class="print-endnote">[33]</sup>, 1-based, making sure numbers are adjacent, alternating clockwise/counterclockwise, and probably more. See <a href="https://github.com/ljedrz/hex-spiral/">ljedrz/hex-spiral</a><sup class="print-endnote">[34]</sup> and <a href="https://github.com/lucidBrot/hexgridspiral?tab=readme-ov-file#coordinate-systems">lucidBrot/hexgridspiral</a><sup class="print-endnote">[35]</sup> for some implementations.</p></div></div><script type="x-template" id="template-diagram-spiral-coordinates"><div id="diagram-spiral-coordinates" class="float-container">
<div>
<h3 id="rings-spiral-coordinates">
<span>Spiral coordinates</span><a class="anchor" aria-hidden="true" href="#rings-spiral-coordinates">#</a>
</h3>
<p>Following the spiral path above lets us build one of many <em>spiral coordinate systems</em>:</p>
</div>
<div class="float-right">
<figure><a-svg style="max-width:31.25rem"><a-grid v-bind:hexes="grid"><g slot-scope="props"><a-hex></a-hex></g></a-grid><path class="path" v-bind:class="{visible: show === 'none'}" v-bind:d="path(spiral)"></path><path class="path" v-bind:class="{visible: show === 'radius' || show === 'start'}" v-bind:d="path(...rings)"></path><path class="path" v-bind:class="{visible: show === 'start'}" v-bind:d="path(ringStarts)"></path><path class="path" v-bind:class="{visible: show === 'segments' || show === 'position'}" v-bind:d="path(...ringSegmentStart)"></path><path class="path" v-bind:class="{visible: show === 'position'}" v-bind:d="path(...ringSegmentFull)"></path><a-grid v-bind:hexes="grid"><g slot-scope="props" style="pointer-events:none"><a-text>{{label(props.hex)}}</a-text></g></a-grid></a-svg></figure><p>The main ingredients we need are the <hover-show show="radius">radius</hover-show> (<code>spiralindex_to_radius</code>), <hover-show show="start">start of each ring</hover-show> (<code>spiralindex_start_of_ring</code>), <hover-show show="segments">start of each segment</hover-show>, and <hover-show show="position">position within the segments</hover-show>.</p>
</div>
<div>
<pre>function spiralindex_start_of_ring(radius):
    return 1 + 3 * radius * (radius - 1)

function spiralindex_to_radius(index):
    // solve for 'radius' in equation: index = 1 + 3 * radius * (radius-1)
    return floor((sqrt(12 * index - 3) + 3) / 6)

function spiral_to_cube(index):
    center = Hex(0, 0, 0)
    radius = spiralindex_to_radius(index)
    ringstart = spiralindex_start_of_ring(radius)
    return cube_ring(center, radius)[index - ringstart]

function cube_to_spiral(hex):
    center = Hex(0, 0, 0)
    radius = cube_distance(hex, center)
    ring_hexes = cube_ring(center, radius)
    for each 0 ≤ i &lt; ring_hexes.length:
        if hex == ring_hexes[i]:
             return i + radius_to_startindex(radius)</pre>
<p>To convert form a cube/axial coordinate to a spiral index is trickier. In the example <code>cube_to_spiral</code> function I linearly search the hexes in a ring, but this can be optimized.</p>
<p>I haven't yet used any of the spiral coordinate systems in a real project. There are many possible variants, including <a href="https://x.com/BEBischof/status/969813312341917697">outside-in</a><sup class="print-endnote">[33]</sup>, 1-based, making sure numbers are adjacent, alternating clockwise/counterclockwise, and probably more. See <a href="https://github.com/ljedrz/hex-spiral/">ljedrz/hex-spiral</a><sup class="print-endnote">[34]</sup> and <a href="https://github.com/lucidBrot/hexgridspiral?tab=readme-ov-file#coordinate-systems">lucidBrot/hexgridspiral</a><sup class="print-endnote">[35]</sup> for some implementations.</p>
</div>
</div></script></section><section><h2 id="field-of-view">
<span><a href="https://www.redblobgames.com/grids/hexagons/#field-of-view">Field of view</a></span><a class="anchor" href="https://www.redblobgames.com/grids/hexagons/#field-of-view">#</a>
</h2>
<div class="float-container">
<div>
<p>Given a location and a distance, what is visible from that location, not blocked by obstacles? The simplest way to do this is to draw a line to every hex that's in range. If the line doesn't hit any walls, then you can see the hex. Mouse over a hex to see the line being drawn to that hex, and which walls it hits.</p>
<p>This algorithm can be slow for large areas but it's so easy to implement that it's what I recommend starting with.</p>
</div>
<figure id="diagram-field-of-view" class="float-right"><svg viewBox="-1492.2431864335456 -1492.2431864335456 2984.486372867091 2984.486372867091" style="max-width: 37.5rem;"><g fill="white" stroke="black" class=" rotate-pointy"><g class="grid"><g transform="translate(-1200,-693)"><g class="shadow wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-1200,-520)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-1200,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-1200,-173)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-1200,0)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-1200,173)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-1200,346)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-1200,520)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-1200,693)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-1050,-779)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-1050,-606)"><g class="shadow wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-1050,-433)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-1050,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-1050,-87)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-1050,87)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-1050,260)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-1050,433)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-1050,606)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-1050,779)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-900,-866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-900,-693)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-900,-520)"><g class="shadow wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-900,-346)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-900,-173)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-900,0)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-900,173)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-900,346)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-900,520)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-900,693)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-900,866)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,-953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,-779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,-606)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,-433)"><g class="shadow wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,-260)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,-87)"><g class="shadow wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,87)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,260)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,433)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,606)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,779)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,-1039)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,-866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,-520)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,-346)"><g class="shadow wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,0)"><g class="shadow wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,173)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,346)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,520)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,693)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,1039)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-1126)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-260)"><g class="shadow wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,87)"><g class="shadow wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,260)"><g class="shadow wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,433)"><g class="shadow wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,1126)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-1212)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-1039)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-173)"><g class="shadow wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,1039)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,1212)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-1299)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-1126)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,779)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,953)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,1126)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,1299)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-1386)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-1212)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-1039)"><g class="shadow wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-866)"><g class="shadow wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-693)"><g class="shadow wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-520)"><g class="shadow wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,0)"><g class="origin"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,346)"><g class="shadow wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,520)"><g class="shadow wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,693)"><g class="shadow wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,866)"><g class="shadow wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,1039)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,1212)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,1386)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-1299)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-1126)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-953)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-779)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-606)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-433)"><g class="shadow wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,779)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,953)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,1126)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,1299)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-1212)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-1039)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-866)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-693)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-520)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-346)"><g class="shadow wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,1039)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,1212)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-1126)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-953)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-779)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-606)"><g class="highlight shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-433)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-260)"><g class="shadow wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,779)"><g class="shadow wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,953)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,1126)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,-1039)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,-866)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,-693)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,-520)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,-346)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,693)"><g class="shadow wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,866)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,1039)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,-953)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,-779)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,-606)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,-433)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,779)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,953)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(900,-866)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(900,-693)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(900,-520)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(900,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(900,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(900,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(900,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(900,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(900,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(900,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(900,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(1050,-779)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(1050,-606)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(1050,-433)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(1050,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(1050,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(1050,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(1050,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(1050,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(1050,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(1050,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(1200,-693)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(1200,-520)"><g class="shadow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(1200,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(1200,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(1200,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(1200,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(1200,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(1200,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(1200,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g></g><circle r="20" cx="0.00015000000000000001" cy="0.00043301270189221924" class="visible"></circle><circle r="20" cx="90.00015000000002" cy="-121.2431235171195" class="visible"></circle><circle r="20" cx="180.00015" cy="-242.48668004694088" class="visible"></circle><circle r="20" cx="270.00014999999996" cy="-363.7302365767623" class="blocked"></circle><circle r="20" cx="360.0001500000001" cy="-484.9737931065837" class=""></circle><circle r="20" cx="450.00014999999996" cy="-606.217349636405" class=""></circle> /&gt;</g> <g transform="translate(1492.2431864335456,1492.2431864335456) scale(1.5)"><g transform="translate(-175,-50) scale(0.5)" class="toggle-orientation"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em">flat</text></g> <g transform="translate(-75,-50) rotate(-30) scale(0.5)" class="toggle-orientation selected"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em" transform="rotate(30)">pointy</text></g></g> <!----></svg></figure><script type="x-template" id="template-diagram-field-of-view"><figure id="diagram-field-of-view" class="float-right"><a-svg style="max-width:37.5rem" v-bind:orientation-button-scale="1.5"><a-grid v-bind:hexes="grid" v-bind:walls="walls" v-bind:setHighlight="setHighlight"><g slot-scope="props" v-bind:class="className(props.hex)"><a-hex></a-hex></g></a-grid><circle v-for="p in interpolationPoints" r="20" v-bind:cx="p.point.x" v-bind:cy="p.point.y" v-bind:class="{blocked: p.blocked, visible: p.visible}"></circle> /&gt;</a-svg></figure></script><!--
           <p>
           Another algorithm would be to move outwards from the center
           hex. Keep a set of ranges of angles that are in shadow. If you
           encounter a hex that's within one of the ranges, then it's not
           visible. If you encounter a hex that's an obstacle, you generate
           a new angle range and union it with the existing set. I think <a
           href="https://en.wikipedia.org/wiki/Interval_tree">interval
           trees</a> might be useful for this. <s> sketch is: for each
           hex in the spiral ring traversal { calculate min/max angle of
           the hex; if range is entirely contained within shadow range set,
           skip; otherwise if it's an obstacle, add range to shadow range
           set; otherwise hex is visible } but dealing with the angle
           ranges crossing 0 deg will be an added complication </s>
           </p>
      --><p>There are many different ways to define what's "visible". Do you want to be able to see the center of the other hex from the center of the starting hex? Do you want to see any part of the other hex from the center of the starting point? Maybe any part of the other hex from any part of the starting point? Are there obstacles that occupy less than a complete hex? Field of view turns out to be trickier and more varied than it might seem at first. Start with the simplest algorithm, but expect that it may not compute exactly the answer you want for your project. <span id="field-of-view-illogical-results">There are even situations where the simple algorithm produces results that are illogical.</span></p>
<p><a href="http://www-cs-students.stanford.edu/~amitp/Articles/HexLOS.html">Clark Verbrugge's guide</a><sup class="print-endnote">[36]</sup> describes a “start at center and move outwards” algorithm to calculate field of view. Also see <a href="https://www.redblobgames.com/articles/visibility/">my article on 2D visibility calculation</a> for an algorithm that works on polygons, including hexagons. For grids, the roguelike community has a nice set of algorithms for square grids (see <a href="https://www.adammil.net/blog/v125_Roguelike_Vision_Algorithms.html">Roguelike Vision Algorithms</a><sup class="print-endnote">[37]</sup> and <a href="https://www.roguebasin.com/index.php/Pre-Computed_Visibility_Tries">Pre-Computed Visibility Tries</a><sup class="print-endnote">[38]</sup> and <a href="https://www.roguebasin.com/index.php/Field_of_Vision">Field of Vision</a><sup class="print-endnote">[39]</sup>); some of them might be adapted for hex grids.</p>
</div></section><section><h2 id="hex-to-pixel">
<span><a href="https://www.redblobgames.com/grids/hexagons/#hex-to-pixel">Hex to pixel</a></span><a class="anchor" href="https://www.redblobgames.com/grids/hexagons/#hex-to-pixel">#</a>
</h2>
<p>For hex to pixel, it's useful to review the <a href="https://www.redblobgames.com/grids/hexagons/#basics">size and spacing diagram</a> at the top of the page where we defined the <code>horiz</code> and <code>vert</code> spacing between adjacent hexagons.</p>
<h3 id="hex-to-pixel-axial">
<span>Axial coordinates</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#hex-to-pixel-axial">#</a>
</h3>
<div id="diagram-hex-to-pixel-axial" class="float-container"><p>For axial coordinates, the way to think about hex to pixel conversion is to look at the <em>basis vectors</em>. The arrow (0,0)→(1,0) is the <span class="q">q</span> basis vector <span class="q">(x=sqrt(3), y=0)</span> and (0,0)→(0,1) is the <span class="r">r</span> basis vector <span class="r">(x=sqrt(3)/2, y=3/2)</span>. The pixel coordinate is <code>q_basis * q + r_basis * r</code>. For example, the hex at (1,1) is the sum of 1 q vector and 1 r vector. A hex at (3,2) would be the sum of 3 q vectors and 2 r vectors.</p> <figure class="float-right"><svg viewBox="-102 -102 450.4101615137755 450.41016151377545" style="max-width: 12.5rem;"><g fill="white" stroke="black" class=" rotate-pointy"><g class="grid"><g transform="translate(0,0)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">0, 0</text></g></g><g transform="translate(150,87)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">+1, 0</text></g></g><g transform="translate(0,173)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">0, +1</text></g></g><g transform="translate(150,260)"><g><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate">+1, +1</text></g></g></g><path transform="translate(135.0,77.9) rotate(-150)" d="M 0 0 l 20 20 l 0 -10 l 110.88457268119896 0 l -3 -10 l 3 -10 l -110.88457268119896 0 l 0 -10 Z" class="r"></path><path transform="translate(0.0,155.9) rotate(-90)" d="M 0 0 l 20 20 l 0 -10 l 110.88457268119896 0 l -3 -10 l 3 -10 l -110.88457268119896 0 l 0 -10 Z" class="q"></path><path transform="translate(150.0,259.8) rotate(-90)" d="M 0 0 l 20 20 l 0 -10 l 128.20508075688775 0 l -3 -10 l 3 -10 l -128.20508075688775 0 l 0 -10 Z" class="q"></path><path transform="translate(150.0,259.8) rotate(-150)" d="M 0 0 l 20 20 l 0 -10 l 128.20508075688772 0 l -3 -10 l 3 -10 l -128.20508075688772 0 l 0 -10 Z" class="r"></path></g> <!----> <!----></svg></figure><p>The code for <label><input type="radio" value="flat">flat top</label> or <label><input type="radio" value="pointy">pointy top</label> is:</p> <pre>function pointy_hex_to_pixel(hex):
    // hex to cartesian
    var x = (<span class="q">sqrt(3)</span> * hex.q  +  <span class="r">sqrt(3)/2</span> * hex.r)
    var y = (                         <span class="r">3./2</span> * hex.r)
    // scale cartesian coordinates
    x = x * size
    y = y * size
    return Point(x, y)</pre> <p>This can also be viewed as a matrix multiply, where the basis vectors are the columns of the matrix:</p> <pre class="matrix float-right">⎡x⎤            ⎡ <span class="q">sqrt(3)</span>   <span class="r">sqrt(3)/2</span> ⎤   ⎡q⎤
⎢ ⎥  =  size × ⎢                     ⎥ × ⎢ ⎥
⎣y⎦            ⎣    <span class="q">0</span>          <span class="r">3/2</span>   ⎦   ⎣r⎦</pre> <p>The matrix approach will come in handy later when we want to <a href="https://www.redblobgames.com/grids/hexagons/#pixel-to-hex">convert pixel coordinates back to hex coordinates</a>. To invert the process of hex-to-pixel into a pixel-to-hex process, we will invert the hex-to-pixel matrix into a pixel-to-hex matrix.</p></div><script type="x-template" id="template-diagram-hex-to-pixel-axial"><div id="diagram-hex-to-pixel-axial" class="float-container">
<p>For axial coordinates, the way to think about hex to pixel conversion is to look at the <em>basis vectors</em>. The arrow (0,0)→(1,0) is the <span class="q">q</span> basis vector <span v-if="layout === 'pointy'" class="q">(x=sqrt(3), y=0)</span><span v-else="" class="q">(x=3/2, y=sqrt(3)/2)</span> and (0,0)→(0,1) is the <span class="r">r</span> basis vector <span v-if="layout === 'flat'" class="r">(x=0, y=sqrt(3))</span><span v-else="" class="r">(x=sqrt(3)/2, y=3/2)</span>. The pixel coordinate is <code>q_basis * q + r_basis * r</code>. For example, the hex at (1,1) is the sum of 1 q vector and 1 r vector. A hex at (3,2) would be the sum of 3 q vectors and 2 r vectors.</p>
<figure class="float-right"><a-svg style="max-width:12.5rem" v-bind:orientation-button-scale="0" v-bind:padding="2"><a-grid v-bind:hexes="grid"><g slot-scope="props"><a-hex></a-hex><a-text>{{props.hex.q | signed}}, {{props.hex.r | signed}}</a-text></g></a-grid><a-arrow class="r" v-bind:w="10" v-bind:skip="25" v-bind:A="center(grid[0])" v-bind:B="almost(grid[1])"></a-arrow><a-arrow class="q" v-bind:w="10" v-bind:skip="25" v-bind:A="center(grid[0])" v-bind:B="almost(grid[2])"></a-arrow><a-arrow class="q" v-bind:w="10" v-bind:skip="25" v-bind:A="center(grid[1])" v-bind:B="center(grid[3])"></a-arrow><a-arrow class="r" v-bind:w="10" v-bind:skip="25" v-bind:A="center(grid[2])" v-bind:B="center(grid[3])"></a-arrow></a-svg></figure><p>The code for <label><input type="radio" v-model="layout" value="flat">flat top</label> or <label><input type="radio" v-model="layout" value="pointy">pointy top</label> is:</p>
<pre v-if="layout === 'pointy'">function pointy_hex_to_pixel(hex):
    // hex to cartesian
    var x = (<span class="q">sqrt(3)</span> * hex.q  +  <span class="r">sqrt(3)/2</span> * hex.r)
    var y = (                         <span class="r">3./2</span> * hex.r)
    // scale cartesian coordinates
    x = x * size
    y = y * size
    return Point(x, y)</pre>
<pre v-else="">function flat_hex_to_pixel(hex):
    // hex to cartesian
    var x = (     <span class="q">3./2</span> * hex.q                    )
    var y = (<span class="q">sqrt(3)/2</span> * hex.q  +  <span class="r">sqrt(3)</span> * hex.r)
    // scale cartesian coordinates
    x = x * size
    y = y * size
    return Point(x, y)</pre>
<p>This can also be viewed as a matrix multiply, where the basis vectors are the columns of the matrix:</p>
<pre v-if="layout === 'pointy'" class="matrix float-right">⎡x⎤            ⎡ <span class="q">sqrt(3)</span>   <span class="r">sqrt(3)/2</span> ⎤   ⎡q⎤
⎢ ⎥  =  size × ⎢                     ⎥ × ⎢ ⎥
⎣y⎦            ⎣    <span class="q">0</span>          <span class="r">3/2</span>   ⎦   ⎣r⎦</pre>
<pre v-else="" class="matrix float-right">⎡x⎤            ⎡    <span class="q">3/2</span>         <span class="r">0</span>    ⎤   ⎡q⎤
⎢ ⎥  =  size × ⎢                     ⎥ × ⎢ ⎥
⎣y⎦            ⎣ <span class="q">sqrt(3)/2</span>   <span class="r">sqrt(3)</span> ⎦   ⎣r⎦</pre>
<p>The matrix approach will come in handy later when we want to <a href="#pixel-to-hex">convert pixel coordinates back to hex coordinates</a>. To invert the process of hex-to-pixel into a pixel-to-hex process, we will invert the hex-to-pixel matrix into a pixel-to-hex matrix.</p>
</div></script><h3 id="hex-to-pixel-offset">
<span>Offset coordinates</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#hex-to-pixel-offset">#</a>
</h3>
<div id="code-hex-to-pixel-offset"><p>For offset coordinates, we need to offset either the column or row number (it will no longer be an integer).</p> <pre>function <b>oddr</b>_offset_to_pixel(hex):
    // hex to cartesian
    var x = sqrt(3) * (hex.col <b>+</b> 0.5 * (hex.row&amp;1))
    var y =    3./2 * hex.row
    // scale cartesian coordinates
    x = x * size
    y = y * size
    return Point(x, y)</pre> <div>Offset coordinates:&nbsp; <label><input type="radio" value="odd-r">&nbsp;odd-r&nbsp;</label><label><input type="radio" value="even-r">&nbsp;even-r&nbsp;</label><label><input type="radio" value="odd-q">&nbsp;odd-q&nbsp;</label><label><input type="radio" value="even-q">&nbsp;even-q&nbsp;</label></div> <p>Unfortunately offset coordinates don't have basis vectors that we can use with a matrix. This is one reason <a href="https://www.redblobgames.com/grids/hexagons/#pixel-to-hex">pixel-to-hex</a> conversions are harder with offset coordinates.</p> <p>Another approach is to convert the offset coordinates into axial coordinates, then use the axial to pixel conversion. By inlining the conversion code then optimizing, it will end up being the same as above.</p></div><script type="x-template" id="template-code-hex-to-pixel-offset"><div id="code-hex-to-pixel-offset">
<p>For offset coordinates, we need to offset either the column or row number (it will no longer be an integer).</p>
<pre v-if="conversion === 'odd-r'">function <b>oddr</b>_offset_to_pixel(hex):
    // hex to cartesian
    var x = sqrt(3) * (hex.col <b>+</b> 0.5 * (hex.row&amp;1))
    var y =    3./2 * hex.row
    // scale cartesian coordinates
    x = x * size
    y = y * size
    return Point(x, y)</pre>
<pre v-else-if="conversion === 'even-r'">function <b>evenr</b>_offset_to_pixel(hex):
    // hex to cartesian
    var x = sqrt(3) * (hex.col <b>-</b> 0.5 * (hex.row&amp;1))
    var y =    3./2 * hex.row
    // scale cartesian coordinates
    x = x * size
    y = y * size
    return Point(x, y)</pre>
<pre v-else-if="conversion === 'odd-q'">function <b>oddq</b>_offset_to_pixel(hex):
    // hex to cartesian
    var x =    3./2 * hex.col
    var y = sqrt(3) * (hex.row <b>+</b> 0.5 * (hex.col&amp;1))
    // scale cartesian coordinates
    x = x * size
    y = y * size
    return Point(x, y)</pre>
<pre v-else="">function <b>evenq</b>_offset_to_pixel(hex):
    // hex to cartesian
    var x =    3./2 * hex.col
    var y = sqrt(3) * (hex.row <b>-</b> 0.5 * (hex.col&amp;1))
    // scale cartesian coordinates
    x = x * size
    y = y * size
    return Point(x, y)</pre>
<div>Offset coordinates:  <label><input type="radio" v-model="conversion" value="odd-r"> odd-r </label><label><input type="radio" v-model="conversion" value="even-r"> even-r </label><label><input type="radio" v-model="conversion" value="odd-q"> odd-q </label><label><input type="radio" v-model="conversion" value="even-q"> even-q </label>
</div>
<p>Unfortunately offset coordinates don't have basis vectors that we can use with a matrix. This is one reason <a href="#pixel-to-hex">pixel-to-hex</a> conversions are harder with offset coordinates.</p>
<p>Another approach is to convert the offset coordinates into axial coordinates, then use the axial to pixel conversion. By inlining the conversion code then optimizing, it will end up being the same as above.</p>
</div></script><h3 id="hex-to-pixel-doubled">
<span>Doubled coordinates</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#hex-to-pixel-doubled">#</a>
</h3>
<p>Doubled makes many algorithms simpler than offset.</p>
<pre>function doublewidth_to_pixel(hex):
    // hex to cartesian
    var x = sqrt(3)/2 * hex.col
    var y =      3./2 * hex.row
    // scale cartesian coordinates
    x = x * size
    y = y * size
    return Point(x, y)

function doubleheight_to_pixel(hex):
    // hex to cartesian
    var x =      3./2 * hex.col
    var y = sqrt(3)/2 * hex.row
    // scale cartesian coordinates
    x = x * size
    y = y * size
    return Point(x, y)</pre>
<h3 id="hex-to-pixel-mod-origin">
<span>Mod: non-zero origin</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#hex-to-pixel-mod-origin">#</a>
</h3>
<p>Some projects have grids that are not centered at 0,0. We can adapt any of the hex-to-pixel functions above by <em>chaining</em> one additional operation to the end:</p>
<pre v-if="layout === &#39;pointy&#39;">function *_to_pixel(hex):
    // hex to cartesian
    …
    // scale cartesian coordinates
    …
    <b>// translate cartesian coordinates</b>
    x = x + origin.x
    y = y + origin.y
    return Point(x, y)</pre>
<p>Later, <a href="https://www.redblobgames.com/grids/hexagons/#pixel-to-hex-mod-origin">when converting pixel to hex</a>, we'll undo this by subtracting the origin at the beginning.</p>
<h3 id="hex-to-pixel-mod-pixelsize">
<span>Mod: pixel sizes</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#hex-to-pixel-mod-pixelsize">#</a>
</h3>
<p>Some projects need hexagons to fit a specific size. We can use the formulas from the <a href="https://www.redblobgames.com/grids/hexagons/#basics">Geometry</a> section of this page to change the scaling for any of the hex-to-pixel functions to <em>separately</em> multiply by x and y scales.</p>
<div id="code-hex-to-pixel-mod-pixelsize"><div>Desired size <label>width=<input type="number" style="width: 4em; text-align: right;"></label> ✕ <label>height=<input type="number" style="width: 4em; text-align: right;"></label> in pixels</div> <pre>function *_to_pixel(hex):
    // hex to cartesian
    …
    <b>// scale cartesian coordinates</b>
    x = x * (17 / sqrt(3))
    y = y * (24 / 2.)</pre> <div class="text-center"><label><input type="radio" value="flat">flat top</label> or <label><input type="radio" value="pointy">pointy top</label></div> <p>Later, <a href="https://www.redblobgames.com/grids/hexagons/#pixel-to-hex-mod-pixelsize">when converting pixel to hex</a>, we'll undo this by dividing by the x and y scales.</p> <p>To further simplify, we can <em>inline</em> the scaling into matrix multiply to cancel out the <code>sqrt(3)</code>. For example, here's the Axial code before inlining:</p> <pre>function pointy_hex_to_pixel(hex):
    // hex to cartesian
    var x = (<span class="q">sqrt(3)</span> * hex.q  +  <span class="r">sqrt(3)/2</span> * hex.r)
    var y = (                         <span class="r">3./2</span> * hex.r)
    // scale cartesian coordinates
    x = x * (17 / sqrt(3))
    y = y * (24 / 2.)
    return Point(x, y)</pre> <div>Here's the inlined version with the <code>sqrt(3)</code> canceled out:</div> <pre>function pointy_hex_to_pixel(hex):
    var x = 17 * (hex.q  +  <span class="r">1./2</span> * hex.r)
    var y = 24 * (          <span class="r">3./4</span> * hex.r)
    return Point(x, y)</pre> <p>Similarly, inlining the scaling into the offset or doubled conversion will simplify the code.</p></div><script type="x-template" id="template-code-hex-to-pixel-mod-pixelsize"><div id="code-hex-to-pixel-mod-pixelsize">
<div>Desired size <label>width=<input type="number" v-model="desiredWidth" style="width:4em;text-align:right"></label> ✕ <label>height=<input type="number" v-model="desiredHeight" style="width:4em;text-align:right"></label> in pixels</div>
<pre>function *_to_pixel(hex):
    // hex to cartesian
    …
    <b>// scale cartesian coordinates</b>
    x = x * ({{desiredWidth}} / {{ layout === 'pointy'? "sqrt(3)":"2." }})
    y = y * ({{desiredHeight}} / {{ layout === 'pointy'? "2.":"sqrt(3)" }})</pre>
<div class="text-center">
<label><input type="radio" v-model="layout" value="flat">flat top</label> or <label><input type="radio" v-model="layout" value="pointy">pointy top</label>
</div>
<p>Later, <a href="#pixel-to-hex-mod-pixelsize">when converting pixel to hex</a>, we'll undo this by dividing by the x and y scales.</p>
<p>To further simplify, we can <em>inline</em> the scaling into matrix multiply to cancel out the <code>sqrt(3)</code>. For example, here's the Axial code before inlining:</p>
<pre v-if="layout === 'pointy'">function pointy_hex_to_pixel(hex):
    // hex to cartesian
    var x = (<span class="q">sqrt(3)</span> * hex.q  +  <span class="r">sqrt(3)/2</span> * hex.r)
    var y = (                         <span class="r">3./2</span> * hex.r)
    // scale cartesian coordinates
    x = x * ({{desiredWidth}} / sqrt(3))
    y = y * ({{desiredHeight}} / 2.)
    return Point(x, y)</pre>
<pre v-else="">function flat_hex_to_pixel(hex):
    // hex to cartesian
    var x = (     <span class="q">3./2</span> * hex.q                    )
    var y = (<span class="q">sqrt(3)/2</span> * hex.q  +  <span class="r">sqrt(3)</span> * hex.r)
    // scale cartesian coordinates
    x = x * ({{desiredWidth}} / 2.)
    y = y * ({{desiredHeight}} / sqrt(3))
    return Point(x, y)</pre>
<div>Here's the inlined version with the <code>sqrt(3)</code> canceled out:</div>
<pre v-if="layout === 'pointy'">function pointy_hex_to_pixel(hex):
    var x = {{desiredWidth}} * (hex.q  +  <span class="r">1./2</span> * hex.r)
    var y = {{desiredHeight}} * (          <span class="r">3./4</span> * hex.r)
    return Point(x, y)</pre>
<pre v-else="">function flat_hex_to_pixel(hex):
    var x = {{desiredWidth}} * (<span class="q">3./4</span> * hex.q          )
    var y = {{desiredHeight}} * (<span class="q">1./2</span> * hex.q  +  hex.r)
    return Point(x, y)</pre>
<p>Similarly, inlining the scaling into the offset or doubled conversion will simplify the code.</p>
</div></script></section><section><h2 id="pixel-to-hex">
<span><a href="https://www.redblobgames.com/grids/hexagons/#pixel-to-hex">Pixel to Hex</a></span><a class="anchor" href="https://www.redblobgames.com/grids/hexagons/#pixel-to-hex">#</a>
</h2>
<p>One of the most common questions is, how do I take a pixel location (such as a mouse click) and convert it into a hex grid coordinate? I'll show how to do this for axial/cube coordinates. For offset and doubled coordinates, I first convert pixel to axial/cube, and then axial/cube to offset/doubled, but there are more direct algorithms also.</p>
<h3 id="pixel-to-hex-axial">
<span>Axial coordinates</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#pixel-to-hex-axial">#</a>
</h3>
<div id="diagram-pixel-to-hex" class="float-container"><figure class="float-right"><svg viewBox="-1000 -490 2000 980" style="max-width: 37.5rem;"><g fill="white" stroke="black" class=" rotate-pointy"><g class="grid"><g transform="translate(-1050,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-7</tspan>, <tspan class="r-coord">+1</tspan></text></g></g><g transform="translate(-1050,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-7</tspan>, <tspan class="r-coord">+2</tspan></text></g></g><g transform="translate(-1050,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-7</tspan>, <tspan class="r-coord">+3</tspan></text></g></g><g transform="translate(-1050,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-7</tspan>, <tspan class="r-coord">+4</tspan></text></g></g><g transform="translate(-1050,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-7</tspan>, <tspan class="r-coord">+5</tspan></text></g></g><g transform="translate(-1050,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-7</tspan>, <tspan class="r-coord">+6</tspan></text></g></g><g transform="translate(-1050,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-7</tspan>, <tspan class="r-coord">+7</tspan></text></g></g><g transform="translate(-900,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-6</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(-900,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-6</tspan>, <tspan class="r-coord">+1</tspan></text></g></g><g transform="translate(-900,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-6</tspan>, <tspan class="r-coord">+2</tspan></text></g></g><g transform="translate(-900,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-6</tspan>, <tspan class="r-coord">+3</tspan></text></g></g><g transform="translate(-900,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-6</tspan>, <tspan class="r-coord">+4</tspan></text></g></g><g transform="translate(-900,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-6</tspan>, <tspan class="r-coord">+5</tspan></text></g></g><g transform="translate(-900,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-6</tspan>, <tspan class="r-coord">+6</tspan></text></g></g><g transform="translate(-750,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-5</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(-750,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-5</tspan>, <tspan class="r-coord">+1</tspan></text></g></g><g transform="translate(-750,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-5</tspan>, <tspan class="r-coord">+2</tspan></text></g></g><g transform="translate(-750,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-5</tspan>, <tspan class="r-coord">+3</tspan></text></g></g><g transform="translate(-750,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-5</tspan>, <tspan class="r-coord">+4</tspan></text></g></g><g transform="translate(-750,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-5</tspan>, <tspan class="r-coord">+5</tspan></text></g></g><g transform="translate(-750,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-5</tspan>, <tspan class="r-coord">+6</tspan></text></g></g><g transform="translate(-600,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-4</tspan>, <tspan class="r-coord">-1</tspan></text></g></g><g transform="translate(-600,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-4</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(-600,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-4</tspan>, <tspan class="r-coord">+1</tspan></text></g></g><g transform="translate(-600,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-4</tspan>, <tspan class="r-coord">+2</tspan></text></g></g><g transform="translate(-600,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-4</tspan>, <tspan class="r-coord">+3</tspan></text></g></g><g transform="translate(-600,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-4</tspan>, <tspan class="r-coord">+4</tspan></text></g></g><g transform="translate(-600,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-4</tspan>, <tspan class="r-coord">+5</tspan></text></g></g><g transform="translate(-450,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-3</tspan>, <tspan class="r-coord">-1</tspan></text></g></g><g transform="translate(-450,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-3</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(-450,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-3</tspan>, <tspan class="r-coord">+1</tspan></text></g></g><g transform="translate(-450,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-3</tspan>, <tspan class="r-coord">+2</tspan></text></g></g><g transform="translate(-450,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-3</tspan>, <tspan class="r-coord">+3</tspan></text></g></g><g transform="translate(-450,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-3</tspan>, <tspan class="r-coord">+4</tspan></text></g></g><g transform="translate(-450,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-3</tspan>, <tspan class="r-coord">+5</tspan></text></g></g><g transform="translate(-300,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-2</tspan>, <tspan class="r-coord">-2</tspan></text></g></g><g transform="translate(-300,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-2</tspan>, <tspan class="r-coord">-1</tspan></text></g></g><g transform="translate(-300,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-2</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(-300,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-2</tspan>, <tspan class="r-coord">+1</tspan></text></g></g><g transform="translate(-300,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-2</tspan>, <tspan class="r-coord">+2</tspan></text></g></g><g transform="translate(-300,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-2</tspan>, <tspan class="r-coord">+3</tspan></text></g></g><g transform="translate(-300,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-2</tspan>, <tspan class="r-coord">+4</tspan></text></g></g><g transform="translate(-150,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-1</tspan>, <tspan class="r-coord">-2</tspan></text></g></g><g transform="translate(-150,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-1</tspan>, <tspan class="r-coord">-1</tspan></text></g></g><g transform="translate(-150,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-1</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(-150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-1</tspan>, <tspan class="r-coord">+1</tspan></text></g></g><g transform="translate(-150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-1</tspan>, <tspan class="r-coord">+2</tspan></text></g></g><g transform="translate(-150,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-1</tspan>, <tspan class="r-coord">+3</tspan></text></g></g><g transform="translate(-150,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-1</tspan>, <tspan class="r-coord">+4</tspan></text></g></g><g transform="translate(0,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">-3</tspan></text></g></g><g transform="translate(0,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">-2</tspan></text></g></g><g transform="translate(0,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">-1</tspan></text></g></g><g transform="translate(0,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(0,173)"><g class="r-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">+1</tspan></text></g></g><g transform="translate(0,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">+2</tspan></text></g></g><g transform="translate(0,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">+3</tspan></text></g></g><g transform="translate(150,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+1</tspan>, <tspan class="r-coord">-3</tspan></text></g></g><g transform="translate(150,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+1</tspan>, <tspan class="r-coord">-2</tspan></text></g></g><g transform="translate(150,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+1</tspan>, <tspan class="r-coord">-1</tspan></text></g></g><g transform="translate(150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+1</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+1</tspan>, <tspan class="r-coord">+1</tspan></text></g></g><g transform="translate(150,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+1</tspan>, <tspan class="r-coord">+2</tspan></text></g></g><g transform="translate(150,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+1</tspan>, <tspan class="r-coord">+3</tspan></text></g></g><g transform="translate(300,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+2</tspan>, <tspan class="r-coord">-4</tspan></text></g></g><g transform="translate(300,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+2</tspan>, <tspan class="r-coord">-3</tspan></text></g></g><g transform="translate(300,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+2</tspan>, <tspan class="r-coord">-2</tspan></text></g></g><g transform="translate(300,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+2</tspan>, <tspan class="r-coord">-1</tspan></text></g></g><g transform="translate(300,173)"><g class="q-axis-same"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+2</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(300,346)"><g class="q-axis-same r-axis-same highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+2</tspan>, <tspan class="r-coord">+1</tspan></text></g></g><g transform="translate(300,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+2</tspan>, <tspan class="r-coord">+2</tspan></text></g></g><g transform="translate(450,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+3</tspan>, <tspan class="r-coord">-4</tspan></text></g></g><g transform="translate(450,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+3</tspan>, <tspan class="r-coord">-3</tspan></text></g></g><g transform="translate(450,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+3</tspan>, <tspan class="r-coord">-2</tspan></text></g></g><g transform="translate(450,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+3</tspan>, <tspan class="r-coord">-1</tspan></text></g></g><g transform="translate(450,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+3</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(450,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+3</tspan>, <tspan class="r-coord">+1</tspan></text></g></g><g transform="translate(450,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+3</tspan>, <tspan class="r-coord">+2</tspan></text></g></g><g transform="translate(600,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+4</tspan>, <tspan class="r-coord">-5</tspan></text></g></g><g transform="translate(600,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+4</tspan>, <tspan class="r-coord">-4</tspan></text></g></g><g transform="translate(600,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+4</tspan>, <tspan class="r-coord">-3</tspan></text></g></g><g transform="translate(600,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+4</tspan>, <tspan class="r-coord">-2</tspan></text></g></g><g transform="translate(600,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+4</tspan>, <tspan class="r-coord">-1</tspan></text></g></g><g transform="translate(600,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+4</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(600,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+4</tspan>, <tspan class="r-coord">+1</tspan></text></g></g><g transform="translate(750,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+5</tspan>, <tspan class="r-coord">-5</tspan></text></g></g><g transform="translate(750,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+5</tspan>, <tspan class="r-coord">-4</tspan></text></g></g><g transform="translate(750,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+5</tspan>, <tspan class="r-coord">-3</tspan></text></g></g><g transform="translate(750,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+5</tspan>, <tspan class="r-coord">-2</tspan></text></g></g><g transform="translate(750,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+5</tspan>, <tspan class="r-coord">-1</tspan></text></g></g><g transform="translate(750,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+5</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(750,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+5</tspan>, <tspan class="r-coord">+1</tspan></text></g></g><g transform="translate(900,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+6</tspan>, <tspan class="r-coord">-6</tspan></text></g></g><g transform="translate(900,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+6</tspan>, <tspan class="r-coord">-5</tspan></text></g></g><g transform="translate(900,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+6</tspan>, <tspan class="r-coord">-4</tspan></text></g></g><g transform="translate(900,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+6</tspan>, <tspan class="r-coord">-3</tspan></text></g></g><g transform="translate(900,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+6</tspan>, <tspan class="r-coord">-2</tspan></text></g></g><g transform="translate(900,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+6</tspan>, <tspan class="r-coord">-1</tspan></text></g></g><g transform="translate(900,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+6</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(1050,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+7</tspan>, <tspan class="r-coord">-6</tspan></text></g></g><g transform="translate(1050,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+7</tspan>, <tspan class="r-coord">-5</tspan></text></g></g><g transform="translate(1050,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+7</tspan>, <tspan class="r-coord">-4</tspan></text></g></g><g transform="translate(1050,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+7</tspan>, <tspan class="r-coord">-3</tspan></text></g></g><g transform="translate(1050,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+7</tspan>, <tspan class="r-coord">-2</tspan></text></g></g><g transform="translate(1050,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+7</tspan>, <tspan class="r-coord">-1</tspan></text></g></g><g transform="translate(1050,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+7</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(0,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">+4</tspan></text></g></g><g transform="translate(0,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">+5</tspan></text></g></g><g transform="translate(150,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+1</tspan>, <tspan class="r-coord">+4</tspan></text></g></g><g transform="translate(150,953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+1</tspan>, <tspan class="r-coord">+5</tspan></text></g></g><g transform="translate(300,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+2</tspan>, <tspan class="r-coord">+3</tspan></text></g></g><g transform="translate(300,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+2</tspan>, <tspan class="r-coord">+4</tspan></text></g></g><g transform="translate(450,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+3</tspan>, <tspan class="r-coord">+3</tspan></text></g></g><g transform="translate(450,953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+3</tspan>, <tspan class="r-coord">+4</tspan></text></g></g><g transform="translate(600,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+4</tspan>, <tspan class="r-coord">+2</tspan></text></g></g><g transform="translate(600,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+4</tspan>, <tspan class="r-coord">+3</tspan></text></g></g><g transform="translate(750,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+5</tspan>, <tspan class="r-coord">+2</tspan></text></g></g><g transform="translate(750,953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+5</tspan>, <tspan class="r-coord">+3</tspan></text></g></g><g transform="translate(900,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+6</tspan>, <tspan class="r-coord">+1</tspan></text></g></g><g transform="translate(900,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+6</tspan>, <tspan class="r-coord">+2</tspan></text></g></g><g transform="translate(1050,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+7</tspan>, <tspan class="r-coord">+1</tspan></text></g></g><g transform="translate(1050,953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">+7</tspan>, <tspan class="r-coord">+2</tspan></text></g></g><g transform="translate(-1050,-779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-7</tspan>, <tspan class="r-coord">-1</tspan></text></g></g><g transform="translate(-1050,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-7</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(-900,-866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-6</tspan>, <tspan class="r-coord">-2</tspan></text></g></g><g transform="translate(-900,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-6</tspan>, <tspan class="r-coord">-1</tspan></text></g></g><g transform="translate(-750,-779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-5</tspan>, <tspan class="r-coord">-2</tspan></text></g></g><g transform="translate(-750,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-5</tspan>, <tspan class="r-coord">-1</tspan></text></g></g><g transform="translate(-600,-866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-4</tspan>, <tspan class="r-coord">-3</tspan></text></g></g><g transform="translate(-600,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-4</tspan>, <tspan class="r-coord">-2</tspan></text></g></g><g transform="translate(-450,-779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-3</tspan>, <tspan class="r-coord">-3</tspan></text></g></g><g transform="translate(-450,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-3</tspan>, <tspan class="r-coord">-2</tspan></text></g></g><g transform="translate(-300,-866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-2</tspan>, <tspan class="r-coord">-4</tspan></text></g></g><g transform="translate(-300,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-2</tspan>, <tspan class="r-coord">-3</tspan></text></g></g><g transform="translate(-150,-779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-1</tspan>, <tspan class="r-coord">-4</tspan></text></g></g><g transform="translate(-150,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">-1</tspan>, <tspan class="r-coord">-3</tspan></text></g></g><g transform="translate(0,-866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">-5</tspan></text></g></g><g transform="translate(0,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">-4</tspan></text></g></g></g><g stroke-opacity="0.5"><line x1="-1500" y1="-866.0254037844386" x2="1500" y2="866.0254037844386" class="q"></line><line x1="0" y1="-1732.0508075688772" x2="0" y2="1732.0508075688772" class="r"></line><line x1="330" y1="398.3716857408417" x2="0" y2="207.84609690826525" class="q"></line><line x1="330" y1="398.3716857408417" x2="330" y2="190.52558883257652" class="r"></line></g><circle r="5" class="marker" transform="translate(330,398.3716857408417)scale(3)"></circle></g> <!----> <!----></svg></figure><ol><li>First we <em>invert</em> the hex to pixel conversion. This will give us a <em>fractional</em> hex coordinate, shown as a small red circle in the diagram.</li> <li>Then we find the hex containing the fractional hex coordinate, shown as the highlighted hex in the diagram.</li></ol> <p style="clear: right;">To convert from <a href="https://www.redblobgames.com/grids/hexagons/#hex-to-pixel">hex coordinates to pixel coordinates</a>, we multiplied <code>q, r</code> by <em>basis vectors</em> to get <code>x, y</code>. This was a matrix multiply:</p> <div class="float-right"><pre class="matrix float-right">⎡x⎤            ⎛ ⎡ <span class="q">sqrt(3)</span>   <span class="r">sqrt(3)/2</span> ⎤   ⎡q⎤ ⎞
⎢ ⎥  =  size × ⎜ ⎢                     ⎥ × ⎢ ⎥ ⎥
⎣y⎦            ⎝ ⎣    <span class="q">0</span>          <span class="r">3/2</span>   ⎦   ⎣r⎦ ⎠</pre> <div class="text-center">Matrix for: <label><input type="radio" value="flat">flat top</label> or <label><input type="radio" value="pointy">pointy top</label></div></div> <p>To invert the hex-to-pixel process into a pixel-to-hex process we first invert the scaling, then&nbsp;<span><a href="https://www.wolframalpha.com/input/?i=inv+%7B%7Bsqrt%283%29%2C+sqrt%283%29%2F2%7D%2C+%7B0%2C+3%2F2%7D%7D">invert the pointy-top hex-to-pixel matrix</a><sup class="print-endnote">[40]</sup></span> into a pixel-to-hex matrix:</p> <pre class="matrix float-right">⎡q⎤     ⎡ <span class="q">sqrt(3)/3     -1/3</span> ⎤   ⎛ ⎡x⎤        ⎞
⎢ ⎥  =  ⎢                    ⎥ × ⎜ ⎢ ⎥ ÷ size ⎥
⎣r⎦     ⎣     <span class="r">0          2/3</span> ⎦   ⎝ ⎣y⎦        ⎠</pre> <p>This calculation will give us fractional axial coordinates (floats) for <code>q</code> and <code>r</code>. The <a href="https://www.redblobgames.com/grids/hexagons/#rounding">axial_round()</a> function will convert the fractional axial coordinates into integer axial hex coordinates. Here's the code:</p> <pre>function pixel_to_pointy_hex(point):
    // invert the scaling
    var x = point.x / size
    var y = point.y / size
    // cartesian to hex
    var q = (<span class="q">sqrt(3)/3</span> * x  -  <span class="q">1./3</span> * y)
    var r = (                  <span class="r">2./3</span> * y)
    return axial_round(Hex(q, r))</pre> <div class="text-center">Code for: <label><input type="radio" value="flat">flat top</label> or <label><input type="radio" value="pointy">pointy top</label></div> <p>This algorithm reuses the round() function needed in line drawing. I'm making a <a href="https://www.redblobgames.com/grids/hexagons/more-pixel-to-hex.html">list of other algorithms</a> that don't use the round() function.</p></div><script type="x-template" id="template-diagram-pixel-to-hex"><div id="diagram-pixel-to-hex" class="float-container">
<figure class="float-right"><a-svg v-bind:orientation-button-scale="0" style="max-width:37.5rem" viewBox="-1000 -490 2000 980"><a-grid v-bind:hexes="grid" v-bind:setHighlight="setHighlight"><g slot-scope="props" v-bind:class="className(props.hex)"><a-hex></a-hex><a-text><tspan class="q-coord">{{props.hex.q | signed}}</tspan>, <tspan class="r-coord">{{props.hex.r | signed}}</tspan></a-text></g></a-grid><g stroke-opacity="0.5"><line v-for="(axis, index) in axes" v-bind:key="index" v-bind:class="axis[0]" v-bind:x1="axis[1].x" v-bind:y1="axis[1].y" v-bind:x2="axis[2].x" v-bind:y2="axis[2].y"></line></g><a-circle-marker v-bind:transform="transform + 'scale(3)'"></a-circle-marker></a-svg></figure><ol>
<li>First we <em>invert</em> the hex to pixel conversion. This will give us a <em>fractional</em> hex coordinate, shown as a small red circle in the diagram.</li>
<li>Then we find the hex containing the fractional hex coordinate, shown as the highlighted hex in the diagram.</li>
</ol>
<p style="clear:right">To convert from <a href="#hex-to-pixel">hex coordinates to pixel coordinates</a>, we multiplied <code>q, r</code> by <em>basis vectors</em> to get <code>x, y</code>. This was a matrix multiply:</p>
<div class="float-right">
<pre v-if="layout === 'pointy'" class="matrix float-right">⎡x⎤            ⎛ ⎡ <span class="q">sqrt(3)</span>   <span class="r">sqrt(3)/2</span> ⎤   ⎡q⎤ ⎞
⎢ ⎥  =  size × ⎜ ⎢                     ⎥ × ⎢ ⎥ ⎥
⎣y⎦            ⎝ ⎣    <span class="q">0</span>          <span class="r">3/2</span>   ⎦   ⎣r⎦ ⎠</pre>
<pre v-else="" class="matrix float-right">⎡x⎤            ⎛ ⎡    <span class="q">3/2</span>         <span class="r">0</span>    ⎤   ⎡q⎤ ⎞
⎢ ⎥  =  size × ⎜ ⎢                     ⎥ × ⎢ ⎥ ⎥
⎣y⎦            ⎝ ⎣ <span class="q">sqrt(3)/2</span>   <span class="r">sqrt(3)</span> ⎦   ⎣r⎦ ⎠</pre>
<div class="text-center">Matrix for: <label><input type="radio" v-model="layout" value="flat">flat top</label> or <label><input type="radio" v-model="layout" value="pointy">pointy top</label>
</div>
</div>
<p>To invert the hex-to-pixel process into a pixel-to-hex process we first invert the scaling, then <!--
             Vue+inject note: having <a v-if> doesn't work because the footnote process appends <sup/> after <a>,
             and then the <a v-else> doesn't get matched up with the <a v-if>. I wrapped this in a span to avoid that interation.
             Also, I need an nbsp because the spacing here goes terribly wrong.
        --><span v-if="layout === 'pointy'"><a href="https://www.wolframalpha.com/input/?i=inv+%7B%7Bsqrt%283%29%2C+sqrt%283%29%2F2%7D%2C+%7B0%2C+3%2F2%7D%7D">invert the pointy-top hex-to-pixel matrix</a><sup class="print-endnote">[40]</sup></span><span v-else=""><a href="https://www.wolframalpha.com/input/?i=inv+%7B%7B3%2F2%2C+0%7D%2C+%7Bsqrt%283%29%2F2%2C+sqrt%283%29%7D%7D">invert the flat-top hex-to-pixel matrix</a><sup class="print-endnote">[41]</sup></span> into a pixel-to-hex matrix:</p>
<pre v-if="layout === 'pointy'" class="matrix float-right">⎡q⎤     ⎡ <span class="q">sqrt(3)/3     -1/3</span> ⎤   ⎛ ⎡x⎤        ⎞
⎢ ⎥  =  ⎢                    ⎥ × ⎜ ⎢ ⎥ ÷ size ⎥
⎣r⎦     ⎣     <span class="r">0          2/3</span> ⎦   ⎝ ⎣y⎦        ⎠</pre>
<pre v-else="" class="matrix float-right">⎡q⎤     ⎡   <span class="q">2/3         0</span>    ⎤   ⎛ ⎡x⎤        ⎞
⎢ ⎥  =  ⎢                    ⎥ × ⎜ ⎢ ⎥ ÷ size ⎥
⎣r⎦     ⎣  <span class="r">-1/3    sqrt(3)/3</span> ⎦   ⎝ ⎣y⎦        ⎠</pre>
<p>This calculation will give us fractional axial coordinates (floats) for <code>q</code> and <code>r</code>. The <a href="#rounding">axial_round()</a> function will convert the fractional axial coordinates into integer axial hex coordinates. Here's the code:</p>
<pre v-if="layout === 'pointy'">function pixel_to_pointy_hex(point):
    // invert the scaling
    var x = point.x / size
    var y = point.y / size
    // cartesian to hex
    var q = (<span class="q">sqrt(3)/3</span> * x  -  <span class="q">1./3</span> * y)
    var r = (                  <span class="r">2./3</span> * y)
    return axial_round(Hex(q, r))</pre>
<pre v-else="">function pixel_to_flat_hex(point):
    // invert the scaling
    var x = point.x / size
    var y = point.y / size
    // cartesian to hex
    var q = ( <span class="q">2./3</span> * x                  )
    var r = (<span class="r">-1./3</span> * x  +  <span class="r">sqrt(3)/3</span> * y)
    return axial_round(Hex(q, r))</pre>
<div class="text-center">Code for: <label><input type="radio" v-model="layout" value="flat">flat top</label> or <label><input type="radio" v-model="layout" value="pointy">pointy top</label>
</div>
<p>This algorithm reuses the round() function needed in line drawing. I'm making a <a href="more-pixel-to-hex.html">list of other algorithms</a> that don't use the round() function.</p>
</div></script><h3 id="pixel-to-hex-offset">
<span>Offset coordinates</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#pixel-to-hex-offset">#</a>
</h3>
<p>If you use offset coordinates, you can convert to pixel to axial, then axial to offset. There are also more direct algorithms that I need to study; browse <a href="https://www.redblobgames.com/grids/hexagons/more-pixel-to-hex.html#more">this list</a>. In one project I used <a href="https://www.redblobgames.com/grids/hexagons/more-pixel-to-hex.html#pixel-map">a pixel map</a>, an precomputed array of pixels that stores the hex coordinate at each.</p>
<h3 id="pixel-to-hex-doubled">
<span>Doubled coordinates</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#pixel-to-hex-doubled">#</a>
</h3>
<p>The <a href="https://www.redblobgames.com/grids/hexagons/#hex-to-pixel-doubled">hex-to-pixel</a> algorithm for doubled coordinates is a straight multiply, so the pixel-to-hex will divide by those same amounts. After that, we need to round to the nearest hex. I haven't worked that out yet for doubled coordinates.</p>
<h3 id="pixel-to-hex-mod-origin">
<span>Mod: non-zero origin</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#pixel-to-hex-mod-origin">#</a>
</h3>
<p>For hex-to-pixel, we implemented <a href="https://www.redblobgames.com/grids/hexagons/#hex-to-pixel-mod-origin">a non-zero origin</a> by inserting an addition at the <em>end</em> of the chain. To invert this operation, we need to insert a subtraction at the <em>beginning</em> of the chain:</p>
<pre>function *_to_hex(point):
    <b>// invert the addition</b>
    x = x - origin.x
    y = y - origin.y
    // invert the scaling
    …
    // cartesian to hex
    …</pre>
<p>This pattern is not limited to hexagons. Any chain of operations p → A → B → C → q can be inverted by inverting each individual operation and performing them in reverse order: q → C⁻¹ → B⁻¹ → A⁻¹ → p.</p>
<h3 id="pixel-to-hex-mod-pixelsize">
<span>Mod: pixel sizes</span><a class="anchor" aria-hidden="true" href="https://www.redblobgames.com/grids/hexagons/#pixel-to-hex-mod-pixelsize">#</a>
</h3>
<p>For hex-to-pixel, we implemented <a href="https://www.redblobgames.com/grids/hexagons/#hex-to-pixel-mod-pixelsize">non-uniform scaling</a> by changing the multiplying by <code>size</code> to multiplying by a different scale for x and y. To invert this operation, we need to divide by those scaling values:</p>
<div id="code-pixel-to-hex-mod-pixelsize"><div>Desired size <label>width=<input type="number" style="width: 4em; text-align: right;"></label> ✕ <label>height=<input type="number" style="width: 4em; text-align: right;"></label> in pixels</div> <pre>function *_to_hex(hex):
    <b>// invert the scaling</b>
    x = x / (17 / sqrt(3))
    y = y / (24 / 2.)
    // cartesian to hex
    …</pre> <div class="text-center"><label><input type="radio" value="flat">flat top</label> or <label><input type="radio" value="pointy">pointy top</label></div> <p>Similar to hex-to-pixel, inlining the scaling into the matrix multiply will simplify the code by canceling out the <code>sqrt(3)</code>. It's easier to reason about the code when the steps are separate, so I start out with separate code before combining the steps.</p></div><script type="x-template" id="template-code-pixel-to-hex-mod-pixelsize"><div id="code-pixel-to-hex-mod-pixelsize">
<div>Desired size <label>width=<input type="number" v-model="desiredWidth" style="width:4em;text-align:right"></label> ✕ <label>height=<input type="number" v-model="desiredHeight" style="width:4em;text-align:right"></label> in pixels</div>
<pre>function *_to_hex(hex):
    <b>// invert the scaling</b>
    x = x / ({{desiredWidth}} / {{ layout === 'pointy'? "sqrt(3)":"2." }})
    y = y / ({{desiredHeight}} / {{ layout === 'pointy'? "2.":"sqrt(3)" }})
    // cartesian to hex
    …</pre>
<div class="text-center">
<label><input type="radio" v-model="layout" value="flat">flat top</label> or <label><input type="radio" v-model="layout" value="pointy">pointy top</label>
</div>
<p>Similar to hex-to-pixel, inlining the scaling into the matrix multiply will simplify the code by canceling out the <code>sqrt(3)</code>. It's easier to reason about the code when the steps are separate, so I start out with separate code before combining the steps.</p>
</div></script></section><section><h2 id="rounding">
<span><a href="https://www.redblobgames.com/grids/hexagons/#rounding">Rounding to nearest hex</a></span><a class="anchor" href="https://www.redblobgames.com/grids/hexagons/#rounding">#</a>
</h2>
<p>Sometimes we'll end up with a <em>floating-point</em> cube coordinate, and we'll want to know which hex it should be in. This comes up in <a href="https://www.redblobgames.com/grids/hexagons/#line-drawing">line drawing</a> and <a href="https://www.redblobgames.com/grids/hexagons/#pixel-to-hex">pixel to hex</a>. Converting a floating point value to an integer value is called <em>rounding</em> so I call this algorithm <code>cube_round</code>.</p>
<p>Just as with integer cube coordinates, <code>frac.q + frac.r + frac.s = 0</code> with fractional (floating point) cube coordinates. We can round each component to the nearest integer, <code>q = round(frac.q); r = round(frac.r); s = round(frac.s)</code>. However, after rounding we do <em>not</em> have a guarantee that <code>q + r + s = 0</code>. We do have a way to correct the problem: <em>reset</em> the component with the largest change back to what the constraint <code>q + r + s = 0</code> requires. For example, if the r-change <code>abs(r-frac.r)</code> is larger than <code>abs(q-frac.q)</code> and <code>abs(s-frac.s)</code>, then we reset <code>r = -q-s</code>. This guarantees that <code>q + r + s = 0</code>. Here's the algorithm:</p>
<pre>function cube_round(frac):
    var q = round(frac.q)
    var r = round(frac.r)
    var s = round(frac.s)

    var q_diff = abs(q - frac.q)
    var r_diff = abs(r - frac.r)
    var s_diff = abs(s - frac.s)

    if q_diff &gt; r_diff and q_diff &gt; s_diff:
        q = -r-s
    else if r_diff &gt; s_diff:
        r = -q-s
    else:
        s = -q-r

    return Cube(q, r, s)</pre>
<p>For non-cube coordinates, the simplest thing to do is to <a href="https://www.redblobgames.com/grids/hexagons/#conversions">convert to cube coordinates</a>, use the rounding algorithm, then convert back:</p>
<pre>function axial_round(hex):
    return cube_to_axial(cube_round(axial_to_cube(hex)))</pre>
<p>The same would work if you have <code>oddr</code>, <code>evenr</code>, <code>oddq</code>, or <code>evenq</code> instead of <code>axial</code>. Jacob Rus has a <a href="https://observablehq.com/@jrus/hexround">direct implementation of axial_round</a><sup class="print-endnote">[42]</sup> without converting to cube first.</p>
<p>Implementation note: <code>cube_round</code> and <code>axial_round</code> take <em>float</em> coordinates instead of <em>int</em> coordinates. If you've written a Cube and Hex class, they'll work fine in dynamically typed languages where you can pass in floats instead of ints, and they'll also work fine in statically typed languages with a unified number type. However, in most statically typed languages, you'll need a separate class/struct type for float coordinates, and <code>cube_round</code> will have type <code>FloatCube → Cube</code>. If you also need <code>axial_round</code>, it will be <code>FloatHex → Hex</code>, using helper function <code>floatcube_to_floathex</code> instead of <code>cube_to_hex</code>. In languages with parameterized types (C++, Haskell, etc.) you might define <code>Cube&lt;T&gt;</code> where <code>T</code> is either <code>int</code> or <code>float</code>. Alternatively, you could write <code>cube_round</code> to take three floats as inputs instead of defining a new type just for this function.</p>
<p>This algorithm is based on <a href="http://www-cs-students.stanford.edu/~amitp/Articles/Hexagon2.html">Charles Fu's article from 1994</a><sup class="print-endnote">[43]</sup>. His code contains the additional optimization that if <code>rx + ry + rz = 0</code> there's no need to look at the error values and reset the largest component.</p>
<p>Patrick Surry has a <a href="https://blocks.roadtolarissa.com/patricksurry/0603b407fa0a0071b59366219c67abca">visualization showing why the rounding algorithm works</a><sup class="print-endnote">[44]</sup>. Martin R. Han has a <a href="https://www.desmos.com/3d/86szmiocif">different visualization showing why the rounding algorithm works</a><sup class="print-endnote">[45]</sup>.</p></section><section><h2 id="map-storage">
<span><a href="https://www.redblobgames.com/grids/hexagons/#map-storage">Map storage in axial coordinates</a></span><a class="anchor" href="https://www.redblobgames.com/grids/hexagons/#map-storage">#</a>
</h2>
<p>One of the common complaints about the axial coordinate system is that it leads to wasted space when using a rectangular map; that's one reason to favor an offset coordinate system. However all the hex coordinate systems lead to wasted space when using a triangular or hexagonal map. We can use the same strategies for storing all of them.</p>
<div id="diagram-map-storage" class="wide-container"><figure style="margin: 0px;"><svg viewBox="-110 -200 3150 1200" style="max-width: 75rem;"><g transform="translate(0, 0)" fill="white" stroke="black"><g class=" rotate-pointy"><g class="grid"><g transform="translate(0,520)"><g class="firstcol"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(0,693)"><g class="firstcol"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(0,866)"><g class="firstcol"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(0,1039)"><g class="firstcol"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">0</tspan>, <tspan class="r-coord">6</tspan></text></g></g><g transform="translate(150,433)"><g class="firstcol samerow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(150,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(150,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(150,953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(150,1126)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">1</tspan>, <tspan class="r-coord">6</tspan></text></g></g><g transform="translate(300,346)"><g class="firstcol"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(300,520)"><g class="samerow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(300,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(300,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(300,1039)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(300,1212)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">2</tspan>, <tspan class="r-coord">6</tspan></text></g></g><g transform="translate(450,260)"><g class="firstcol"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(450,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(450,606)"><g class="highlight samerow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(450,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(450,953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(450,1126)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(450,1299)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">3</tspan>, <tspan class="r-coord">6</tspan></text></g></g><g transform="translate(600,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(600,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(600,693)"><g class="samerow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(600,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(600,1039)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(600,1212)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">4</tspan>, <tspan class="r-coord">5</tspan></text></g></g><g transform="translate(750,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(750,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(750,779)"><g class="samerow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(750,953)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(750,1126)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">5</tspan>, <tspan class="r-coord">4</tspan></text></g></g><g transform="translate(900,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(900,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(900,866)"><g class="samerow"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(900,1039)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon><text dy="0.4em" class="unrotate"><tspan class="q-coord">6</tspan>, <tspan class="r-coord">3</tspan></text></g></g></g></g></g><g transform="translate(1800, -150)" fill="white" stroke="black"><g transform="translate(0, 150)"><text dy="0.4em" class="">r = 0</text><g transform="translate(150, 0)" class="wall" style="opacity: 1;"><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text dy="0.4em">(null)</text></g><g transform="translate(300, 0)" class="wall" style="opacity: 1;"><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text dy="0.4em">(null)</text></g><g transform="translate(450, 0)" class="wall" style="opacity: 1;"><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text dy="0.4em">(null)</text></g><g transform="translate(600, 0)" class="firstcol"><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">3</tspan>, <tspan class="r-coord">0</tspan></text></g><g transform="translate(750, 0)" class=""><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">4</tspan>, <tspan class="r-coord">0</tspan></text></g><g transform="translate(900, 0)" class=""><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">5</tspan>, <tspan class="r-coord">0</tspan></text></g><g transform="translate(1050, 0)" class=""><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">6</tspan>, <tspan class="r-coord">0</tspan></text></g></g><g transform="translate(0, 300)"><text dy="0.4em" class="">r = 1</text><g transform="translate(150, 0)" class="wall" style="opacity: 1;"><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text dy="0.4em">(null)</text></g><g transform="translate(300, 0)" class="wall" style="opacity: 1;"><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text dy="0.4em">(null)</text></g><g transform="translate(450, 0)" class="firstcol"><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">2</tspan>, <tspan class="r-coord">1</tspan></text></g><g transform="translate(600, 0)" class=""><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">3</tspan>, <tspan class="r-coord">1</tspan></text></g><g transform="translate(750, 0)" class=""><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">4</tspan>, <tspan class="r-coord">1</tspan></text></g><g transform="translate(900, 0)" class=""><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">5</tspan>, <tspan class="r-coord">1</tspan></text></g><g transform="translate(1050, 0)" class=""><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">6</tspan>, <tspan class="r-coord">1</tspan></text></g></g><g transform="translate(0, 450)"><text dy="0.4em" class="r-axis">r = 2</text><g transform="translate(150, 0)" class="samerow wall" style="opacity: 1;"><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text dy="0.4em">(null)</text></g><g transform="translate(300, 0)" class="firstcol samerow"><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">1</tspan>, <tspan class="r-coord">2</tspan></text></g><g transform="translate(450, 0)" class="samerow"><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">2</tspan>, <tspan class="r-coord">2</tspan></text></g><g transform="translate(600, 0)" class="highlight samerow"><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">3</tspan>, <tspan class="r-coord">2</tspan></text></g><g transform="translate(750, 0)" class="samerow"><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">4</tspan>, <tspan class="r-coord">2</tspan></text></g><g transform="translate(900, 0)" class="samerow"><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">5</tspan>, <tspan class="r-coord">2</tspan></text></g><g transform="translate(1050, 0)" class="samerow"><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">6</tspan>, <tspan class="r-coord">2</tspan></text></g></g><g transform="translate(0, 600)"><text dy="0.4em" class="">r = 3</text><g transform="translate(150, 0)" class="firstcol"><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">0</tspan>, <tspan class="r-coord">3</tspan></text></g><g transform="translate(300, 0)" class=""><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">1</tspan>, <tspan class="r-coord">3</tspan></text></g><g transform="translate(450, 0)" class=""><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">2</tspan>, <tspan class="r-coord">3</tspan></text></g><g transform="translate(600, 0)" class=""><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">3</tspan>, <tspan class="r-coord">3</tspan></text></g><g transform="translate(750, 0)" class=""><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">4</tspan>, <tspan class="r-coord">3</tspan></text></g><g transform="translate(900, 0)" class=""><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">5</tspan>, <tspan class="r-coord">3</tspan></text></g><g transform="translate(1050, 0)" class=""><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">6</tspan>, <tspan class="r-coord">3</tspan></text></g></g><g transform="translate(0, 750)"><text dy="0.4em" class="">r = 4</text><g transform="translate(150, 0)" class="firstcol"><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">0</tspan>, <tspan class="r-coord">4</tspan></text></g><g transform="translate(300, 0)" class=""><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">1</tspan>, <tspan class="r-coord">4</tspan></text></g><g transform="translate(450, 0)" class=""><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">2</tspan>, <tspan class="r-coord">4</tspan></text></g><g transform="translate(600, 0)" class=""><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">3</tspan>, <tspan class="r-coord">4</tspan></text></g><g transform="translate(750, 0)" class=""><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">4</tspan>, <tspan class="r-coord">4</tspan></text></g><g transform="translate(900, 0)" class=""><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">5</tspan>, <tspan class="r-coord">4</tspan></text></g><g transform="translate(1050, 0)" class="wall" style="opacity: 1;"><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text dy="0.4em">(null)</text></g></g><g transform="translate(0, 900)"><text dy="0.4em" class="">r = 5</text><g transform="translate(150, 0)" class="firstcol"><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">0</tspan>, <tspan class="r-coord">5</tspan></text></g><g transform="translate(300, 0)" class=""><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">1</tspan>, <tspan class="r-coord">5</tspan></text></g><g transform="translate(450, 0)" class=""><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">2</tspan>, <tspan class="r-coord">5</tspan></text></g><g transform="translate(600, 0)" class=""><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">3</tspan>, <tspan class="r-coord">5</tspan></text></g><g transform="translate(750, 0)" class=""><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">4</tspan>, <tspan class="r-coord">5</tspan></text></g><g transform="translate(900, 0)" class="wall" style="opacity: 1;"><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text dy="0.4em">(null)</text></g><g transform="translate(1050, 0)" class="wall" style="opacity: 1;"><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text dy="0.4em">(null)</text></g></g><g transform="translate(0, 1050)"><text dy="0.4em" class="">r = 6</text><g transform="translate(150, 0)" class="firstcol"><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">0</tspan>, <tspan class="r-coord">6</tspan></text></g><g transform="translate(300, 0)" class=""><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">1</tspan>, <tspan class="r-coord">6</tspan></text></g><g transform="translate(450, 0)" class=""><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">2</tspan>, <tspan class="r-coord">6</tspan></text></g><g transform="translate(600, 0)" class=""><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text><tspan class="q-coord">3</tspan>, <tspan class="r-coord">6</tspan></text></g><g transform="translate(750, 0)" class="wall" style="opacity: 1;"><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text dy="0.4em">(null)</text></g><g transform="translate(900, 0)" class="wall" style="opacity: 1;"><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text dy="0.4em">(null)</text></g><g transform="translate(1050, 0)" class="wall" style="opacity: 1;"><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text dy="0.4em">(null)</text></g></g><g transform="translate(150, 0)"><text dy="0.4em" class="" style="opacity: 1;">q = 0</text></g><g transform="translate(300, 0)"><text dy="0.4em" class="" style="opacity: 1;">q = 1</text></g><g transform="translate(450, 0)"><text dy="0.4em" class="" style="opacity: 1;">q = 2</text></g><g transform="translate(600, 0)"><text dy="0.4em" class="q-axis" style="opacity: 1;">q = 3</text></g><g transform="translate(750, 0)"><text dy="0.4em" class="" style="opacity: 1;">q = 4</text></g><g transform="translate(900, 0)"><text dy="0.4em" class="" style="opacity: 1;">q = 5</text></g><g transform="translate(1050, 0)"><text dy="0.4em" class="" style="opacity: 1;">q = 6</text></g></g></svg><div style="text-align: center;">Shape: <label><input type="radio" value="rectangle">rectangle&nbsp;</label><label><input type="radio" value="hexagon">hexagon&nbsp;</label><label><input type="radio" value="rhombus">rhombus&nbsp;</label><label><input type="radio" value="down-triangle">down-triangle&nbsp;</label><label><input type="radio" value="up-triangle">up-triangle&nbsp;</label><br> Switch to <button class="sans-serif">array of arrays</button></div></figure></div><script type="x-template" id="template-diagram-map-storage"><div id="diagram-map-storage" class="wide-container"><figure style="margin:0"><svg viewBox="-110 -200 3150 1200" style="max-width:75rem"><!-- note that even though this looks like it obeys the rotation, the diagram is built for only pointy top --><g v-bind:transform="`translate(${leftDiagramX}, 0)`" fill="white" stroke="black"><g v-bind:class="rotateClass"><a-grid v-bind:hexes="grid" v-bind:setHighlight="setHighlight"><g slot-scope="props" v-bind:class="className(props.hex)"><a-hex></a-hex><a-text><tspan class="q-coord">{{props.hex.q}}</tspan>, <tspan class="r-coord">{{props.hex.r}}</tspan></a-text></g></a-grid></g></g><g v-bind:transform="`translate(${rightDiagramX}, -150)`" fill="white" stroke="black"><g v-for="r in rRange" v-bind:key="'r'+r" v-bind:transform="`translate(0, ${rowY(r)})`"><text dy="0.4em" v-bind:class="{['r-axis']: r === highlight.r}">r = {{r}}</text><g v-for="q in qRange" v-bind:key="q" v-bind:transform="`translate(${colX(q, r)}, 0)`" v-bind:class="className(new Hex(q, r, -q-r))" v-bind:style="styleRules(new Hex(q, r, -q-r))" v-on:touchstart.prevent="" v-on:pointerenter="setHighlight(new Hex(q, r, -q-r))" v-on:pointerdown="$event.target.releasePointerCapture($event.pointerId);setHighlight(new Hex(q, r, -q-r))"><polygon points="-75,-75 75,-75 75,75 -75,75"></polygon><text dy="0.4em" v-if="wall(new Hex(q, r, -q-r))">(null)</text><text v-else=""><tspan class="q-coord">{{q}}</tspan>, <tspan class="r-coord">{{r}}</tspan></text></g></g><g v-for="q in qRange" v-bind:key="'q'+q" v-bind:transform="`translate(${colX(q, 0)}, 0)`"><text dy="0.4em" v-bind:class="{['q-axis']: q === highlight.q}" v-bind:style="styleHideWhenSliding">q = {{q}}</text></g></g></svg><div style="text-align:center">Shape: <label v-for="s in shapes" v-bind:key="s">  <input type="radio" v-model="shape" v-bind:value="s">{{s}} </label><br> Switch to <button class="sans-serif" v-on:click="phase = 1-phase">{{['array of arrays', '2D array'][phase]}}</button>
</div></figure></div></script><p>Notice in the diagram that the wasted space is on the left and right sides of each row (except for rhombus maps) This gives us three strategies for storing the map:</p>
<ol>
<li>Use a <strong>2D Array</strong>. Use nulls or some other sentinel at the unused spaces. Store <code>Hex(<span class="q">q</span>, <span class="r">r</span>)</code> at <code>array[<span class="r">r</span>][<span class="q">q</span>]</code>. At most there's a factor of two for these common shapes; it may not be worth using a more complicated solution.</li>
<li>Use a <strong>hash table</strong> instead of dense array. This allows arbitrarily shaped maps, including ones with holes. Store <code>Hex(<span class="q">q</span>, <span class="r">r</span>)</code> in <code>hash_table(hash(<span class="q">q</span>,<span class="r">r</span>))</code>.</li>
<li>Use an <strong>array of arrays</strong> by sliding row to the left, and shrinking the rows to the minimum size. For pointy-top hexes, store <code>Hex(<span class="q">q</span>, <span class="r">r</span>)</code> in <code>array[<span class="r">r</span> - first_row][<span class="q">q</span> - first_column(r)]</code>. Some examples for the map shapes above: <ul>
<li>
<strong>Rectangle</strong>. Store <code>Hex(<span class="q">q</span>, <span class="r">r</span>)</code> at <code>array[<span class="r">r</span>][<span class="q">q</span> + floor(r/2)]</code>. Each row has the same length. This is equivalent to odd-r offset.</li>
<li>
<strong>Hexagon</strong>. Store <code>Hex(<span class="q">q</span>, <span class="r">r</span>)</code> at <code>array[<span class="r">r</span>][<span class="q">q</span> - max(0, N-r)]</code>. Row <span class="r">r</span> size is <code>2*N+1 - abs(N-r)</code>.</li>
<li>
<strong>Rhombus</strong>. Conveniently, <code>first_row</code> and <code>first_column(r)</code> are both 0. Store <code>Hex(<span class="q">q</span>, <span class="r">r</span>)</code> at <code>array[<span class="r">r</span>][<span class="q">q</span>]</code>. All rows are the same length.</li>
<li>
<strong>Down-triangle</strong>. Store <code>Hex(<span class="q">q</span>, <span class="r">r</span>)</code> at <code>array[<span class="r">r</span>][<span class="q">q</span>]</code>. Row <span class="r">r</span> has size <code>N+1-r</code>.</li>
<li>
<strong>Up-triangle</strong>. Store <code>Hex(<span class="q">q</span>, <span class="r">r</span>)</code> at <code>array[<span class="r">r</span>][<span class="q">q</span> - N+1+r]</code>. Row <span class="r">r</span> has size <code>1+r</code>.</li>
</ul> For flat-top hexes, swap the roles of the rows and columns, and use <code>array[<span class="q">q</span> - first_column][<span class="r">r</span> - first_row(q)]</code>.</li>
</ol>
<p>Encapsulate access into the getter/setter in a map class so that the rest of the game doesn't need to know about the map storage. Your maps may not look exactly like these, so you will have to adapt one of these approaches.</p></section><section><h2 id="wraparound">
<span><a href="https://www.redblobgames.com/grids/hexagons/#wraparound">Wraparound maps</a></span><a class="anchor" href="https://www.redblobgames.com/grids/hexagons/#wraparound">#</a>
</h2>
<div class="float-container">
<div>
<p>Sometimes you may want the map to “wrap” around the edges. In a square map, you can either wrap around the x-axis only (roughly corresponding to a sphere) or both x- and y-axes (roughly corresponding to a torus). Wraparound depends on the map shape, not the tile shape. To wrap around a rectangular map is easy with offset coordinates. I'll show how to wrap around a hexagon-shaped map with cube coordinates.</p>
<p>Corresponding to the center of the map, there are six “mirror” centers. When you go off the map, you subtract the mirror center closest to you until you are back on the main map. In the diagram, try exiting the center map, and watch one of the mirrors enter the map on the opposite side.</p>
<p>The simplest implementation is to precompute the answers. Make a lookup table storing, for each hex just off the map, the corresponding cube on the other side. For each of the six mirror centers <code>M</code>, and each of the locations on the map <code>L</code>, store <code>mirror_table[cube_add(M, L)] = L</code>. Then any time you calculate a hex that's in the mirror table, replace it by the unmirrored version. See <a href="https://gamedev.stackexchange.com/a/137603/2472">stackoverflow</a><sup class="print-endnote">[46]</sup> for another approach.</p>
<p>For a hexagonal shaped map with radius <code>N</code>, the mirror centers will be <code>Cube(2*N+1, -N, -N-1)</code> and its <a href="https://www.redblobgames.com/grids/hexagons/#rotation">six rotations</a>.</p>
</div>
<figure id="diagram-wraparound" class="float-right"><svg viewBox="-1170 -1170 2340 2340" style="max-width: 31.25rem;"><g fill="white" stroke="black" class=" rotate-pointy"><g class="grid"><g transform="translate(-300,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,0)"><g class="origin highlight"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-87)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,87)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,260)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,-173)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,0)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,173)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,346)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,-260)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,-87)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,87)"><g class="origin highlight wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,260)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,433)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(900,-173)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(900,0)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(900,173)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(900,346)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(1050,-87)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(1050,87)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(1050,260)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,520)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,693)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,866)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,433)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,606)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,779)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,953)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,346)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,520)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,693)"><g class="origin highlight wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,866)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,1039)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,433)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,606)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,779)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,953)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,520)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,693)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,866)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,433)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,606)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,779)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,346)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,520)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,693)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,866)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,260)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,433)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,606)"><g class="origin highlight wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,779)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,953)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,346)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,520)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,693)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,866)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,433)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,606)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,779)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-1050,-260)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-1050,-87)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-1050,87)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-900,-346)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-900,-173)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-900,0)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-900,173)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,-433)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,-260)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,-87)"><g class="origin highlight wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,87)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,260)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,-346)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,-173)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,0)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,173)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-260)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-87)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,87)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,-866)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,-693)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,-520)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-953)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-779)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-606)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-433)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-1039)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-866)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-693)"><g class="origin highlight wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-520)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-346)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-953)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-779)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-606)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-433)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-866)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-693)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-520)"><g class="wrapped"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-779)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-606)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-433)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-866)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-693)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-520)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-346)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-953)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-779)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-606)"><g class="origin highlight wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-433)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-260)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,-866)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,-693)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,-520)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,-346)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,-779)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,-606)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,-433)"><g class="wrapped parity"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g></g></g> <g transform="translate(1170,1170) scale(1.5)"><g transform="translate(-175,-50) scale(0.5)" class="toggle-orientation"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em">flat</text></g> <g transform="translate(-75,-50) rotate(-30) scale(0.5)" class="toggle-orientation selected"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em" transform="rotate(30)">pointy</text></g></g> <!----></svg></figure><script type="x-template" id="template-diagram-wraparound"><figure id="diagram-wraparound" class="float-right"><a-svg style="max-width:31.25rem" v-bind:orientation-button-scale="1.5"><a-grid v-bind:hexes="grid" v-bind:setHighlight="setHighlight"><g slot-scope="props" v-bind:class="className(props.hex)"><a-hex></a-hex></g></a-grid></a-svg></figure></script><p>Related: Sander Evers has a <a href="https://observablehq.com/@sanderevers/hexagon-tiling-of-an-hexagonal-grid">nice explanation of how to combine small hexagons into a grid of large hexagons</a><sup class="print-endnote">[47]</sup> and also a <a href="https://observablehq.com/@sanderevers/hexmod-representation">coordinate system to represent small hexagons within a larger one</a><sup class="print-endnote">[48]</sup>.</p>
<!-- add link to https://www.boristhebrave.com/2025/02/17/wraparound-hex-grids/ and maybe an implementation too -->
</div></section><section><h2 id="pathfinding">
<span><a href="https://www.redblobgames.com/grids/hexagons/#pathfinding">Pathfinding</a></span><a class="anchor" href="https://www.redblobgames.com/grids/hexagons/#pathfinding">#</a>
</h2>
<div class="float-container">
<p>If you're using graph-based pathfinding such as A* or Dijkstra's algorithm or Floyd-Warshall, pathfinding on hex grids isn't different from pathfinding on square grids. The explanations and code from <a href="https://www.redblobgames.com/pathfinding/a-star/introduction.html">my pathfinding tutorial</a><sup class="print-endnote">[49]</sup> will work equally well on hexagonal grids.</p>
<figure id="diagram-pathfinding" class="float-right"><svg viewBox="-972.6279441628825 -972.6279441628825 1945.255888325765 1945.255888325765" style="max-width: 31.25rem;"><g fill="white" stroke="black" class=" rotate-pointy"><g class="grid"><g transform="translate(-750,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,260)"><g class="wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-750,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,0)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,173)"><g class="wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-600,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,87)"><g class="wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-450,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,0)"><g class="wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-300,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-260)"><g class="wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,87)"><g class="wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,260)"><g class="wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(-150,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-346)"><g class="wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,-173)"><g class="path"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,0)"><g class="path origin"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,346)"><g class="wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(0,866)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-433)"><g class="wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-260)"><g class="path"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,-87)"><g class="wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,433)"><g class="wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(150,779)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,-173)"><g class="path"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,0)"><g class="wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,173)"><g class="wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,346)"><g class="wall"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(300,693)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,-87)"><g class="path"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(450,606)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,-520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,-346)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,-173)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,0)"><g class="path"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,173)"><g class="path"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,346)"><g class="highlight path"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(600,520)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,-433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,-260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,-87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,87)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,260)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g><g transform="translate(750,433)"><g class=""><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon></g></g></g><path d="M 600 346.41016151377545 L 600 173.20508075688772 L 600 0 L 450 -86.60254037844383 L 300 -173.20508075688772 L 150 -259.8076211353316 L 0 -173.20508075688772 L 0 0" class="path"></path></g> <g transform="translate(972.6279441628825,972.6279441628825) scale(1)"><g transform="translate(-175,-50) scale(0.5)" class="toggle-orientation"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em">flat</text></g> <g transform="translate(-75,-50) rotate(-30) scale(0.5)" class="toggle-orientation selected"><polygon points="100,0 50,-87 -50,-87 -100,-0 -50,87 50,87"></polygon> <text dy="0.4em" transform="rotate(30)">pointy</text></g></g> <!----></svg></figure><script type="x-template" id="template-diagram-pathfinding"><figure id="diagram-pathfinding" class="float-right"><a-svg style="max-width:31.25rem"><a-grid v-bind:hexes="grid" v-bind:walls="walls" v-bind:setHighlight="setHighlight"><g slot-scope="props" v-bind:class="className(props.hex)"><a-hex></a-hex></g></a-grid><path class="path" v-bind:d="reconstructedPath"></path></a-svg></figure></script><p><span class="show-for-mouse">Mouse over</span><span class="show-for-touch">Touch</span> a hex in the diagram to see the path to it. <span class="show-for-mouse">Click or drag to toggle walls.</span></p>
<ol>
<li>
<strong>Neighbors</strong>. The sample code I provide in the pathfinding tutorial calls <code>graph.neighbors</code> to get the neighbors of a location. Use the function in the <a href="https://www.redblobgames.com/grids/hexagons/#neighbors">neighbors</a> section for this. Filter out the neighbors that are impassable.</li>
<li>
<strong>Heuristic</strong>. The sample code for A* uses a <code>heuristic</code> function that gives a distance between two locations. Use the <a href="https://www.redblobgames.com/grids/hexagons/#distances">distance formula</a>, scaled to match the movement costs. For example if your movement cost is 5 per hex, then multiply the distance by 5.</li>
</ol>
</div></section><section><h2 id="references">
<span><a href="https://www.redblobgames.com/grids/hexagons/#references">More</a></span><a class="anchor" href="https://www.redblobgames.com/grids/hexagons/#references">#</a>
</h2>
<p class="note">I have an <a href="https://www.redblobgames.com/grids/hexagons/implementation.html"><b>guide to implementing your own hex grid library</b></a>, including sample code in C++, Python, C#, Haxe, Java, Javascript, Typescript, Lua, and Rust. I also link to existing libraries for C# (including Unity), Java, Objective C, Swift, Python, Ruby, and other languages.</p>
<ul>
<li>The best early guide I saw to the axial coordinate system was <a href="http://www-cs-students.stanford.edu/~amitp/Articles/HexLOS.html">Clark Verbrugge's guide</a><sup class="print-endnote">[50]</sup>, written in 1996.</li>
<li>The first time I saw the cube coordinate system was from <a href="http://www-cs-students.stanford.edu/~amitp/Articles/Hexagon2.html">Charles Fu's posting to rec.games.programmer</a><sup class="print-endnote">[51]</sup> in 1994.</li>
<li>
<a href="http://devmag.org.za/2013/08/31/geometry-with-hex-coordinates/">DevMag has a nice visual overview of hex math</a><sup class="print-endnote">[52]</sup> including how to represent areas such as half-planes, triangles, and quadrangles. There's a <a href="https://www.gamelogic.co.za/downloads/HexMath2.pdf">PDF article</a><sup class="print-endnote">[53]</sup> that goes into more detail. <strong>Highly recommended</strong>! The <a href="https://gamelogic.co.za/grids/documentation-contents/quick-start-tutorial/gamelogics-hex-grids-for-unity-and-amit-patels-guide-for-hex-grids/">GameLogic Grids</a><sup class="print-endnote">[54]</sup> library implements these and many other grid types in Unity.</li>
<li>In my <a href="https://www.redblobgames.com/grids/parts/">Guide to Grids</a>, I cover axial coordinate systems to address square, triangle, and hexagon sides and corners, and algorithms for the relationships among tiles, sides, and corners. I also show how square and hex grids are related.</li>
<li>
<a href="https://playtechs.blogspot.com/2007/04/hex-grids.html">James McNeill has a nice visual explanation of grid transformations</a><sup class="print-endnote">[55]</sup>.</li>
<li>
<a href="https://web.archive.org/web/20090205120106/http://sc.tri-bit.com/Hex_Grids">Overview of hex coordinate types</a><sup class="print-endnote">[56]</sup>: staggered (offset), interlaced, 3D (cube), and trapezoidal (axial).</li>
<li>Hexnet explains how the <a href="https://hexnet.org/content/permutohedron">correspondence between hexagons and cubes</a><sup class="print-endnote">[57]</sup> goes much deeper than what I described on this page, generalizing to higher dimensions.</li>
<li>
<a href="https://ondras.github.io/rot.js/manual/#hex/indexing">The Rot.js library</a><sup class="print-endnote">[58]</sup> has a list of hex coordinate systems: non-orthogonal (axial), odd shift (offset), double width (interlaced), cube.</li>
<li>
<a href="https://stackoverflow.com/questions/2049196/generating-triangular-hexagonal-coordinates-xyz">Range for cube coordinates</a><sup class="print-endnote">[59]</sup>: given a distance, which hexagons are that distance from the given one?</li>
<!-- - keekerdc prohibited wayback machine, *and* wiped his blog; emailed him 2022-08-27 but no reply --><li>
<a href="https://archive.ph/20141214082648/http://keekerdc.com/2011/03/hexagon-grids-coordinate-systems-and-distance-calculations/">Distances on hex grids</a><sup class="print-endnote">[60]</sup> using cube coordinates, and reasons to use cube coordinates instead of offset.</li>
<!-- for a while this had been taken over by a domain squatter who also wiped wayback machine, but it's back on wayback machine --><li>
<a href="https://web.archive.org/web/20130608235236/https://www.br-gs.com/tutorial/hexagon-grid.html">This guide</a><sup class="print-endnote">[61]</sup> explains the basics of measuring and drawing hexagons, using an offset grid.</li>
<li>
<a href="https://stackoverflow.com/questions/2459402/hexagonal-grid-coordinates-to-pixel-coordinates">Convert cube hex coordinates to pixel coordinates</a><sup class="print-endnote">[62]</sup>.</li>
<li>
<a href="https://gamedev.stackexchange.com/questions/51264/get-ring-of-tiles-in-hexagon-grid">This thread</a><sup class="print-endnote">[63]</sup> explains how to generate rings.</li>
<li>Are there <a href="https://gamedev.stackexchange.com/questions/49718/vertical-vs-horizontal-hex-grids-pros-and-cons">pros and cons of “pointy top” and “flat top” hexagons</a><sup class="print-endnote">[64]</sup>?</li>
<li>
<a href="https://web.archive.org/web/20121113035227/http://arges-systems.com/blog/2011/01/10/hex-grid-line-of-sight-revisited/">Line of sight in a hex grid</a><sup class="print-endnote">[65]</sup> with offset coordinates, splitting hexes into triangles</li>
<li>I printed out the PDF hex grids from <a href="https://incompetech.com/graphpaper/hexagonal/">this page</a><sup class="print-endnote">[66]</sup> while working out some of the algorithms.</li>
<li>
<a href="https://link.springer.com/book/10.1007/1-84628-203-9">Hexagonal Image Processing</a><sup class="print-endnote">[67]</sup> (<a href="https://doi.org/10.1007/1-84628-203-9">DOI</a><sup class="print-endnote">[68]</sup>) is an entire book that uses a hierarchical hexagonal coordinate system.</li>
<li>This is the oldest reference I can find for axial grids: Luczak, E. and Rosenfeld, A., <em>Distance on a Hexagonal Grid</em>. IEEE Transactions on Computers (1976) (<a href="https://doi.org/10.1109/TC.1976.1674642">DOI</a><sup class="print-endnote">[69]</sup>) It calls the axial system <em>oblique coordinates</em> and the offset systems <em>pseudohexagonal grids</em>.</li>
<li>Snyder, Qi, Sander's paper <em>Coordinate system for hexagonal pixels</em> (<a href="https://doi.org/10.1117/12.348629">DOI</a><sup class="print-endnote">[70]</sup>) describes gradients, diffusion, and map storage for axial coordinates. Mersereau's paper <em>The processing of hexagonally sampled two-dimensional signals</em> (<a href="https://doi.org/10.1109/PROC.1979.11356">DOI</a><sup class="print-endnote">[71]</sup>) describes signal processing on axial coordinates.</li>
<li>There's a paper that calls cube coordinates <em>*R3 coordinates</em>: Her, Innchyn, <em>Geometric Transformations on the Hexagonal Grid</em>, IEEE Transactions on Image Processing (1995) (<a href="https://doi.org/10.1109/83.413166">DOI</a><sup class="print-endnote">[72]</sup>) It covers coordinates, correspondence to cube coordinates, rounding, reflections, scaling, shearing, and rotation. A paper from the same author (<a href="https://doi.org/10.1115/1.2919210">DOI</a><sup class="print-endnote">[73]</sup>) covers distances.</li>
<li>The <a href="https://old.reddit.com/r/gamedev/comments/1dz1tr/">Reddit discussion</a><sup class="print-endnote">[74]</sup> and <a href="https://news.ycombinator.com/item?id=5809724">Hacker News discussion</a><sup class="print-endnote">[75]</sup> and <a href="https://www.metafilter.com/128649/Hexagonal-Grids">MetaFilter discussion</a><sup class="print-endnote">[76]</sup> have more comments and links.</li>
</ul>
<p>The code that powers this page is partially procedurally generated! The core algorithms are in <a href="https://www.redblobgames.com/grids/hexagons/codegen/output/lib.js">lib.js</a>, generated from <a href="https://www.redblobgames.com/grids/hexagons/implementation.html">my guide to implementation</a>. There are a few more algorithms in <a href="https://www.redblobgames.com/grids/hexagons/hex-algorithms.js">hex-algorithms.js</a>. The interactive diagrams are in <a href="https://www.redblobgames.com/grids/hexagons/diagrams.js">diagrams.js</a> and <a href="https://www.redblobgames.com/grids/hexagons/index.js">index.js</a>, using Vue.js to inject into the templates in <a href="https://www.redblobgames.com/grids/hexagons/index.bxml">index.bxml</a> (xhtml I feed into a preprocessor).</p>
<p>There are more things I want to do for this guide. I'm <a href="https://redblobgames.notion.site/Hexagonal-Grids-7d2d4d624bc5483dafbe615d75ab3902">keeping a list on Notion</a><sup class="print-endnote">[77]</sup>. Do you have suggestions for things to change or add? Comment below.</p></section></main><div class="below-divider">
<p>Email me <a class="email" rel="me" href="mailto:redblobgames@gmail.com">redblobgames@gmail.com</a>, or comment here:</p>
<div class="print-endnote">
<h3>Links</h3>
<ol>
<li>[1]:&nbsp;http://www-cs-students.stanford.edu/~amitp/gameprog.html#hex</li>
<li>[2]:&nbsp;http://www-cs-students.stanford.edu/~amitp/Articles/Hexagon2.html</li>
<li>[3]:&nbsp;http://www-cs-students.stanford.edu/~amitp/Articles/HexLOS.html</li>
<li>[4]:&nbsp;https://web.archive.org/web/20090205120106/http://sc.tri-bit.com/Hex_Grids</li>
<li>[5]:&nbsp;https://ondras.github.io/rot.js/manual/#hex/indexing</li>
<li>[6]:&nbsp;https://www.researchgate.net/publication/235779843_Storage_and_addressing_scheme_for_practical_hexagonal_image_processing?_sg=flKEA6rk1KmOpC4LBjQJN_-NBuiR1KJtJt-XeYRXnd0z_MNUrB2gjb2FKV3iBoKg988P2xHCpQ</li>
<li>[7]:&nbsp;https://gamedev.stackexchange.com/questions/71785/converting-between-spiral-honeycomb-mosaic-and-axial-hex-coordinates</li>
<li>[8]:&nbsp;https://opus.lib.uts.edu.au/bitstream/2100/280/11/02Whole.pdf</li>
<li>[9]:&nbsp;https://web.archive.org/web/20120303114550/http://www.pyxisinnovation.com/pyxwiki/index.php?title=Generalized_Balanced_Ternary</li>
<li>[10]:&nbsp;https://www.sciencedirect.com/science/article/pii/0166218X9200186P</li>
<li>[11]:&nbsp;https://doi.org/10.1016/0166-218X(92)00186-P</li>
<li>[12]:&nbsp;https://old.reddit.com/r/gamedev/comments/19wmvn/a_data_structure_for_a_game_board_with_hexagonal/c8s9qbe/</li>
<li>[13]:&nbsp;https://github.com/SimonWailand/hexwrench</li>
<li>[14]:&nbsp;https://patricksurry.github.io/posts/flowsnake/</li>
<li>[15]:&nbsp;https://metacpan.org/pod/Math::PlanePath::FlowsnakeCentres</li>
<li>[16]:&nbsp;https://en.wikipedia.org/wiki/Bitwise_operation#AND</li>
<li>[17]:&nbsp;https://en.wikipedia.org/wiki/Modulo_operation</li>
<li>[18]:&nbsp;https://scholar.google.com/scholar?q=Storage+and+addressing+scheme+for+practical+hexagonal+image+processing</li>
<li>[19]:&nbsp;https://doi.org/10.1117/1.JEI.22.1.010502</li>
<li>[20]:&nbsp;https://web.archive.org/web/20210302023226/http://3dmdesign.com/development/hexmap-coordinates-the-easy-way</li>
<li>[21]:&nbsp;https://ondras.github.io/rot.js/manual/#hex/indexing</li>
<li>[22]:&nbsp;https://ondras.github.io/rot.js/manual/#hex/indexing</li>
<li>[23]:&nbsp;https://en.wikipedia.org/wiki/Digital_differential_analyzer_(graphics_algorithm)</li>
<li>[24]:&nbsp;https://zvold.blogspot.com/2010/02/line-of-sight-on-hexagonal-grid.html</li>
<li>[25]:&nbsp;https://stackoverflow.com/questions/3233522/elegant-clean-special-case-straight-line-grid-traversal-algorithm</li>
<li>[26]:&nbsp;https://doi.org/10.1111/1467-8659.1210027</li>
<li>[27]:&nbsp;https://doi.org/10.1111/1467-8659.1210021</li>
<li>[28]:&nbsp;http://devmag.org.za/2013/08/31/geometry-with-hex-coordinates/</li>
<li>[29]:&nbsp;https://en.wikipedia.org/wiki/Cuboid</li>
<li>[30]:&nbsp;http://devmag.org.za/2013/08/31/geometry-with-hex-coordinates/</li>
<li>[31]:&nbsp;https://gamedev.stackexchange.com/questions/15237/how-do-i-rotate-a-structure-of-hexagonal-tiles-on-a-hexagonal-grid/</li>
<li>[32]:&nbsp;https://en.wikipedia.org/wiki/1_%2B_2_%2B_3_%2B_4_%2B_%E2%8B%AF</li>
<li>[33]:&nbsp;https://x.com/BEBischof/status/969813312341917697</li>
<li>[34]:&nbsp;https://github.com/ljedrz/hex-spiral/</li>
<li>[35]:&nbsp;https://github.com/lucidBrot/hexgridspiral?tab=readme-ov-file#coordinate-systems</li>
<li>[36]:&nbsp;http://www-cs-students.stanford.edu/~amitp/Articles/HexLOS.html</li>
<li>[37]:&nbsp;https://www.adammil.net/blog/v125_Roguelike_Vision_Algorithms.html</li>
<li>[38]:&nbsp;https://www.roguebasin.com/index.php/Pre-Computed_Visibility_Tries</li>
<li>[39]:&nbsp;https://www.roguebasin.com/index.php/Field_of_Vision</li>
<li>[40]:&nbsp;https://www.wolframalpha.com/input/?i=inv+%7B%7Bsqrt%283%29%2C+sqrt%283%29%2F2%7D%2C+%7B0%2C+3%2F2%7D%7D</li>
<li>[41]:&nbsp;https://www.wolframalpha.com/input/?i=inv+%7B%7B3%2F2%2C+0%7D%2C+%7Bsqrt%283%29%2F2%2C+sqrt%283%29%7D%7D</li>
<li>[42]:&nbsp;https://observablehq.com/@jrus/hexround</li>
<li>[43]:&nbsp;http://www-cs-students.stanford.edu/~amitp/Articles/Hexagon2.html</li>
<li>[44]:&nbsp;https://blocks.roadtolarissa.com/patricksurry/0603b407fa0a0071b59366219c67abca</li>
<li>[45]:&nbsp;https://www.desmos.com/3d/86szmiocif</li>
<li>[46]:&nbsp;https://gamedev.stackexchange.com/a/137603/2472</li>
<li>[47]:&nbsp;https://observablehq.com/@sanderevers/hexagon-tiling-of-an-hexagonal-grid</li>
<li>[48]:&nbsp;https://observablehq.com/@sanderevers/hexmod-representation</li>
<li>[49]:&nbsp;https://www.redblobgames.com/pathfinding/a-star/introduction.html</li>
<li>[50]:&nbsp;http://www-cs-students.stanford.edu/~amitp/Articles/HexLOS.html</li>
<li>[51]:&nbsp;http://www-cs-students.stanford.edu/~amitp/Articles/Hexagon2.html</li>
<li>[52]:&nbsp;http://devmag.org.za/2013/08/31/geometry-with-hex-coordinates/</li>
<li>[53]:&nbsp;https://www.gamelogic.co.za/downloads/HexMath2.pdf</li>
<li>[54]:&nbsp;https://gamelogic.co.za/grids/documentation-contents/quick-start-tutorial/gamelogics-hex-grids-for-unity-and-amit-patels-guide-for-hex-grids/</li>
<li>[55]:&nbsp;https://playtechs.blogspot.com/2007/04/hex-grids.html</li>
<li>[56]:&nbsp;https://web.archive.org/web/20090205120106/http://sc.tri-bit.com/Hex_Grids</li>
<li>[57]:&nbsp;https://hexnet.org/content/permutohedron</li>
<li>[58]:&nbsp;https://ondras.github.io/rot.js/manual/#hex/indexing</li>
<li>[59]:&nbsp;https://stackoverflow.com/questions/2049196/generating-triangular-hexagonal-coordinates-xyz</li>
<li>[60]:&nbsp;https://archive.ph/20141214082648/http://keekerdc.com/2011/03/hexagon-grids-coordinate-systems-and-distance-calculations/</li>
<li>[61]:&nbsp;https://web.archive.org/web/20130608235236/https://www.br-gs.com/tutorial/hexagon-grid.html</li>
<li>[62]:&nbsp;https://stackoverflow.com/questions/2459402/hexagonal-grid-coordinates-to-pixel-coordinates</li>
<li>[63]:&nbsp;https://gamedev.stackexchange.com/questions/51264/get-ring-of-tiles-in-hexagon-grid</li>
<li>[64]:&nbsp;https://gamedev.stackexchange.com/questions/49718/vertical-vs-horizontal-hex-grids-pros-and-cons</li>
<li>[65]:&nbsp;https://web.archive.org/web/20121113035227/http://arges-systems.com/blog/2011/01/10/hex-grid-line-of-sight-revisited/</li>
<li>[66]:&nbsp;https://incompetech.com/graphpaper/hexagonal/</li>
<li>[67]:&nbsp;https://link.springer.com/book/10.1007/1-84628-203-9</li>
<li>[68]:&nbsp;https://doi.org/10.1007/1-84628-203-9</li>
<li>[69]:&nbsp;https://doi.org/10.1109/TC.1976.1674642</li>
<li>[70]:&nbsp;https://doi.org/10.1117/12.348629</li>
<li>[71]:&nbsp;https://doi.org/10.1109/PROC.1979.11356</li>
<li>[72]:&nbsp;https://doi.org/10.1109/83.413166</li>
<li>[73]:&nbsp;https://doi.org/10.1115/1.2919210</li>
<li>[74]:&nbsp;https://old.reddit.com/r/gamedev/comments/1dz1tr/</li>
<li>[75]:&nbsp;https://news.ycombinator.com/item?id=5809724</li>
<li>[76]:&nbsp;https://www.metafilter.com/128649/Hexagonal-Grids</li>
<li>[77]:&nbsp;https://redblobgames.notion.site/Hexagonal-Grids-7d2d4d624bc5483dafbe615d75ab3902</li>
</ol>
</div>
<div class="comments" role="complementary">
<div id="disqus_thread"><button style="padding:1em;width:100%" onclick="$disqus()">Load comments</button></div>
<script>
function disqus_config(){this.page.url="http://www.redblobgames.com/grids/hexagons/"}
function $disqus(){$disqus=()=>{};$l("https://redblobgames.disqus.com/embed.js")}
if(document.location.hash.match(/#comment/))setTimeout($disqus,0)
else {new IntersectionObserver(e=>{if(e[0].isIntersecting)$disqus()}).observe(document.getElementById('disqus_thread'))}</script><noscript><a href="https://redblobgames.disqus.com/?url=https://www.redblobgames.com/grids/hexagons/">View the discussion thread.</a></noscript>
</div>
</div>
<footer><div>
<address>
		  Copyright © <time>2025</time>
                      &nbsp;<a rel="author home copyright" href="https://www.redblobgames.com/">Red Blob Games</a><br><a href="https://www.redblobgames.com/blog/posts.xml"><svg viewBox="0 0 30 30" height="0.8em"><rect width="30" height="30" rx="5" fill="orange"></rect><circle cx="7" cy="23" r="4" fill="white"></circle><path d="M 5,5 A 20,20,0,0,1,25,25 M 5,13 A 12,12,0,0,1,17,25" fill="none" stroke="white" stroke-width="4" stroke-linecap="square"></path></svg>RSS Feed</a>
</address>
<div>
	      &nbsp;Created 11 Mar 2013 with <a href="https://haxe.org/">Haxe</a> and <a href="https://d3js.org/">D3.js</a> ; updated in 2018 to use <a href="https://vuejs.org/">Vue.js</a> ; &nbsp;<!-- hhmts start -->Last modified: 18 May 2025<!-- hhmts end -->
</div>
</div></footer>


</body></html>